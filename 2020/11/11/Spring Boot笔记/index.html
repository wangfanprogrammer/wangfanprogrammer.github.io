<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Spring Bootç¬”è®° | å°å¸†åšå®¢</title>
  <meta name="keywords" content=" SpringBoot ">
  <meta name="description" content="Spring Bootç¬”è®° | å°å¸†åšå®¢">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="æ ‡ç­¾">
<meta property="og:url" content="http://example.com/tags/index.html">
<meta property="og:site_name" content="å°å¸†åšå®¢">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-11-07T13:55:41.000Z">
<meta property="article:modified_time" content="2020-11-07T14:01:29.638Z">
<meta property="article:author" content="Xiao Fan">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/github-gist.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Xiao Fan</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/wangfanprogrammer" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="facebook" href="https://www.facebook.com/faker.tops" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-facebook"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="instagram" href="https://www.facebook.com/faker.tops" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-instagram"></use>
                </svg>
            
        </a>
        
    
        
        <a title="reddit" href="https://www.reddit.com/user/yelog/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-reddit"></use>
                </svg>
            
        </a>
        
    
        
        <a title="weibo" href="https://weibo.com/2279211445/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
            
        </a>
        
    
        
        <a title="jianshu" href="https://www.jianshu.com/u/ff56736de7cf" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-jianshu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/people/da-li-ai-cai-hua" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="oschina" href="https://my.oschina.net/yelog" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-oschina"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="email" href="mailto:3472693572@qq.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=3472693572&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
        <a title="kugou" href="https://www.kugou.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-kugou"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88151013" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>



<a class="more-menus">æ›´å¤šèœå•</a>


<ul>
    <li><div class="all active" data-rel="All">All<small>(16)</small></div></li>
    
        
            
            <li><div data-rel="å·¥å…·">å·¥å…·<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Markdown">Markdown<small>(10)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="spring"><i class="fold iconfont icon-right"></i>spring<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="spring<--->SpringBoot">SpringBoot<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="Win10å°éº»çƒ¦"><i class="fold iconfont icon-right"></i>Win10å°éº»çƒ¦<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="Win10å°éº»çƒ¦<--->win10ç½‘ç»œ">win10ç½‘ç»œ<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    <a class="dynamic-menu " target="_self"   href="https://wangfanprogrammer.github.io/">çŒ¿å¸†åšå®¢</a>
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  target="_blank" rel="noopener" href="https://www.cxtc.edu.cn/">About</a><a style="width: 50%"  class="friends">Friends</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="16">
<input type="hidden" id="yelog_site_word_count" value="26.5k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://wangfanprogrammer.github.io/">çŒ¿å¸†</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SpringBoot</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="All Win10å°éº»çƒ¦ "
           href="/2020/11/09/%E7%94%B5%E8%84%91%E5%B0%8F%E7%9F%A5%E8%AF%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="win10å³é”®å¤±å»æ–°å»ºä¸æ¡Œé¢å›¾æ ‡ç®­å¤´">win10å³é”®å¤±å»æ–°å»ºä¸æ¡Œé¢å›¾æ ‡ç®­å¤´</span>
            <span class="post-date" title="2020-11-09 19:30:48">2020/11/09</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/09/Markdown%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ä¸€ã€Markdownç®€ä»‹">ä¸€ã€Markdownç®€ä»‹</span>
            <span class="post-date" title="2020-11-09 19:28:48">2020/11/09</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%20%E6%A0%87%E9%A2%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="äºŒã€Markdownæ ‡é¢˜">äºŒã€Markdownæ ‡é¢˜</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E6%AE%B5%E8%90%BD/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ä¸‰ã€Markdownæ®µè½">ä¸‰ã€Markdownæ®µè½</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%20%E5%88%97%E8%A1%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å››ã€Markdownåˆ—è¡¨">å››ã€Markdownåˆ—è¡¨</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E5%8C%BA%E5%9D%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="äº”ã€MarkdownåŒºå—">äº”ã€MarkdownåŒºå—</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E4%BB%A3%E7%A0%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ä¸ƒã€Markdownä»£ç ">ä¸ƒã€Markdownä»£ç </span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E9%93%BE%E6%8E%A5/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="å…«ã€Markdowné“¾æ¥">å…«ã€Markdowné“¾æ¥</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E5%9B%BE%E7%89%87/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ä¹ã€Markdownå›¾ç‰‡">ä¹ã€Markdownå›¾ç‰‡</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E8%A1%A8%E6%A0%BC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="åã€Markdownè¡¨æ ¼">åã€Markdownè¡¨æ ¼</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All Markdown "
           href="/2020/11/10/Markdown%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="åä¸€ã€Markdowné«˜çº§æŠ€å·§">åä¸€ã€Markdowné«˜çº§æŠ€å·§</span>
            <span class="post-date" title="2020-11-10 14:30:48">2020/11/10</span>
        </a>
        
        <a id="top" class="All å·¥å…· "
           href="/2020/11/09/windows%20%E7%8E%AF%E5%A2%83%E4%B8%8B%E4%BD%BF%E7%94%A8%20hexo%20%E6%90%AD%E5%BB%BA%20blog%20%E5%B9%B3%E5%8F%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="win10ç¯å¢ƒä¸‹ä½¿ç”¨hexoæ­å»ºblog">win10ç¯å¢ƒä¸‹ä½¿ç”¨hexoæ­å»ºblog</span>
            <span class="post-date" title="2020-11-09 19:30:48">2020/11/09</span>
        </a>
        
        <a id="top" class="All å·¥å…· "
           href="/2020/11/09/%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="intellij IDEAå¸¸ç”¨å¿«æ·é”®">intellij IDEAå¸¸ç”¨å¿«æ·é”®</span>
            <span class="post-date" title="2020-11-09 21:13:48">2020/11/09</span>
        </a>
        
        <a  class="All spring SpringBoot "
           href="/2020/11/11/Spring%20Boot%E7%AC%94%E8%AE%B0/"
           data-tag="SpringBoot"
           data-author="" >
            <span class="post-title" title="Spring Bootç¬”è®°">Spring Bootç¬”è®°</span>
            <span class="post-date" title="2020-11-11 14:30:48">2020/11/11</span>
        </a>
        
        <a  class="All Win10å°éº»çƒ¦ win10ç½‘ç»œ "
           href="/2020/11/11/win10%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98/"
           data-tag="SpringBoot"
           data-author="" >
            <span class="post-title" title="Win10ç½‘ç»œé—®é¢˜">Win10ç½‘ç»œé—®é¢˜</span>
            <span class="post-date" title="2020-11-11 14:30:48">2020/11/11</span>
        </a>
        
        <a  class="All "
           href="/2020/11/07/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2020-11-07 16:50:34">2020/11/07</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Spring Bootç¬”è®°" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Spring Bootç¬”è®°</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="spring">spring</a> > 
            
            <a  data-rel="spring&lt;---&gt;SpringBoot">SpringBoot</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color1">SpringBoot</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2020-11-11 19:49:27'>2020-11-11 14:30</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:21.2k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="è·³è½¬è‡³è¯„è®ºåŒº">
            <a href="#comments">
                Comment:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81-Spring-Boot-%E5%85%A5%E9%97%A8"><span class="toc-text">ä¸€ã€**Spring Boot å…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Spring-Boot-%E7%AE%80%E4%BB%8B"><span class="toc-text">1ã€Spring Boot ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="toc-text">2ã€å¾®æœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-text">3ã€ç¯å¢ƒå‡†å¤‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81MAVEN%E8%AE%BE%E7%BD%AE%EF%BC%9B"><span class="toc-text">1ã€MAVENè®¾ç½®ï¼›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81IDEA%E8%AE%BE%E7%BD%AE"><span class="toc-text">2ã€IDEAè®¾ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81Spring-Boot-HelloWorld"><span class="toc-text">4ã€Spring Boot HelloWorld</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAmaven%E5%B7%A5%E7%A8%8B%EF%BC%9B%EF%BC%88jar%EF%BC%89"><span class="toc-text">1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%AF%BC%E5%85%A5spring-boot%E7%9B%B8%E5%85%B3%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">2ã€å¯¼å…¥spring bootç›¸å…³çš„ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E4%B8%BB%E7%A8%8B%E5%BA%8F%EF%BC%9B%E5%90%AF%E5%8A%A8Spring-Boot%E5%BA%94%E7%94%A8"><span class="toc-text">3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring Bootåº”ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E7%BC%96%E5%86%99%E7%9B%B8%E5%85%B3%E7%9A%84Controller%E3%80%81Service"><span class="toc-text">4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E8%BF%90%E8%A1%8C%E4%B8%BB%E7%A8%8B%E5%BA%8F%E6%B5%8B%E8%AF%95"><span class="toc-text">5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E7%AE%80%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="toc-text">6ã€ç®€åŒ–éƒ¨ç½²</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81Hello-World%E6%8E%A2%E7%A9%B6"><span class="toc-text">5ã€Hello Worldæ¢ç©¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81POM%E6%96%87%E4%BB%B6"><span class="toc-text">1ã€POMæ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%88%B6%E9%A1%B9%E7%9B%AE"><span class="toc-text">1ã€çˆ¶é¡¹ç›®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%90%AF%E5%8A%A8%E5%99%A8"><span class="toc-text">2ã€å¯åŠ¨å™¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%B8%BB%E7%A8%8B%E5%BA%8F%E7%B1%BB%EF%BC%8C%E4%B8%BB%E5%85%A5%E5%8F%A3%E7%B1%BB"><span class="toc-text">2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E4%BD%BF%E7%94%A8Spring-Initializer%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BASpring-Boot%E9%A1%B9%E7%9B%AE"><span class="toc-text">6ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81IDEA%EF%BC%9A%E4%BD%BF%E7%94%A8-Spring-Initializer%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">1ã€IDEAï¼šä½¿ç”¨ Spring Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81STS%E4%BD%BF%E7%94%A8-Spring-Starter-Project%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">2ã€STSä½¿ç”¨ Spring Starter Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">äºŒã€é…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">1ã€é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81YAML%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-text">2ã€YAMLè¯­æ³•ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">1ã€åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%80%BC%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-text">2ã€å€¼çš„å†™æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F%EF%BC%9A%E6%99%AE%E9%80%9A%E7%9A%84%E5%80%BC%EF%BC%88%E6%95%B0%E5%AD%97%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%B8%83%E5%B0%94%EF%BC%89"><span class="toc-text">å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E3%80%81Map%EF%BC%88%E5%B1%9E%E6%80%A7%E5%92%8C%E5%80%BC%EF%BC%89%EF%BC%88%E9%94%AE%E5%80%BC%E5%AF%B9%EF%BC%89%EF%BC%9A"><span class="toc-text">å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%EF%BC%88List%E3%80%81Set%EF%BC%89%EF%BC%9A"><span class="toc-text">æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%80%BC%E6%B3%A8%E5%85%A5"><span class="toc-text">3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%9C%A8idea%E4%B8%AD%E9%BB%98%E8%AE%A4utf-8%E5%8F%AF%E8%83%BD%E4%BC%9A%E4%B9%B1%E7%A0%81"><span class="toc-text">1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81-Value%E8%8E%B7%E5%8F%96%E5%80%BC%E5%92%8C-ConfigurationProperties%E8%8E%B7%E5%8F%96%E5%80%BC%E6%AF%94%E8%BE%83"><span class="toc-text">2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%E5%80%BC%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-text">3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81-PropertySource-amp-ImportResource-amp-Bean"><span class="toc-text">4ã€@PropertySource&amp;@ImportResource&amp;@Bean</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-text">1ã€éšæœºæ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%8D%A0%E4%BD%8D%E7%AC%A6%E8%8E%B7%E5%8F%96%E4%B9%8B%E5%89%8D%E9%85%8D%E7%BD%AE%E7%9A%84%E5%80%BC%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%8F%AF%E4%BB%A5%E6%98%AF%E7%94%A8-%E6%8C%87%E5%AE%9A%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81Profile"><span class="toc-text">5ã€Profile</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%A4%9AProfile%E6%96%87%E4%BB%B6"><span class="toc-text">1ã€å¤šProfileæ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81yml%E6%94%AF%E6%8C%81%E5%A4%9A%E6%96%87%E6%A1%A3%E5%9D%97%E6%96%B9%E5%BC%8F"><span class="toc-text">2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%BF%80%E6%B4%BB%E6%8C%87%E5%AE%9Aprofile"><span class="toc-text">3ã€æ¿€æ´»æŒ‡å®šprofile</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E4%BD%8D%E7%BD%AE"><span class="toc-text">6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-text">7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-text">8ã€è‡ªåŠ¨é…ç½®åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BB%86%E8%8A%82"><span class="toc-text">2ã€ç»†èŠ‚</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81-Conditional%E6%B4%BE%E7%94%9F%E6%B3%A8%E8%A7%A3%EF%BC%88Spring%E6%B3%A8%E8%A7%A3%E7%89%88%E5%8E%9F%E7%94%9F%E7%9A%84-Conditional%E4%BD%9C%E7%94%A8%EF%BC%89"><span class="toc-text">1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%97%A5%E5%BF%97"><span class="toc-text">ä¸‰ã€æ—¥å¿—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-text">1ã€æ—¥å¿—æ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81SLF4j%E4%BD%BF%E7%94%A8"><span class="toc-text">2ã€SLF4jä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8SLF4j-https-www-slf4j-org"><span class="toc-text">1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j   https:&#x2F;&#x2F;www.slf4j.org</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%81%97%E7%95%99%E9%97%AE%E9%A2%98"><span class="toc-text">2ã€é—ç•™é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81SpringBoot%E6%97%A5%E5%BF%97%E5%85%B3%E7%B3%BB"><span class="toc-text">3ã€SpringBootæ—¥å¿—å…³ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%97%A5%E5%BF%97%E4%BD%BF%E7%94%A8%EF%BC%9B"><span class="toc-text">4ã€æ—¥å¿—ä½¿ç”¨ï¼›</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-text">1ã€é»˜è®¤é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE"><span class="toc-text">2ã€æŒ‡å®šé…ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%88%87%E6%8D%A2%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-text">5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Web%E5%BC%80%E5%8F%91"><span class="toc-text">å››ã€Webå¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-text">1ã€ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81SpringBoot%E5%AF%B9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99%EF%BC%9B"><span class="toc-text">2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-text">3ã€æ¨¡æ¿å¼•æ“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%BC%95%E5%85%A5thymeleaf%EF%BC%9B"><span class="toc-text">1ã€å¼•å…¥thymeleafï¼›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Thymeleaf%E4%BD%BF%E7%94%A8"><span class="toc-text">2ã€Thymeleafä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99"><span class="toc-text">3ã€è¯­æ³•è§„åˆ™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81SpringMVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">4ã€SpringMVCè‡ªåŠ¨é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Spring-MVC-auto-configuration"><span class="toc-text">1. Spring MVC auto-configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%89%A9%E5%B1%95SpringMVC"><span class="toc-text">2ã€æ‰©å±•SpringMVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%85%A8%E9%9D%A2%E6%8E%A5%E7%AE%A1SpringMVC%EF%BC%9B"><span class="toc-text">3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9SpringBoot%E7%9A%84%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-text">5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81RestfulCRUD"><span class="toc-text">6ã€RestfulCRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E9%BB%98%E8%AE%A4%E8%AE%BF%E9%97%AE%E9%A6%96%E9%A1%B5"><span class="toc-text">1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">2ï¼‰ã€å›½é™…åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E7%99%BB%E9%99%86"><span class="toc-text">3ï¼‰ã€ç™»é™†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89%E3%80%81%E6%8B%A6%E6%88%AA%E5%99%A8%E8%BF%9B%E8%A1%8C%E7%99%BB%E9%99%86%E6%A3%80%E6%9F%A5"><span class="toc-text">4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%89%E3%80%81CRUD-%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8"><span class="toc-text">5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#thymeleaf%E5%85%AC%E5%85%B1%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E6%8A%BD%E5%8F%96"><span class="toc-text">thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%89%E3%80%81CRUD-%E5%91%98%E5%B7%A5%E6%B7%BB%E5%8A%A0"><span class="toc-text">6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%BC%89%E3%80%81CRUD-%E5%91%98%E5%B7%A5%E4%BF%AE%E6%94%B9"><span class="toc-text">7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E5%A6%82%E6%9E%9C%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E5%93%8D%E5%BA%94%EF%BC%9A"><span class="toc-text">2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E5%A6%82%E4%BD%95%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E7%9A%84%E9%A1%B5%E9%9D%A2%EF%BC%9B"><span class="toc-text">1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E5%A6%82%E4%BD%95%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E7%9A%84json%E6%95%B0%E6%8D%AE%EF%BC%9B"><span class="toc-text">2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E5%B0%86%E6%88%91%E4%BB%AC%E7%9A%84%E5%AE%9A%E5%88%B6%E6%95%B0%E6%8D%AE%E6%90%BA%E5%B8%A6%E5%87%BA%E5%8E%BB%EF%BC%9B"><span class="toc-text">3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E9%85%8D%E7%BD%AE%E5%B5%8C%E5%85%A5%E5%BC%8FServlet%E5%AE%B9%E5%99%A8"><span class="toc-text">8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E5%A6%82%E4%BD%95%E5%AE%9A%E5%88%B6%E5%92%8C%E4%BF%AE%E6%94%B9Servlet%E5%AE%B9%E5%99%A8%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%EF%BC%9B"><span class="toc-text">1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E6%B3%A8%E5%86%8CServlet%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6%E3%80%90Servlet%E3%80%81Filter%E3%80%81Listener%E3%80%91"><span class="toc-text">2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E6%9B%BF%E6%8D%A2%E4%B8%BA%E5%85%B6%E4%BB%96%E5%B5%8C%E5%85%A5%E5%BC%8FServlet%E5%AE%B9%E5%99%A8"><span class="toc-text">3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89%E3%80%81%E5%B5%8C%E5%85%A5%E5%BC%8FServlet%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%EF%BC%9B"><span class="toc-text">4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81%E4%BD%BF%E7%94%A8%E5%A4%96%E7%BD%AE%E7%9A%84Servlet%E5%AE%B9%E5%99%A8"><span class="toc-text">9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-text">æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-text">åŸç†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81Docker"><span class="toc-text">äº”ã€Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B-1"><span class="toc-text">1ã€ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">2ã€æ ¸å¿ƒæ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%AE%89%E8%A3%85Docker"><span class="toc-text">3ã€å®‰è£…Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E5%AE%89%E8%A3%85linux%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-text">1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E5%9C%A8linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8A%E5%AE%89%E8%A3%85docker"><span class="toc-text">2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-amp-%E6%93%8D%E4%BD%9C"><span class="toc-text">4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E9%95%9C%E5%83%8F%E6%93%8D%E4%BD%9C"><span class="toc-text">1ï¼‰ã€é•œåƒæ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">2ï¼‰ã€å®¹å™¨æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E5%AE%89%E8%A3%85MySQL%E7%A4%BA%E4%BE%8B"><span class="toc-text">3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81SpringBoot%E4%B8%8E%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE"><span class="toc-text">å…­ã€SpringBootä¸æ•°æ®è®¿é—®</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81JDBC"><span class="toc-text">1ã€JDBC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%95%B4%E5%90%88Druid%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">2ã€æ•´åˆDruidæ•°æ®æº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%95%B4%E5%90%88MyBatis"><span class="toc-text">3ã€æ•´åˆMyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89%E3%80%81%E6%B3%A8%E8%A7%A3%E7%89%88"><span class="toc-text">4ï¼‰ã€æ³¨è§£ç‰ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%89%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%89%88"><span class="toc-text">5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%95%B4%E5%90%88SpringData-JPA"><span class="toc-text">4ã€æ•´åˆSpringData JPA</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81SpringData%E7%AE%80%E4%BB%8B"><span class="toc-text">1ï¼‰ã€SpringDataç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E6%95%B4%E5%90%88SpringData-JPA"><span class="toc-text">2ï¼‰ã€æ•´åˆSpringData JPA</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-text">ä¸ƒã€å¯åŠ¨é…ç½®åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BASpringApplication%E5%AF%B9%E8%B1%A1"><span class="toc-text">1ã€åˆ›å»ºSpringApplicationå¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E8%BF%90%E8%A1%8Crun%E6%96%B9%E6%B3%95"><span class="toc-text">2ã€è¿è¡Œrunæ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E6%9C%BA%E5%88%B6"><span class="toc-text">3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89starter"><span class="toc-text">å…«ã€è‡ªå®šä¹‰starter</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9ASpringBoot%E6%95%B4%E5%90%88%E7%A4%BA%E4%BE%8B"><span class="toc-text">æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ä¸€ã€-Spring-Boot-å…¥é—¨"><a href="#ä¸€ã€-Spring-Boot-å…¥é—¨" class="headerlink" title="ä¸€ã€**Spring Boot å…¥é—¨"></a>ä¸€ã€**Spring Boot å…¥é—¨</h1><h2 id="1ã€Spring-Boot-ç®€ä»‹"><a href="#1ã€Spring-Boot-ç®€ä»‹" class="headerlink" title="1ã€Spring Boot ç®€ä»‹"></a>1ã€Spring Boot ç®€ä»‹</h2><blockquote>
<p>ç®€åŒ–Springåº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æ¶ï¼›</p>
<p>æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§æ•´åˆï¼›</p>
<p>J2EEå¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼›</p>
</blockquote>
<h2 id="2ã€å¾®æœåŠ¡"><a href="#2ã€å¾®æœåŠ¡" class="headerlink" title="2ã€å¾®æœåŠ¡"></a>2ã€å¾®æœåŠ¡</h2><p>2014ï¼Œmartin fowler</p>
<p>å¾®æœåŠ¡ï¼šæ¶æ„é£æ ¼ï¼ˆæœåŠ¡å¾®åŒ–ï¼‰</p>
<p>ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°å‹æœåŠ¡ï¼›å¯ä»¥é€šè¿‡HTTPçš„æ–¹å¼è¿›è¡Œäº’é€šï¼›</p>
<p>å•ä½“åº”ç”¨ï¼šALL IN ONE</p>
<p>å¾®æœåŠ¡ï¼šæ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒï¼›</p>
<p><a target="_blank" rel="noopener" href="https://martinfowler.com/articles/microservices.html#MicroservicesAndSoa">è¯¦ç»†å‚ç…§å¾®æœåŠ¡æ–‡æ¡£</a></p>
<h2 id="3ã€ç¯å¢ƒå‡†å¤‡"><a href="#3ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3ã€ç¯å¢ƒå‡†å¤‡"></a>3ã€ç¯å¢ƒå‡†å¤‡</h2><p><a target="_blank" rel="noopener" href="http://www.gulixueyuan.com/">http://www.gulixueyuan.com/</a> è°·ç²’å­¦é™¢</p>
<p>ç¯å¢ƒçº¦æŸ</p>
<p>â€“jdk1.8ï¼šSpring Boot æ¨èjdk1.7åŠä»¥ä¸Šï¼›java version â€œ1.8.0_112â€</p>
<p>â€“maven3.xï¼šmaven 3.3ä»¥ä¸Šç‰ˆæœ¬ï¼›Apache Maven 3.3.9</p>
<p>â€“IntelliJIDEA2017ï¼šIntelliJ IDEA 2017.2.2 x64ã€STS</p>
<p>â€“SpringBoot 1.5.9.RELEASEï¼š1.5.9ï¼›</p>
<p>ç»Ÿä¸€ç¯å¢ƒï¼›</p>
<h3 id="1ã€MAVENè®¾ç½®ï¼›"><a href="#1ã€MAVENè®¾ç½®ï¼›" class="headerlink" title="1ã€MAVENè®¾ç½®ï¼›"></a>1ã€MAVENè®¾ç½®ï¼›</h3><p>ç»™maven çš„settings.xmlé…ç½®æ–‡ä»¶çš„profilesæ ‡ç­¾æ·»åŠ </p>
<pre><code class="xml">&lt;profile&gt;
  &lt;id&gt;jdk-1.8&lt;/id&gt;
  &lt;activation&gt;
    &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
    &lt;jdk&gt;1.8&lt;/jdk&gt;
  &lt;/activation&gt;
  &lt;properties&gt;
    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
    &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;
  &lt;/properties&gt;
&lt;/profile&gt;</code></pre>
<h3 id="2ã€IDEAè®¾ç½®"><a href="#2ã€IDEAè®¾ç½®" class="headerlink" title="2ã€IDEAè®¾ç½®"></a>2ã€IDEAè®¾ç½®</h3><p>æ•´åˆmavenè¿›æ¥ï¼›</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180129151045.png" alt="ideaè®¾ç½®"></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180129151112.png" alt="images/"></p>
<h2 id="4ã€Spring-Boot-HelloWorld"><a href="#4ã€Spring-Boot-HelloWorld" class="headerlink" title="4ã€Spring Boot HelloWorld"></a>4ã€Spring Boot HelloWorld</h2><p>ä¸€ä¸ªåŠŸèƒ½ï¼š</p>
<p>æµè§ˆå™¨å‘é€helloè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”Hello Worldå­—ç¬¦ä¸²ï¼›</p>
<h3 id="1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰"><a href="#1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰" class="headerlink" title="1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰"></a>1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰</h3><h3 id="2ã€å¯¼å…¥spring-bootç›¸å…³çš„ä¾èµ–"><a href="#2ã€å¯¼å…¥spring-bootç›¸å…³çš„ä¾èµ–" class="headerlink" title="2ã€å¯¼å…¥spring bootç›¸å…³çš„ä¾èµ–"></a>2ã€å¯¼å…¥spring bootç›¸å…³çš„ä¾èµ–</h3><pre><code class="xml">    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;
    &lt;/parent&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre>
<h3 id="3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring-Bootåº”ç”¨"><a href="#3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring-Bootåº”ç”¨" class="headerlink" title="3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring Bootåº”ç”¨"></a>3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring Bootåº”ç”¨</h3><pre><code class="java">
/**
 *  @SpringBootApplication æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨
 */
@SpringBootApplication
public class HelloWorldMainApplication &#123;

    public static void main(String[] args) &#123;

        // Springåº”ç”¨å¯åŠ¨èµ·æ¥
        SpringApplication.run(HelloWorldMainApplication.class,args);
    &#125;
&#125;</code></pre>
<h3 id="4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service"><a href="#4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service" class="headerlink" title="4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service"></a>4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service</h3><pre><code class="java">@Controller
public class HelloController &#123;

    @ResponseBody
    @RequestMapping(&quot;/hello&quot;)
    public String hello()&#123;
        return &quot;Hello World!&quot;;
    &#125;
&#125;
</code></pre>
<h3 id="5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•"><a href="#5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•" class="headerlink" title="5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•"></a>5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•</h3><h3 id="6ã€ç®€åŒ–éƒ¨ç½²"><a href="#6ã€ç®€åŒ–éƒ¨ç½²" class="headerlink" title="6ã€ç®€åŒ–éƒ¨ç½²"></a>6ã€ç®€åŒ–éƒ¨ç½²</h3><pre><code class="xml"> &lt;!-- è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ…ï¼›--&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;</code></pre>
<p>å°†è¿™ä¸ªåº”ç”¨æ‰“æˆjaråŒ…ï¼Œç›´æ¥ä½¿ç”¨java -jarçš„å‘½ä»¤è¿›è¡Œæ‰§è¡Œï¼›</p>
<h2 id="5ã€Hello-Worldæ¢ç©¶"><a href="#5ã€Hello-Worldæ¢ç©¶" class="headerlink" title="5ã€Hello Worldæ¢ç©¶"></a>5ã€Hello Worldæ¢ç©¶</h2><h3 id="1ã€POMæ–‡ä»¶"><a href="#1ã€POMæ–‡ä»¶" class="headerlink" title="1ã€POMæ–‡ä»¶"></a>1ã€POMæ–‡ä»¶</h3><h4 id="1ã€çˆ¶é¡¹ç›®"><a href="#1ã€çˆ¶é¡¹ç›®" class="headerlink" title="1ã€çˆ¶é¡¹ç›®"></a>1ã€çˆ¶é¡¹ç›®</h4><pre><code class="xml">&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;
&lt;/parent&gt;

ä»–çš„çˆ¶é¡¹ç›®æ˜¯
&lt;parent&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
  &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;
  &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt;
&lt;/parent&gt;
ä»–æ¥çœŸæ­£ç®¡ç†Spring Bootåº”ç”¨é‡Œé¢çš„æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ï¼›
</code></pre>
<p>Spring Bootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼›</p>
<p>ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼›ï¼ˆæ²¡æœ‰åœ¨dependenciesé‡Œé¢ç®¡ç†çš„ä¾èµ–è‡ªç„¶éœ€è¦å£°æ˜ç‰ˆæœ¬å·ï¼‰</p>
<h4 id="2ã€å¯åŠ¨å™¨"><a href="#2ã€å¯åŠ¨å™¨" class="headerlink" title="2ã€å¯åŠ¨å™¨"></a>2ã€å¯åŠ¨å™¨</h4><pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
<p><strong>spring-boot-starter</strong>-==web==ï¼š</p>
<p>â€‹    spring-boot-starterï¼šspring-bootåœºæ™¯å¯åŠ¨å™¨ï¼›å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ï¼›</p>
<p>Spring Bootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„startersï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®é‡Œé¢å¼•å…¥è¿™äº›starterç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨</p>
<h3 id="2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"><a href="#2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»" class="headerlink" title="2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"></a>2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»</h3><pre><code class="java">/**
 *  @SpringBootApplication æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨
 */
@SpringBootApplication
public class HelloWorldMainApplication &#123;

    public static void main(String[] args) &#123;

        // Springåº”ç”¨å¯åŠ¨èµ·æ¥
        SpringApplication.run(HelloWorldMainApplication.class,args);
    &#125;
&#125;
</code></pre>
<p>@<strong>SpringBootApplication</strong>:    Spring Bootåº”ç”¨æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±»ï¼ŒSpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ï¼›</p>
<pre><code class="java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(excludeFilters = &#123;
      @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
      @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)
public @interface SpringBootApplication &#123;</code></pre>
<p>@<strong>SpringBootConfiguration</strong>:Spring Bootçš„é…ç½®ç±»ï¼›</p>
<p>â€‹        æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpring Bootçš„é…ç½®ç±»ï¼›</p>
<p>â€‹        @<strong>Configuration</strong>:é…ç½®ç±»ä¸Šæ¥æ ‡æ³¨è¿™ä¸ªæ³¨è§£ï¼›</p>
<p>â€‹            é…ç½®ç±» â€”â€“  é…ç½®æ–‡ä»¶ï¼›é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼›@Component</p>
<p>@<strong>EnableAutoConfiguration</strong>ï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›</p>
<p>â€‹        ä»¥å‰æˆ‘ä»¬éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼ŒSpring Bootå¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®ï¼›@<strong>EnableAutoConfiguration</strong>å‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›è¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼›</p>
<pre><code class="java">@AutoConfigurationPackage
@Import(EnableAutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration &#123;</code></pre>
<p>â€‹          @<strong>AutoConfigurationPackage</strong>ï¼šè‡ªåŠ¨é…ç½®åŒ…</p>
<p>â€‹        @<strong>Import</strong>(AutoConfigurationPackages.Registrar.class)ï¼š</p>
<p>â€‹        Springçš„åº•å±‚æ³¨è§£@Importï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼›å¯¼å…¥çš„ç»„ä»¶ç”±AutoConfigurationPackages.Registrar.classï¼›</p>
<p>==å°†ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨ï¼›==</p>
<p>â€‹    @<strong>Import</strong>(EnableAutoConfigurationImportSelector.class)ï¼›</p>
<p>â€‹        ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ï¼Ÿ</p>
<p>â€‹        <strong>EnableAutoConfigurationImportSelector</strong>ï¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨ï¼›</p>
<p>â€‹        å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼›è¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›</p>
<p>â€‹        ä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ï¼›        <img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180129224104.png" alt="è‡ªåŠ¨é…ç½®ç±»"></p>
<p>æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</p>
<p>â€‹        SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class,classLoader)ï¼›</p>
<p>==Spring Bootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›==ä»¥å‰æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®çš„ä¸œè¥¿ï¼Œè‡ªåŠ¨é…ç½®ç±»éƒ½å¸®æˆ‘ä»¬ï¼›</p>
<p>J2EEçš„æ•´ä½“æ•´åˆè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨spring-boot-autoconfigure-1.5.9.RELEASE.jarï¼›</p>
<p>â€‹        </p>
<p>==Springæ³¨è§£ç‰ˆï¼ˆè°·ç²’å­¦é™¢ï¼‰==</p>
<h2 id="6ã€ä½¿ç”¨Spring-Initializerå¿«é€Ÿåˆ›å»ºSpring-Booté¡¹ç›®"><a href="#6ã€ä½¿ç”¨Spring-Initializerå¿«é€Ÿåˆ›å»ºSpring-Booté¡¹ç›®" class="headerlink" title="6ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®"></a>6ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®</h2><h3 id="1ã€IDEAï¼šä½¿ç”¨-Spring-Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®"><a href="#1ã€IDEAï¼šä½¿ç”¨-Spring-Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®" class="headerlink" title="1ã€IDEAï¼šä½¿ç”¨ Spring Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®"></a>1ã€IDEAï¼šä½¿ç”¨ Spring Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®</h3><p>IDEéƒ½æ”¯æŒä½¿ç”¨Springçš„é¡¹ç›®åˆ›å»ºå‘å¯¼å¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼›</p>
<p>é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼›å‘å¯¼ä¼šè”ç½‘åˆ›å»ºSpring Booté¡¹ç›®ï¼›</p>
<p>é»˜è®¤ç”Ÿæˆçš„Spring Booté¡¹ç›®ï¼›</p>
<ul>
<li>ä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘</li>
<li>resourcesæ–‡ä»¶å¤¹ä¸­ç›®å½•ç»“æ„<ul>
<li>staticï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼› js css  imagesï¼›</li>
<li>templatesï¼šä¿å­˜æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢ï¼›ï¼ˆSpring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒJSPé¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼ˆfreemarkerã€thymeleafï¼‰ï¼›</li>
<li>application.propertiesï¼šSpring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼›å¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤è®¾ç½®ï¼›</li>
</ul>
</li>
</ul>
<h3 id="2ã€STSä½¿ç”¨-Spring-Starter-Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®"><a href="#2ã€STSä½¿ç”¨-Spring-Starter-Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®" class="headerlink" title="2ã€STSä½¿ç”¨ Spring Starter Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®"></a>2ã€STSä½¿ç”¨ Spring Starter Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®</h3><hr>
<h1 id="äºŒã€é…ç½®æ–‡ä»¶"><a href="#äºŒã€é…ç½®æ–‡ä»¶" class="headerlink" title="äºŒã€é…ç½®æ–‡ä»¶"></a>äºŒã€é…ç½®æ–‡ä»¶</h1><h2 id="1ã€é…ç½®æ–‡ä»¶"><a href="#1ã€é…ç½®æ–‡ä»¶" class="headerlink" title="1ã€é…ç½®æ–‡ä»¶"></a>1ã€é…ç½®æ–‡ä»¶</h2><p>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åæ˜¯å›ºå®šçš„ï¼›</p>
<p>â€¢application.properties</p>
<p>â€¢application.yml</p>
<p>é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼›SpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½ï¼›</p>
<p>YAMLï¼ˆYAML Ainâ€™t Markup Languageï¼‰</p>
<p>â€‹    YAML  A Markup Languageï¼šæ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€</p>
<p>â€‹    YAML   isnâ€™t Markup Languageï¼šä¸æ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€ï¼›</p>
<p>æ ‡è®°è¯­è¨€ï¼š</p>
<p>â€‹    ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼›å¤§å¤šéƒ½ä½¿ç”¨çš„æ˜¯  <strong>xxxx.xml</strong>æ–‡ä»¶ï¼›</p>
<p>â€‹    YAMLï¼š<strong>ä»¥æ•°æ®ä¸ºä¸­å¿ƒ</strong>ï¼Œæ¯”jsonã€xmlç­‰æ›´é€‚åˆåšé…ç½®æ–‡ä»¶ï¼›</p>
<p>â€‹    YAMLï¼šé…ç½®ä¾‹å­</p>
<pre><code class="yaml">server:
  port: 8081</code></pre>
<p>â€‹    XMLï¼š</p>
<pre><code class="xml">&lt;server&gt;
    &lt;port&gt;8081&lt;/port&gt;
&lt;/server&gt;</code></pre>
<h2 id="2ã€YAMLè¯­æ³•ï¼š"><a href="#2ã€YAMLè¯­æ³•ï¼š" class="headerlink" title="2ã€YAMLè¯­æ³•ï¼š"></a>2ã€YAMLè¯­æ³•ï¼š</h2><h3 id="1ã€åŸºæœ¬è¯­æ³•"><a href="#1ã€åŸºæœ¬è¯­æ³•" class="headerlink" title="1ã€åŸºæœ¬è¯­æ³•"></a>1ã€åŸºæœ¬è¯­æ³•</h3><p>k:(ç©ºæ ¼)vï¼šè¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹ï¼ˆç©ºæ ¼å¿…é¡»æœ‰ï¼‰ï¼›</p>
<p>ä»¥<strong>ç©ºæ ¼</strong>çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼›åªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„</p>
<pre><code class="yaml">server:
    port: 8081
    path: /hello</code></pre>
<p>å±æ€§å’Œå€¼ä¹Ÿæ˜¯å¤§å°å†™æ•æ„Ÿï¼›</p>
<h3 id="2ã€å€¼çš„å†™æ³•"><a href="#2ã€å€¼çš„å†™æ³•" class="headerlink" title="2ã€å€¼çš„å†™æ³•"></a>2ã€å€¼çš„å†™æ³•</h3><h4 id="å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰"><a href="#å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰" class="headerlink" title="å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰"></a>å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰</h4><p>â€‹    k: vï¼šå­—é¢ç›´æ¥æ¥å†™ï¼›</p>
<p>â€‹        å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å·ï¼›</p>
<p>â€‹        â€œâ€ï¼šåŒå¼•å·ï¼›ä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€</p>
<p>â€‹                name:   â€œzhangsan \n lisiâ€ï¼šè¾“å‡ºï¼›zhangsan æ¢è¡Œ  lisi</p>
<p>â€‹        â€˜â€™ï¼šå•å¼•å·ï¼›ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®</p>
<p>â€‹                name:   â€˜zhangsan \n lisiâ€™ï¼šè¾“å‡ºï¼›zhangsan \n  lisi</p>
<h4 id="å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š"><a href="#å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š" class="headerlink" title="å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š"></a>å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š</h4><p>â€‹    k: vï¼šåœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»ï¼›æ³¨æ„ç¼©è¿›</p>
<p>â€‹        å¯¹è±¡è¿˜æ˜¯k: vçš„æ–¹å¼</p>
<pre><code class="yaml">friends:
        lastName: zhangsan
        age: 20</code></pre>
<p>è¡Œå†…å†™æ³•ï¼š</p>
<pre><code class="yaml">friends: &#123;lastName: zhangsan,age: 18&#125;</code></pre>
<h4 id="æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š"><a href="#æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š" class="headerlink" title="æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š"></a>æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š</h4><p>ç”¨- å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ </p>
<pre><code class="yaml">pets:
 - cat
 - dog
 - pig</code></pre>
<p>è¡Œå†…å†™æ³•</p>
<pre><code class="yaml">pets: [cat,dog,pig]</code></pre>
<h2 id="3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥"><a href="#3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥" class="headerlink" title="3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥"></a>3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥</h2><p>é…ç½®æ–‡ä»¶</p>
<pre><code class="yaml">person:
    lastName: hello
    age: 18
    boss: false
    birth: 2017/12/12
    maps: &#123;k1: v1,k2: 12&#125;
    lists:
      - lisi
      - zhaoliu
    dog:
      name: å°ç‹—
      age: 12</code></pre>
<p>javaBeanï¼š</p>
<pre><code class="java">/**
 * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­
 * @ConfigurationPropertiesï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼›
 *      prefix = &quot;person&quot;ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„
 *
 * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼›
 *
 */
@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
public class Person &#123;

    private String lastName;
    private Integer age;
    private Boolean boss;
    private Date birth;

    private Map&lt;String,Object&gt; maps;
    private List&lt;Object&gt; lists;
    private Dog dog;
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åç¼–å†™é…ç½®å°±æœ‰æç¤ºäº†</p>
<pre><code class="xml">&lt;!--å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤º--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;</code></pre>
<h4 id="1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç "><a href="#1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç " class="headerlink" title="1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç "></a>1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç </h4><p>è°ƒæ•´</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180130161620.png" alt="ideaé…ç½®ä¹±ç "></p>
<h4 id="2ã€-Valueè·å–å€¼å’Œ-ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ"><a href="#2ã€-Valueè·å–å€¼å’Œ-ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ" class="headerlink" title="2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ"></a>2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ</h4><table>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody><tr>
<td>åŠŸèƒ½</td>
<td>æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</td>
<td>ä¸€ä¸ªä¸ªæŒ‡å®š</td>
</tr>
<tr>
<td>æ¾æ•£ç»‘å®šï¼ˆæ¾æ•£è¯­æ³•ï¼‰</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>SpEL</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>JSR303æ•°æ®æ ¡éªŒ</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>å¤æ‚ç±»å‹å°è£…</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
</tbody></table>
<p>é…ç½®æ–‡ä»¶ymlè¿˜æ˜¯propertiesä»–ä»¬éƒ½èƒ½è·å–åˆ°å€¼ï¼›</p>
<p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦è·å–ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œä½¿ç”¨@Valueï¼›</p>
<p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªjavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨@ConfigurationPropertiesï¼›</p>
<h4 id="3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ"><a href="#3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ" class="headerlink" title="3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ"></a>3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ</h4><pre><code class="java">@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
@Validated
public class Person &#123;

    /**
     * &lt;bean class=&quot;Person&quot;&gt;
     *      &lt;property name=&quot;lastName&quot; value=&quot;å­—é¢é‡/$&#123;key&#125;ä»ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼/#&#123;SpEL&#125;&quot;&gt;&lt;/property&gt;
     * &lt;bean/&gt;
     */

   //lastNameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼
    @Email
    //@Value(&quot;$&#123;person.last-name&#125;&quot;)
    private String lastName;
    //@Value(&quot;#&#123;11*2&#125;&quot;)
    private Integer age;
    //@Value(&quot;true&quot;)
    private Boolean boss;

    private Date birth;
    private Map&lt;String,Object&gt; maps;
    private List&lt;Object&gt; lists;
    private Dog dog;</code></pre>
<h4 id="4ã€-PropertySource-amp-ImportResource-amp-Bean"><a href="#4ã€-PropertySource-amp-ImportResource-amp-Bean" class="headerlink" title="4ã€@PropertySource&amp;@ImportResource&amp;@Bean"></a>4ã€@PropertySource&amp;@ImportResource&amp;@Bean</h4><p>@<strong>PropertySource</strong>ï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼›</p>
<pre><code class="java">/**
 * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­
 * @ConfigurationPropertiesï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼›
 *      prefix = &quot;person&quot;ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„
 *
 * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼›
 *  @ConfigurationProperties(prefix = &quot;person&quot;)é»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ï¼›
 *
 */
@PropertySource(value = &#123;&quot;classpath:person.properties&quot;&#125;)
@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
//@Validated
public class Person &#123;

    /**
     * &lt;bean class=&quot;Person&quot;&gt;
     *      &lt;property name=&quot;lastName&quot; value=&quot;å­—é¢é‡/$&#123;key&#125;ä»ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼/#&#123;SpEL&#125;&quot;&gt;&lt;/property&gt;
     * &lt;bean/&gt;
     */

   //lastNameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼
   // @Email
    //@Value(&quot;$&#123;person.last-name&#125;&quot;)
    private String lastName;
    //@Value(&quot;#&#123;11*2&#125;&quot;)
    private Integer age;
    //@Value(&quot;true&quot;)
    private Boolean boss;
</code></pre>
<p>@<strong>ImportResource</strong>ï¼šå¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆï¼›</p>
<p>Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼›</p>
<p>æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼›@<strong>ImportResource</strong>æ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š</p>
<pre><code class="java">@ImportResource(locations = &#123;&quot;classpath:beans.xml&quot;&#125;)
å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶è®©å…¶ç”Ÿæ•ˆ</code></pre>
<p>ä¸æ¥ç¼–å†™Springçš„é…ç½®æ–‡ä»¶</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;


    &lt;bean id=&quot;helloService&quot; class=&quot;com.atguigu.springboot.service.HelloService&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>SpringBootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼›æ¨èä½¿ç”¨å…¨æ³¨è§£çš„æ–¹å¼</p>
<p>1ã€é…ç½®ç±»**@Configuration**â€”â€”&gt;Springé…ç½®æ–‡ä»¶</p>
<p>2ã€ä½¿ç”¨**@Bean**ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p>
<pre><code class="java">/**
 * @Configurationï¼šæŒ‡æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼›å°±æ˜¯æ¥æ›¿ä»£ä¹‹å‰çš„Springé…ç½®æ–‡ä»¶
 *
 * åœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨&lt;bean&gt;&lt;bean/&gt;æ ‡ç­¾æ·»åŠ ç»„ä»¶
 *
 */
@Configuration
public class MyAppConfig &#123;

    //å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›å®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å
    @Bean
    public HelloService helloService02()&#123;
        System.out.println(&quot;é…ç½®ç±»@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶äº†...&quot;);
        return new HelloService();
    &#125;
&#125;</code></pre>
<p>##4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</p>
<h3 id="1ã€éšæœºæ•°"><a href="#1ã€éšæœºæ•°" class="headerlink" title="1ã€éšæœºæ•°"></a>1ã€éšæœºæ•°</h3><pre><code class="java">$&#123;random.value&#125;ã€$&#123;random.int&#125;ã€$&#123;random.long&#125;
$&#123;random.int(10)&#125;ã€$&#123;random.int[1024,65536]&#125;
</code></pre>
<h3 id="2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨-æŒ‡å®šé»˜è®¤å€¼"><a href="#2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨-æŒ‡å®šé»˜è®¤å€¼" class="headerlink" title="2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼"></a>2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼</h3><pre><code class="properties">person.last-name=å¼ ä¸‰$&#123;random.uuid&#125;
person.age=$&#123;random.int&#125;
person.birth=2017/12/15
person.boss=false
person.maps.k1=v1
person.maps.k2=14
person.lists=a,b,c
person.dog.name=$&#123;person.hello:hello&#125;_dog
person.dog.age=15</code></pre>
<h2 id="5ã€Profile"><a href="#5ã€Profile" class="headerlink" title="5ã€Profile"></a>5ã€Profile</h2><h3 id="1ã€å¤šProfileæ–‡ä»¶"><a href="#1ã€å¤šProfileæ–‡ä»¶" class="headerlink" title="1ã€å¤šProfileæ–‡ä»¶"></a>1ã€å¤šProfileæ–‡ä»¶</h3><p>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯   application-{profile}.properties/yml</p>
<p>é»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½®ï¼›</p>
<h3 id="2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼"><a href="#2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼" class="headerlink" title="2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼"></a>2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼</h3><pre><code class="yml">
server:
  port: 8081
spring:
  profiles:
    active: prod

---
server:
  port: 8083
spring:
  profiles: dev


---

server:
  port: 8084
spring:
  profiles: prod  #æŒ‡å®šå±äºå“ªä¸ªç¯å¢ƒ</code></pre>
<h3 id="3ã€æ¿€æ´»æŒ‡å®šprofile"><a href="#3ã€æ¿€æ´»æŒ‡å®šprofile" class="headerlink" title="3ã€æ¿€æ´»æŒ‡å®šprofile"></a>3ã€æ¿€æ´»æŒ‡å®šprofile</h3><p>â€‹    1ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š  spring.profiles.active=dev</p>
<p>â€‹    2ã€å‘½ä»¤è¡Œï¼š</p>
<p>â€‹        java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar â€“spring.profiles.active=devï¼›</p>
<p>â€‹        å¯ä»¥ç›´æ¥åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œé…ç½®ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°</p>
<p>â€‹    3ã€è™šæ‹Ÿæœºå‚æ•°ï¼›</p>
<p>â€‹        -Dspring.profiles.active=dev</p>
<h2 id="6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"><a href="#6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®" class="headerlink" title="6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"></a>6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h2><p>springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶</p>
<p>â€“file:./config/</p>
<p>â€“file:./</p>
<p>â€“classpath:/config/</p>
<p>â€“classpath:/</p>
<p>ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼›</p>
<p>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›<strong>äº’è¡¥é…ç½®</strong>ï¼›</p>
<p>==æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®==</p>
<p><strong>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„è¿™äº›é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨å½¢æˆäº’è¡¥é…ç½®ï¼›</strong></p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar â€“spring.config.location=G:/application.properties</p>
<h2 id="7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"><a href="#7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº" class="headerlink" title="7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"></a>7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</h2><p><strong>==SpringBootä¹Ÿå¯ä»¥ä»ä»¥ä¸‹ä½ç½®åŠ è½½é…ç½®ï¼› ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼›é«˜ä¼˜å…ˆçº§çš„é…ç½®è¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼Œæ‰€æœ‰çš„é…ç½®ä¼šå½¢æˆäº’è¡¥é…ç½®==</strong></p>
<p><strong>1.å‘½ä»¤è¡Œå‚æ•°</strong></p>
<p>æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè¿›è¡ŒæŒ‡å®š</p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar â€“server.port=8087  â€“server.context-path=/abc</p>
<p>å¤šä¸ªé…ç½®ç”¨ç©ºæ ¼åˆ†å¼€ï¼› â€“é…ç½®é¡¹=å€¼</p>
<p>2.æ¥è‡ªjava:comp/envçš„JNDIå±æ€§</p>
<p>3.Javaç³»ç»Ÿå±æ€§ï¼ˆSystem.getProperties()ï¼‰</p>
<p>4.æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<p>5.RandomValuePropertySourceé…ç½®çš„random.*å±æ€§å€¼</p>
<p>==<strong>ç”±jaråŒ…å¤–å‘jaråŒ…å†…è¿›è¡Œå¯»æ‰¾ï¼›</strong>==</p>
<p>==<strong>ä¼˜å…ˆåŠ è½½å¸¦profile</strong>==</p>
<p><strong>6.jaråŒ…å¤–éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p><strong>7.jaråŒ…å†…éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p>==<strong>å†æ¥åŠ è½½ä¸å¸¦profile</strong>==</p>
<p><strong>8.jaråŒ…å¤–éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p><strong>9.jaråŒ…å†…éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p>10.@Configurationæ³¨è§£ç±»ä¸Šçš„@PropertySource</p>
<p>11.é€šè¿‡SpringApplication.setDefaultPropertiesæŒ‡å®šçš„é»˜è®¤å±æ€§</p>
<p>æ‰€æœ‰æ”¯æŒçš„é…ç½®åŠ è½½æ¥æºï¼›</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#boot-features-external-config">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p>
<h2 id="8ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#8ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="8ã€è‡ªåŠ¨é…ç½®åŸç†"></a>8ã€è‡ªåŠ¨é…ç½®åŸç†</h2><p>é…ç½®æ–‡ä»¶åˆ°åº•èƒ½å†™ä»€ä¹ˆï¼Ÿæ€ä¹ˆå†™ï¼Ÿè‡ªåŠ¨é…ç½®åŸç†ï¼›</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#common-application-properties">é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±æ€§å‚ç…§</a></p>
<h3 id="1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š"><a href="#1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š" class="headerlink" title="1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š"></a>1ã€<strong>è‡ªåŠ¨é…ç½®åŸç†ï¼š</strong></h3><p>1ï¼‰ã€SpringBootå¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½ ==@EnableAutoConfiguration==</p>
<p><strong>2ï¼‰ã€@EnableAutoConfiguration ä½œç”¨ï¼š</strong></p>
<ul>
<li><p> åˆ©ç”¨EnableAutoConfigurationImportSelectorç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶ï¼Ÿ</p>
</li>
<li><p>å¯ä»¥æŸ¥çœ‹selectImports()æ–¹æ³•çš„å†…å®¹ï¼›</p>
</li>
<li><p>List<String> configurations = getCandidateConfigurations(annotationMetadata,      attributes);è·å–å€™é€‰çš„é…ç½®</p>
<ul>
<li><pre><code class="java">SpringFactoriesLoader.loadFactoryNames()
æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹  META-INF/spring.factories
æŠŠæ‰«æåˆ°çš„è¿™äº›æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡
ä»propertiesä¸­è·å–åˆ°EnableAutoConfiguration.classç±»ï¼ˆç±»åï¼‰å¯¹åº”çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åœ¨å®¹å™¨ä¸­
</code></pre>
</li>
</ul>
</li>
</ul>
<p><strong>==å°† ç±»è·¯å¾„ä¸‹  META-INF/spring.factories é‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼åŠ å…¥åˆ°äº†å®¹å™¨ä¸­ï¼›==</strong></p>
<pre><code class="properties"># Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\
org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\
org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\
org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\
org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\
org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\
org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\
org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\
org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\
org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\
org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\
org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\
org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\
org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\
org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\
org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\
org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\
org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\
org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\
org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\
org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\
org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,\
org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\
org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\
org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\
org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\
org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\
org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\
org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\
org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\
org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\
org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\
org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\
org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\
org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\
org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\
org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\
org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\
org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\
org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\
org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\
org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\
org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\
org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration</code></pre>
<p>æ¯ä¸€ä¸ªè¿™æ ·çš„  xxxAutoConfigurationç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼›ç”¨ä»–ä»¬æ¥åšè‡ªåŠ¨é…ç½®ï¼›</p>
<p>3ï¼‰ã€æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›</p>
<p>4ï¼‰ã€ä»¥<strong>HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰</strong>ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ï¼›</p>
<pre><code class="java">@Configuration   //è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶
@EnableConfigurationProperties(HttpEncodingProperties.class)  //å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›å°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpEncodingPropertiesç»‘å®šèµ·æ¥ï¼›å¹¶æŠŠHttpEncodingPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­

@ConditionalOnWebApplication //Springåº•å±‚@Conditionalæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆï¼‰ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›    åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ

@ConditionalOnClass(CharacterEncodingFilter.class)  //åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›

@ConditionalOnProperty(prefix = &quot;spring.http.encoding&quot;, value = &quot;enabled&quot;, matchIfMissing = true)  //åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®  spring.http.encoding.enabledï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„
//å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®pring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼›
public class HttpEncodingAutoConfiguration &#123;

      //ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†
      private final HttpEncodingProperties properties;

   //åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿
      public HttpEncodingAutoConfiguration(HttpEncodingProperties properties) &#123;
        this.properties = properties;
    &#125;

    @Bean   //ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–
    @ConditionalOnMissingBean(CharacterEncodingFilter.class) //åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ
    public CharacterEncodingFilter characterEncodingFilter() &#123;
        CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter();
        filter.setEncoding(this.properties.getCharset().name());
        filter.setForceRequestEncoding(this.properties.shouldForce(Type.REQUEST));
        filter.setForceResponseEncoding(this.properties.shouldForce(Type.RESPONSE));
        return filter;
    &#125;</code></pre>
<p>æ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ</p>
<p>ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼›</p>
<p>5ï¼‰ã€æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…è€…â€˜ï¼›é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</p>
<pre><code class="java">@ConfigurationProperties(prefix = &quot;spring.http.encoding&quot;)  //ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š
public class HttpEncodingProperties &#123;

   public static final Charset DEFAULT_CHARSET = Charset.forName(&quot;UTF-8&quot;);</code></pre>
<p><strong>ç²¾é«“ï¼š</strong></p>
<p>â€‹    <strong>1ï¼‰ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</strong></p>
<p>â€‹    <strong>2ï¼‰ã€æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»ï¼›</strong></p>
<p>â€‹    <strong>3ï¼‰ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®äº†ï¼‰</strong></p>
<p>â€‹    <strong>4ï¼‰ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼ï¼›</strong></p>
<p>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›</p>
<p>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p>
<p>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</p>
<h3 id="2ã€ç»†èŠ‚"><a href="#2ã€ç»†èŠ‚" class="headerlink" title="2ã€ç»†èŠ‚"></a>2ã€ç»†èŠ‚</h3><h4 id="1ã€-Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„-Conditionalä½œç”¨ï¼‰"><a href="#1ã€-Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„-Conditionalä½œç”¨ï¼‰" class="headerlink" title="1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰"></a>1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</h4><p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é…é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼›</p>
<table>
<thead>
<tr>
<th>@Conditionalæ‰©å±•æ³¨è§£</th>
<th>ä½œç”¨ï¼ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰æŒ‡å®šæ¡ä»¶ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>@ConditionalOnJava</td>
<td>ç³»ç»Ÿçš„javaç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šBeanï¼›</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanï¼›</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>æ»¡è¶³SpELè¡¨è¾¾å¼æŒ‡å®š</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>ç³»ç»Ÿä¸­æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>ç³»ç»Ÿä¸­æ²¡æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªæŒ‡å®šçš„Beanï¼Œæˆ–è€…è¿™ä¸ªBeanæ˜¯é¦–é€‰Bean</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>å½“å‰æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>å½“å‰ä¸æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDIå­˜åœ¨æŒ‡å®šé¡¹</td>
</tr>
</tbody></table>
<p><strong>è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</p>
<p>**==æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨  debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Š==**ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</p>
<pre><code class="java">=========================
AUTO-CONFIGURATION REPORT
=========================


Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼‰
-----------------

   DispatcherServletAutoConfiguration matched:
      - @ConditionalOnClass found required class &#39;org.springframework.web.servlet.DispatcherServlet&#39;; @ConditionalOnMissingClass did not find unwanted class (OnClassCondition)
      - @ConditionalOnWebApplication (required) found StandardServletEnvironment (OnWebApplicationCondition)


Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼‰
-----------------

   ActiveMQAutoConfiguration:
      Did not match:
         - @ConditionalOnClass did not find required classes &#39;javax.jms.ConnectionFactory&#39;, &#39;org.apache.activemq.ActiveMQConnectionFactory&#39; (OnClassCondition)

   AopAutoConfiguration:
      Did not match:
         - @ConditionalOnClass did not find required classes &#39;org.aspectj.lang.annotation.Aspect&#39;, &#39;org.aspectj.lang.reflect.Advice&#39; (OnClassCondition)
</code></pre>
<h1 id="ä¸‰ã€æ—¥å¿—"><a href="#ä¸‰ã€æ—¥å¿—" class="headerlink" title="ä¸‰ã€æ—¥å¿—"></a>ä¸‰ã€æ—¥å¿—</h1><h2 id="1ã€æ—¥å¿—æ¡†æ¶"><a href="#1ã€æ—¥å¿—æ¡†æ¶" class="headerlink" title="1ã€æ—¥å¿—æ¡†æ¶"></a>1ã€æ—¥å¿—æ¡†æ¶</h2><p> å°å¼ ï¼›å¼€å‘ä¸€ä¸ªå¤§å‹ç³»ç»Ÿï¼›</p>
<p>â€‹        1ã€System.out.println(â€œâ€)ï¼›å°†å…³é”®æ•°æ®æ‰“å°åœ¨æ§åˆ¶å°ï¼›å»æ‰ï¼Ÿå†™åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Ÿ</p>
<p>â€‹        2ã€æ¡†æ¶æ¥è®°å½•ç³»ç»Ÿçš„ä¸€äº›è¿è¡Œæ—¶ä¿¡æ¯ï¼›æ—¥å¿—æ¡†æ¶ ï¼›  zhanglogging.jarï¼›</p>
<p>â€‹        3ã€é«˜å¤§ä¸Šçš„å‡ ä¸ªåŠŸèƒ½ï¼Ÿå¼‚æ­¥æ¨¡å¼ï¼Ÿè‡ªåŠ¨å½’æ¡£ï¼Ÿxxxxï¼Ÿ  zhanglogging-good.jarï¼Ÿ</p>
<p>â€‹        4ã€å°†ä»¥å‰æ¡†æ¶å¸ä¸‹æ¥ï¼Ÿæ¢ä¸Šæ–°çš„æ¡†æ¶ï¼Œé‡æ–°ä¿®æ”¹ä¹‹å‰ç›¸å…³çš„APIï¼›zhanglogging-prefect.jarï¼›</p>
<p>â€‹        5ã€JDBCâ€”æ•°æ®åº“é©±åŠ¨ï¼›</p>
<p>â€‹            å†™äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£å±‚ï¼›æ—¥å¿—é—¨é¢ï¼ˆæ—¥å¿—çš„ä¸€ä¸ªæŠ½è±¡å±‚ï¼‰ï¼›logging-abstract.jarï¼›</p>
<p>â€‹            ç»™é¡¹ç›®ä¸­å¯¼å…¥å…·ä½“çš„æ—¥å¿—å®ç°å°±è¡Œäº†ï¼›æˆ‘ä»¬ä¹‹å‰çš„æ—¥å¿—æ¡†æ¶éƒ½æ˜¯å®ç°çš„æŠ½è±¡å±‚ï¼›</p>
<p><strong>å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶ï¼›</strong></p>
<p>JULã€JCLã€Jboss-loggingã€logbackã€log4jã€log4j2ã€slf4jâ€¦.</p>
<table>
<thead>
<tr>
<th>æ—¥å¿—é—¨é¢  ï¼ˆæ—¥å¿—çš„æŠ½è±¡å±‚ï¼‰</th>
<th>æ—¥å¿—å®ç°</th>
</tr>
</thead>
<tbody><tr>
<td><del>JCLï¼ˆJakarta  Commons Loggingï¼‰</del>    SLF4jï¼ˆSimple  Logging Facade for Javaï¼‰    <strong><del>jboss-logging</del></strong></td>
<td>Log4j  JULï¼ˆjava.util.loggingï¼‰  Log4j2  <strong>Logback</strong></td>
</tr>
</tbody></table>
<p>å·¦è¾¹é€‰ä¸€ä¸ªé—¨é¢ï¼ˆæŠ½è±¡å±‚ï¼‰ã€å³è¾¹æ¥é€‰ä¸€ä¸ªå®ç°ï¼›</p>
<p>æ—¥å¿—é—¨é¢ï¼š  SLF4Jï¼›</p>
<p>æ—¥å¿—å®ç°ï¼šLogbackï¼›</p>
<p>SpringBootï¼šåº•å±‚æ˜¯Springæ¡†æ¶ï¼ŒSpringæ¡†æ¶é»˜è®¤æ˜¯ç”¨JCLï¼›â€˜</p>
<p>â€‹    <strong>==SpringBooté€‰ç”¨ SLF4jå’Œlogbackï¼›==</strong></p>
<h2 id="2ã€SLF4jä½¿ç”¨"><a href="#2ã€SLF4jä½¿ç”¨" class="headerlink" title="2ã€SLF4jä½¿ç”¨"></a>2ã€SLF4jä½¿ç”¨</h2><h3 id="1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j-https-www-slf4j-org"><a href="#1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j-https-www-slf4j-org" class="headerlink" title="1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j   https://www.slf4j.org"></a>1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j   <a target="_blank" rel="noopener" href="https://www.slf4j.org/">https://www.slf4j.org</a></h3><p>ä»¥åå¼€å‘çš„æ—¶å€™ï¼Œæ—¥å¿—è®°å½•æ–¹æ³•çš„è°ƒç”¨ï¼Œä¸åº”è¯¥æ¥ç›´æ¥è°ƒç”¨æ—¥å¿—çš„å®ç°ç±»ï¼Œè€Œæ˜¯è°ƒç”¨æ—¥å¿—æŠ½è±¡å±‚é‡Œé¢çš„æ–¹æ³•ï¼›</p>
<p>ç»™ç³»ç»Ÿé‡Œé¢å¯¼å…¥slf4jçš„jarå’Œ  logbackçš„å®ç°jar</p>
<pre><code class="java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HelloWorld &#123;
  public static void main(String[] args) &#123;
    Logger logger = LoggerFactory.getLogger(HelloWorld.class);
    logger.info(&quot;Hello World&quot;);
  &#125;
&#125;</code></pre>
<p>å›¾ç¤ºï¼›</p>
<p><img src="images/concrete-bindings.png" alt="images/concrete-bindings.png"></p>
<p>æ¯ä¸€ä¸ªæ—¥å¿—çš„å®ç°æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨slf4jä»¥åï¼Œ<strong>é…ç½®æ–‡ä»¶è¿˜æ˜¯åšæˆæ—¥å¿—å®ç°æ¡†æ¶è‡ªå·±æœ¬èº«çš„é…ç½®æ–‡ä»¶ï¼›</strong></p>
<h3 id="2ã€é—ç•™é—®é¢˜"><a href="#2ã€é—ç•™é—®é¢˜" class="headerlink" title="2ã€é—ç•™é—®é¢˜"></a>2ã€é—ç•™é—®é¢˜</h3><p>aï¼ˆslf4j+logbackï¼‰: Springï¼ˆcommons-loggingï¼‰ã€Hibernateï¼ˆjboss-loggingï¼‰ã€MyBatisã€xxxx</p>
<p>ç»Ÿä¸€æ—¥å¿—è®°å½•ï¼Œå³ä½¿æ˜¯åˆ«çš„æ¡†æ¶å’Œæˆ‘ä¸€èµ·ç»Ÿä¸€ä½¿ç”¨slf4jè¿›è¡Œè¾“å‡ºï¼Ÿ</p>
<p><img src="images/legacy.png"></p>
<p><strong>å¦‚ä½•è®©ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¥å¿—éƒ½ç»Ÿä¸€åˆ°slf4jï¼›</strong></p>
<p>==1ã€å°†ç³»ç»Ÿä¸­å…¶ä»–æ—¥å¿—æ¡†æ¶å…ˆæ’é™¤å‡ºå»ï¼›==</p>
<p>==2ã€ç”¨ä¸­é—´åŒ…æ¥æ›¿æ¢åŸæœ‰çš„æ—¥å¿—æ¡†æ¶ï¼›==</p>
<p>==3ã€æˆ‘ä»¬å¯¼å…¥slf4jå…¶ä»–çš„å®ç°==</p>
<h2 id="3ã€SpringBootæ—¥å¿—å…³ç³»"><a href="#3ã€SpringBootæ—¥å¿—å…³ç³»" class="headerlink" title="3ã€SpringBootæ—¥å¿—å…³ç³»"></a>3ã€SpringBootæ—¥å¿—å…³ç³»</h2><pre><code class="xml">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre>
<p>SpringBootä½¿ç”¨å®ƒæ¥åšæ—¥å¿—åŠŸèƒ½ï¼›</p>
<pre><code class="xml">    &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre>
<p>åº•å±‚ä¾èµ–å…³ç³»</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180131220946.png"></p>
<p>æ€»ç»“ï¼š</p>
<p>â€‹    1ï¼‰ã€SpringBootåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è¿›è¡Œæ—¥å¿—è®°å½•</p>
<p>â€‹    2ï¼‰ã€SpringBootä¹ŸæŠŠå…¶ä»–çš„æ—¥å¿—éƒ½æ›¿æ¢æˆäº†slf4jï¼›</p>
<p>â€‹    3ï¼‰ã€ä¸­é—´æ›¿æ¢åŒ…ï¼Ÿ</p>
<pre><code class="java">@SuppressWarnings(&quot;rawtypes&quot;)
public abstract class LogFactory &#123;

    static String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = &quot;http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j&quot;;

    static LogFactory logFactory = new SLF4JLogFactory();</code></pre>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180131221411.png"></p>
<p>â€‹    4ï¼‰ã€å¦‚æœæˆ‘ä»¬è¦å¼•å…¥å…¶ä»–æ¡†æ¶ï¼Ÿä¸€å®šè¦æŠŠè¿™ä¸ªæ¡†æ¶çš„é»˜è®¤æ—¥å¿—ä¾èµ–ç§»é™¤æ‰ï¼Ÿ</p>
<p>â€‹            Springæ¡†æ¶ç”¨çš„æ˜¯commons-loggingï¼›</p>
<pre><code class="xml">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;
                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;</code></pre>
<p><strong>==SpringBootèƒ½è‡ªåŠ¨é€‚é…æ‰€æœ‰çš„æ—¥å¿—ï¼Œè€Œä¸”åº•å±‚ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è®°å½•æ—¥å¿—ï¼Œå¼•å…¥å…¶ä»–æ¡†æ¶çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªæ¡†æ¶ä¾èµ–çš„æ—¥å¿—æ¡†æ¶æ’é™¤æ‰å³å¯ï¼›==</strong></p>
<h2 id="4ã€æ—¥å¿—ä½¿ç”¨ï¼›"><a href="#4ã€æ—¥å¿—ä½¿ç”¨ï¼›" class="headerlink" title="4ã€æ—¥å¿—ä½¿ç”¨ï¼›"></a>4ã€æ—¥å¿—ä½¿ç”¨ï¼›</h2><h3 id="1ã€é»˜è®¤é…ç½®"><a href="#1ã€é»˜è®¤é…ç½®" class="headerlink" title="1ã€é»˜è®¤é…ç½®"></a>1ã€é»˜è®¤é…ç½®</h3><p>SpringBooté»˜è®¤å¸®æˆ‘ä»¬é…ç½®å¥½äº†æ—¥å¿—ï¼›</p>
<pre><code class="java">    //è®°å½•å™¨
    Logger logger = LoggerFactory.getLogger(getClass());
    @Test
    public void contextLoads() &#123;
        //System.out.println();

        //æ—¥å¿—çš„çº§åˆ«ï¼›
        //ç”±ä½åˆ°é«˜   trace&lt;debug&lt;info&lt;warn&lt;error
        //å¯ä»¥è°ƒæ•´è¾“å‡ºçš„æ—¥å¿—çº§åˆ«ï¼›æ—¥å¿—å°±åªä¼šåœ¨è¿™ä¸ªçº§åˆ«ä»¥ä»¥åçš„é«˜çº§åˆ«ç”Ÿæ•ˆ
        logger.trace(&quot;è¿™æ˜¯traceæ—¥å¿—...&quot;);
        logger.debug(&quot;è¿™æ˜¯debugæ—¥å¿—...&quot;);
        //SpringBooté»˜è®¤ç»™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯infoçº§åˆ«çš„ï¼Œæ²¡æœ‰æŒ‡å®šçº§åˆ«çš„å°±ç”¨SpringBooté»˜è®¤è§„å®šçš„çº§åˆ«ï¼›rootçº§åˆ«
        logger.info(&quot;è¿™æ˜¯infoæ—¥å¿—...&quot;);
        logger.warn(&quot;è¿™æ˜¯warnæ—¥å¿—...&quot;);
        logger.error(&quot;è¿™æ˜¯erroræ—¥å¿—...&quot;);


    &#125;</code></pre>
<pre><code>    æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š
        %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ
        %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ
        %-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦
        %logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ 
        %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ
        %næ˜¯æ¢è¡Œç¬¦
    --&gt;
    %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</code></pre>
<p>SpringBootä¿®æ”¹æ—¥å¿—çš„é»˜è®¤é…ç½®</p>
<pre><code class="properties">logging.level.com.atguigu=trace


#logging.path=
# ä¸æŒ‡å®šè·¯å¾„åœ¨å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆspringboot.logæ—¥å¿—
# å¯ä»¥æŒ‡å®šå®Œæ•´çš„è·¯å¾„ï¼›
#logging.file=G:/springboot.log

# åœ¨å½“å‰ç£ç›˜çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºspringæ–‡ä»¶å¤¹å’Œé‡Œé¢çš„logæ–‡ä»¶å¤¹ï¼›ä½¿ç”¨Â spring.log ä½œä¸ºé»˜è®¤æ–‡ä»¶
logging.path=/spring/log

#  åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼
logging.pattern.console=%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n
# æŒ‡å®šæ–‡ä»¶ä¸­æ—¥å¿—è¾“å‡ºçš„æ ¼å¼
logging.pattern.file=%d&#123;yyyy-MM-dd&#125; === [%thread] === %-5level === %logger&#123;50&#125; ==== %msg%n</code></pre>
<table>
<thead>
<tr>
<th>logging.file</th>
<th>logging.path</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>(none)</td>
<td>(none)</td>
<td></td>
<td>åªåœ¨æ§åˆ¶å°è¾“å‡º</td>
</tr>
<tr>
<td>æŒ‡å®šæ–‡ä»¶å</td>
<td>(none)</td>
<td>my.log</td>
<td>è¾“å‡ºæ—¥å¿—åˆ°my.logæ–‡ä»¶</td>
</tr>
<tr>
<td>(none)</td>
<td>æŒ‡å®šç›®å½•</td>
<td>/var/log</td>
<td>è¾“å‡ºåˆ°æŒ‡å®šç›®å½•çš„ spring.log æ–‡ä»¶ä¸­</td>
</tr>
</tbody></table>
<h3 id="2ã€æŒ‡å®šé…ç½®"><a href="#2ã€æŒ‡å®šé…ç½®" class="headerlink" title="2ã€æŒ‡å®šé…ç½®"></a>2ã€æŒ‡å®šé…ç½®</h3><p>ç»™ç±»è·¯å¾„ä¸‹æ”¾ä¸Šæ¯ä¸ªæ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶å³å¯ï¼›SpringBootå°±ä¸ä½¿ç”¨ä»–é»˜è®¤é…ç½®çš„äº†</p>
<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody><tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody></table>
<p>logback.xmlï¼šç›´æ¥å°±è¢«æ—¥å¿—æ¡†æ¶è¯†åˆ«äº†ï¼›</p>
<p><strong>logback-spring.xml</strong>ï¼šæ—¥å¿—æ¡†æ¶å°±ä¸ç›´æ¥åŠ è½½æ—¥å¿—çš„é…ç½®é¡¹ï¼Œç”±SpringBootè§£ææ—¥å¿—é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨SpringBootçš„é«˜çº§ProfileåŠŸèƒ½</p>
<pre><code class="xml">&lt;springProfile name=&quot;staging&quot;&gt;
    &lt;!-- configuration to be enabled when the &quot;staging&quot; profile is active --&gt;
      å¯ä»¥æŒ‡å®šæŸæ®µé…ç½®åªåœ¨æŸä¸ªç¯å¢ƒä¸‹ç”Ÿæ•ˆ
&lt;/springProfile&gt;
</code></pre>
<p>å¦‚ï¼š</p>
<pre><code class="xml">&lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;!--
        æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š
            %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ
            %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ
            %-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦
            %logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ 
            %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ
            %næ˜¯æ¢è¡Œç¬¦
        --&gt;
        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
            &lt;springProfile name=&quot;dev&quot;&gt;
                &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ----&gt; [%thread] ---&gt; %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt;
            &lt;/springProfile&gt;
            &lt;springProfile name=&quot;!dev&quot;&gt;
                &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ==== [%thread] ==== %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt;
            &lt;/springProfile&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;</code></pre>
<p>å¦‚æœä½¿ç”¨logback.xmlä½œä¸ºæ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œè¿˜è¦ä½¿ç”¨profileåŠŸèƒ½ï¼Œä¼šæœ‰ä»¥ä¸‹é”™è¯¯</p>
<p> <code>no applicable action for [springProfile]</code></p>
<h2 id="5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶"><a href="#5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶" class="headerlink" title="5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶"></a>5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶</h2><p>å¯ä»¥æŒ‰ç…§slf4jçš„æ—¥å¿—é€‚é…å›¾ï¼Œè¿›è¡Œç›¸å…³çš„åˆ‡æ¢ï¼›</p>
<p>slf4j+log4jçš„æ–¹å¼ï¼›</p>
<pre><code class="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
    &lt;/exclusion&gt;
    &lt;exclusion&gt;
      &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>åˆ‡æ¢ä¸ºlog4j2</p>
<pre><code class="xml">   &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
<hr>
<h1 id="å››ã€Webå¼€å‘"><a href="#å››ã€Webå¼€å‘" class="headerlink" title="å››ã€Webå¼€å‘"></a>å››ã€Webå¼€å‘</h1><h2 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><p>ä½¿ç”¨SpringBootï¼›</p>
<p><strong>1ï¼‰ã€åˆ›å»ºSpringBootåº”ç”¨ï¼Œé€‰ä¸­æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼›</strong></p>
<p><strong>2ï¼‰ã€SpringBootå·²ç»é»˜è®¤å°†è¿™äº›åœºæ™¯é…ç½®å¥½äº†ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå°‘é‡é…ç½®å°±å¯ä»¥è¿è¡Œèµ·æ¥</strong></p>
<p><strong>3ï¼‰ã€è‡ªå·±ç¼–å†™ä¸šåŠ¡ä»£ç ï¼›</strong></p>
<p><strong>è‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ</strong></p>
<p>è¿™ä¸ªåœºæ™¯SpringBootå¸®æˆ‘ä»¬é…ç½®äº†ä»€ä¹ˆï¼Ÿèƒ½ä¸èƒ½ä¿®æ”¹ï¼Ÿèƒ½ä¿®æ”¹å“ªäº›é…ç½®ï¼Ÿèƒ½ä¸èƒ½æ‰©å±•ï¼Ÿxxx</p>
<pre><code>xxxxAutoConfigurationï¼šå¸®æˆ‘ä»¬ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶ï¼›
xxxxProperties:é…ç½®ç±»æ¥å°è£…é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼›
</code></pre>
<h2 id="2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›"><a href="#2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›" class="headerlink" title="2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›"></a>2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›</h2><pre><code class="java">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)
public class ResourceProperties implements ResourceLoaderAware &#123;
  //å¯ä»¥è®¾ç½®å’Œé™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼Œç¼“å­˜æ—¶é—´ç­‰</code></pre>
<pre><code class="java">    WebMvcAuotConfigurationï¼š
        @Override
        public void addResourceHandlers(ResourceHandlerRegistry registry) &#123;
            if (!this.resourceProperties.isAddMappings()) &#123;
                logger.debug(&quot;Default resource handling disabled&quot;);
                return;
            &#125;
            Integer cachePeriod = this.resourceProperties.getCachePeriod();
            if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) &#123;
                customizeResourceHandlerRegistration(
                        registry.addResourceHandler(&quot;/webjars/**&quot;)
                                .addResourceLocations(
                                        &quot;classpath:/META-INF/resources/webjars/&quot;)
                        .setCachePeriod(cachePeriod));
            &#125;
            String staticPathPattern = this.mvcProperties.getStaticPathPattern();
              //é™æ€èµ„æºæ–‡ä»¶å¤¹æ˜ å°„
            if (!registry.hasMappingForPattern(staticPathPattern)) &#123;
                customizeResourceHandlerRegistration(
                        registry.addResourceHandler(staticPathPattern)
                                .addResourceLocations(
                                        this.resourceProperties.getStaticLocations())
                        .setCachePeriod(cachePeriod));
            &#125;
        &#125;

        //é…ç½®æ¬¢è¿é¡µæ˜ å°„
        @Bean
        public WelcomePageHandlerMapping welcomePageHandlerMapping(
                ResourceProperties resourceProperties) &#123;
            return new WelcomePageHandlerMapping(resourceProperties.getWelcomePage(),
                    this.mvcProperties.getStaticPathPattern());
        &#125;

       //é…ç½®å–œæ¬¢çš„å›¾æ ‡
        @Configuration
        @ConditionalOnProperty(value = &quot;spring.mvc.favicon.enabled&quot;, matchIfMissing = true)
        public static class FaviconConfiguration &#123;

            private final ResourceProperties resourceProperties;

            public FaviconConfiguration(ResourceProperties resourceProperties) &#123;
                this.resourceProperties = resourceProperties;
            &#125;

            @Bean
            public SimpleUrlHandlerMapping faviconHandlerMapping() &#123;
                SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping();
                mapping.setOrder(Ordered.HIGHEST_PRECEDENCE + 1);
                  //æ‰€æœ‰  **/favicon.ico 
                mapping.setUrlMap(Collections.singletonMap(&quot;**/favicon.ico&quot;,
                        faviconRequestHandler()));
                return mapping;
            &#125;

            @Bean
            public ResourceHttpRequestHandler faviconRequestHandler() &#123;
                ResourceHttpRequestHandler requestHandler = new ResourceHttpRequestHandler();
                requestHandler
                        .setLocations(this.resourceProperties.getFaviconLocations());
                return requestHandler;
            &#125;

        &#125;
</code></pre>
<p>==1ï¼‰ã€æ‰€æœ‰ /webjars/** ï¼Œéƒ½å» classpath:/META-INF/resources/webjars/ æ‰¾èµ„æºï¼›==</p>
<p>â€‹    webjarsï¼šä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥é™æ€èµ„æºï¼›</p>
<p><a target="_blank" rel="noopener" href="http://www.webjars.org/">http://www.webjars.org/</a></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180203181751.png"></p>
<p>localhost:8080/webjars/jquery/3.3.1/jquery.js</p>
<pre><code class="xml">&lt;!--å¼•å…¥jquery-webjar--&gt;åœ¨è®¿é—®çš„æ—¶å€™åªéœ€è¦å†™webjarsä¸‹é¢èµ„æºçš„åç§°å³å¯
        &lt;dependency&gt;
            &lt;groupId&gt;org.webjars&lt;/groupId&gt;
            &lt;artifactId&gt;jquery&lt;/artifactId&gt;
            &lt;version&gt;3.3.1&lt;/version&gt;
        &lt;/dependency&gt;</code></pre>
<p>==2ï¼‰ã€â€/**â€ è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼Œéƒ½å»ï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰æ‰¾æ˜ å°„==</p>
<pre><code>&quot;classpath:/META-INF/resources/&quot;, 
&quot;classpath:/resources/&quot;,
&quot;classpath:/static/&quot;, 
&quot;classpath:/public/&quot; 
&quot;/&quot;ï¼šå½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„</code></pre>
<p>localhost:8080/abc ===  å»é™æ€èµ„æºæ–‡ä»¶å¤¹é‡Œé¢æ‰¾abc</p>
<p>==3ï¼‰ã€æ¬¢è¿é¡µï¼› é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰index.htmlé¡µé¢ï¼›è¢«â€/**â€æ˜ å°„ï¼›==</p>
<p>â€‹    localhost:8080/   æ‰¾indexé¡µé¢</p>
<p>==4ï¼‰ã€æ‰€æœ‰çš„ **/favicon.ico  éƒ½æ˜¯åœ¨é™æ€èµ„æºæ–‡ä»¶ä¸‹æ‰¾ï¼›==</p>
<h2 id="3ã€æ¨¡æ¿å¼•æ“"><a href="#3ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="3ã€æ¨¡æ¿å¼•æ“"></a>3ã€æ¨¡æ¿å¼•æ“</h2><p>JSPã€Velocityã€Freemarkerã€Thymeleaf</p>
<p><img src="images/template-engine.png"></p>
<p>SpringBootæ¨èçš„Thymeleafï¼›</p>
<p>è¯­æ³•æ›´ç®€å•ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼›</p>
<h3 id="1ã€å¼•å…¥thymeleafï¼›"><a href="#1ã€å¼•å…¥thymeleafï¼›" class="headerlink" title="1ã€å¼•å…¥thymeleafï¼›"></a>1ã€å¼•å…¥thymeleafï¼›</h3><pre><code class="xml">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
              2.1.6
        &lt;/dependency&gt;
åˆ‡æ¢thymeleafç‰ˆæœ¬
&lt;properties&gt;
        &lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt;
        &lt;!-- å¸ƒå±€åŠŸèƒ½çš„æ”¯æŒç¨‹åº  thymeleaf3ä¸»ç¨‹åº  layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt;
        &lt;!-- thymeleaf2   layout1--&gt;
        &lt;thymeleaf-layout-dialect.version&gt;2.2.2&lt;/thymeleaf-layout-dialect.version&gt;
  &lt;/properties&gt;</code></pre>
<h3 id="2ã€Thymeleafä½¿ç”¨"><a href="#2ã€Thymeleafä½¿ç”¨" class="headerlink" title="2ã€Thymeleafä½¿ç”¨"></a>2ã€Thymeleafä½¿ç”¨</h3><pre><code class="java">@ConfigurationProperties(prefix = &quot;spring.thymeleaf&quot;)
public class ThymeleafProperties &#123;

    private static final Charset DEFAULT_ENCODING = Charset.forName(&quot;UTF-8&quot;);

    private static final MimeType DEFAULT_CONTENT_TYPE = MimeType.valueOf(&quot;text/html&quot;);

    public static final String DEFAULT_PREFIX = &quot;classpath:/templates/&quot;;

    public static final String DEFAULT_SUFFIX = &quot;.html&quot;;
      //</code></pre>
<p>åªè¦æˆ‘ä»¬æŠŠHTMLé¡µé¢æ”¾åœ¨classpath:/templates/ï¼Œthymeleafå°±èƒ½è‡ªåŠ¨æ¸²æŸ“ï¼›</p>
<p>ä½¿ç”¨ï¼š</p>
<p>1ã€å¯¼å…¥thymeleafçš„åç§°ç©ºé—´</p>
<pre><code class="xml">&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</code></pre>
<p>2ã€ä½¿ç”¨thymeleafè¯­æ³•ï¼›</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;æˆåŠŸï¼&lt;/h1&gt;
    &lt;!--th:text å°†divé‡Œé¢çš„æ–‡æœ¬å†…å®¹è®¾ç½®ä¸º --&gt;
    &lt;div th:text=&quot;$&#123;hello&#125;&quot;&gt;è¿™æ˜¯æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="3ã€è¯­æ³•è§„åˆ™"><a href="#3ã€è¯­æ³•è§„åˆ™" class="headerlink" title="3ã€è¯­æ³•è§„åˆ™"></a>3ã€è¯­æ³•è§„åˆ™</h3><p>1ï¼‰ã€th:textï¼›æ”¹å˜å½“å‰å…ƒç´ é‡Œé¢çš„æ–‡æœ¬å†…å®¹ï¼›</p>
<p>â€‹    thï¼šä»»æ„htmlå±æ€§ï¼›æ¥æ›¿æ¢åŸç”Ÿå±æ€§çš„å€¼</p>
<p><img src="images/2018-02-04_123955.png"></p>
<p>2ï¼‰ã€è¡¨è¾¾å¼ï¼Ÿ</p>
<pre><code class="properties">Simple expressions:ï¼ˆè¡¨è¾¾å¼è¯­æ³•ï¼‰
    Variable Expressions: $&#123;...&#125;ï¼šè·å–å˜é‡å€¼ï¼›OGNLï¼›
            1ï¼‰ã€è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³•
            2ï¼‰ã€ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡ï¼š
                #ctx : the context object.
                #vars: the context variables.
                #locale : the context locale.
                #request : (only in Web Contexts) the HttpServletRequest object.
                #response : (only in Web Contexts) the HttpServletResponse object.
                #session : (only in Web Contexts) the HttpSession object.
                #servletContext : (only in Web Contexts) the ServletContext object.

                $&#123;session.foo&#125;
            3ï¼‰ã€å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡ï¼š
#execInfo : information about the template being processed.
#messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #&#123;â€¦&#125; syntax.
#uris : methods for escaping parts of URLs/URIs
#conversions : methods for executing the configured conversion service (if any).
#dates : methods for java.util.Date objects: formatting, component extraction, etc.
#calendars : analogous to #dates , but for java.util.Calendar objects.
#numbers : methods for formatting numeric objects.
#strings : methods for String objects: contains, startsWith, prepending/appending, etc.
#objects : methods for objects in general.
#bools : methods for boolean evaluation.
#arrays : methods for arrays.
#lists : methods for lists.
#sets : methods for sets.
#maps : methods for maps.
#aggregates : methods for creating aggregates on arrays or collections.
#ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).

    Selection Variable Expressions: *&#123;...&#125;ï¼šé€‰æ‹©è¡¨è¾¾å¼ï¼šå’Œ$&#123;&#125;åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·ï¼›
        è¡¥å……ï¼šé…åˆ th:object=&quot;$&#123;session.user&#125;ï¼š
   &lt;div th:object=&quot;$&#123;session.user&#125;&quot;&gt;
    &lt;p&gt;Name: &lt;span th:text=&quot;*&#123;firstName&#125;&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;
    &lt;p&gt;Surname: &lt;span th:text=&quot;*&#123;lastName&#125;&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt;
    &lt;p&gt;Nationality: &lt;span th:text=&quot;*&#123;nationality&#125;&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt;
    &lt;/div&gt;

    Message Expressions: #&#123;...&#125;ï¼šè·å–å›½é™…åŒ–å†…å®¹
    Link URL Expressions: @&#123;...&#125;ï¼šå®šä¹‰URLï¼›
            @&#123;/order/process(execId=$&#123;execId&#125;,execType=&#39;FAST&#39;)&#125;
    Fragment Expressions: ~&#123;...&#125;ï¼šç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼
            &lt;div th:insert=&quot;~&#123;commons :: main&#125;&quot;&gt;...&lt;/div&gt;

Literalsï¼ˆå­—é¢é‡ï¼‰
      Text literals: &#39;one text&#39; , &#39;Another one!&#39; ,â€¦
      Number literals: 0 , 34 , 3.0 , 12.3 ,â€¦
      Boolean literals: true , false
      Null literal: null
      Literal tokens: one , sometext , main ,â€¦
Text operations:ï¼ˆæ–‡æœ¬æ“ä½œï¼‰
    String concatenation: +
    Literal substitutions: |The name is $&#123;name&#125;|
Arithmetic operations:ï¼ˆæ•°å­¦è¿ç®—ï¼‰
    Binary operators: + , - , * , / , %
    Minus sign (unary operator): -
Boolean operations:ï¼ˆå¸ƒå°”è¿ç®—ï¼‰
    Binary operators: and , or
    Boolean negation (unary operator): ! , not
Comparisons and equality:ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰
    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )
    Equality operators: == , != ( eq , ne )
Conditional operators:æ¡ä»¶è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰
    If-then: (if) ? (then)
    If-then-else: (if) ? (then) : (else)
    Default: (value) ?: (defaultvalue)
Special tokens:
    No-Operation: _ </code></pre>
<h2 id="4ã€SpringMVCè‡ªåŠ¨é…ç½®"><a href="#4ã€SpringMVCè‡ªåŠ¨é…ç½®" class="headerlink" title="4ã€SpringMVCè‡ªåŠ¨é…ç½®"></a>4ã€SpringMVCè‡ªåŠ¨é…ç½®</h2><p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications">https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications</a></p>
<h3 id="1-Spring-MVC-auto-configuration"><a href="#1-Spring-MVC-auto-configuration" class="headerlink" title="1. Spring MVC auto-configuration"></a>1. Spring MVC auto-configuration</h3><p>Spring Boot è‡ªåŠ¨é…ç½®å¥½äº†SpringMVC</p>
<p>ä»¥ä¸‹æ˜¯SpringBootå¯¹SpringMVCçš„é»˜è®¤é…ç½®:<strong>==ï¼ˆWebMvcAutoConfigurationï¼‰==</strong></p>
<ul>
<li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p>
<ul>
<li>è‡ªåŠ¨é…ç½®äº†ViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼šæ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å¾—åˆ°è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œè§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Ÿé‡å®šå‘ï¼Ÿï¼‰ï¼‰</li>
<li>ContentNegotiatingViewResolverï¼šç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„ï¼›</li>
<li>==å¦‚ä½•å®šåˆ¶ï¼šæˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è‡ªåŠ¨çš„å°†å…¶ç»„åˆè¿›æ¥ï¼›==</li>
</ul>
</li>
<li><p>Support for serving static resources, including support for WebJars (see below).é™æ€èµ„æºæ–‡ä»¶å¤¹è·¯å¾„,webjars</p>
</li>
<li><p>Static <code>index.html</code> support. é™æ€é¦–é¡µè®¿é—®</p>
</li>
<li><p>Custom <code>Favicon</code> support (see below).  favicon.ico</p>
</li>
</ul>
<ul>
<li><p>è‡ªåŠ¨æ³¨å†Œäº† of <code>Converter</code>, <code>GenericConverter</code>, <code>Formatter</code> beans.</p>
<ul>
<li>Converterï¼šè½¬æ¢å™¨ï¼›  public String hello(User user)ï¼šç±»å‹è½¬æ¢ä½¿ç”¨Converter</li>
<li><code>Formatter</code>  æ ¼å¼åŒ–å™¨ï¼›  2017.12.17===Dateï¼›</li>
</ul>
</li>
</ul>
<pre><code class="java">        @Bean
        @ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;date-format&quot;)//åœ¨æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™
        public Formatter&lt;Date&gt; dateFormatter() &#123;
            return new DateFormatter(this.mvcProperties.getDateFormat());//æ—¥æœŸæ ¼å¼åŒ–ç»„ä»¶
        &#125;</code></pre>
<p>â€‹    ==è‡ªå·±æ·»åŠ çš„æ ¼å¼åŒ–å™¨è½¬æ¢å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¾åœ¨å®¹å™¨ä¸­å³å¯==</p>
<ul>
<li><p>Support for <code>HttpMessageConverters</code> (see below).</p>
<ul>
<li><p>HttpMessageConverterï¼šSpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„ï¼›Userâ€”Jsonï¼›</p>
</li>
<li><p><code>HttpMessageConverters</code> æ˜¯ä»å®¹å™¨ä¸­ç¡®å®šï¼›è·å–æ‰€æœ‰çš„HttpMessageConverterï¼›</p>
<p>==è‡ªå·±ç»™å®¹å™¨ä¸­æ·»åŠ HttpMessageConverterï¼Œåªéœ€è¦å°†è‡ªå·±çš„ç»„ä»¶æ³¨å†Œå®¹å™¨ä¸­ï¼ˆ@Bean,@Componentï¼‰==</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Automatic registration of <code>MessageCodesResolver</code> (see below).å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™</p>
</li>
<li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (see below).</p>
<p>==æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªConfigurableWebBindingInitializeræ¥æ›¿æ¢é»˜è®¤çš„ï¼›ï¼ˆæ·»åŠ åˆ°å®¹å™¨ï¼‰==</p>
<pre><code>åˆå§‹åŒ–WebDataBinderï¼›
è¯·æ±‚æ•°æ®=====JavaBeanï¼›</code></pre>
</li>
</ul>
<p><strong>org.springframework.boot.autoconfigure.webï¼šwebçš„æ‰€æœ‰è‡ªåŠ¨åœºæ™¯ï¼›</strong></p>
<p>If you want to keep Spring Boot MVC features, and you just want to add additional <a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle#mvc">MVC configuration</a> (interceptors, formatters, view controllers etc.) you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurerAdapter</code>, but <strong>without</strong> <code>@EnableWebMvc</code>. If you wish to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code> or <code>ExceptionHandlerExceptionResolver</code> you can declare a <code>WebMvcRegistrationsAdapter</code> instance providing such components.</p>
<p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>.</p>
<h3 id="2ã€æ‰©å±•SpringMVC"><a href="#2ã€æ‰©å±•SpringMVC" class="headerlink" title="2ã€æ‰©å±•SpringMVC"></a>2ã€æ‰©å±•SpringMVC</h3><pre><code class="xml">    &lt;mvc:view-controller path=&quot;/hello&quot; view-name=&quot;success&quot;/&gt;
    &lt;mvc:interceptors&gt;
        &lt;mvc:interceptor&gt;
            &lt;mvc:mapping path=&quot;/hello&quot;/&gt;
            &lt;bean&gt;&lt;/bean&gt;
        &lt;/mvc:interceptor&gt;
    &lt;/mvc:interceptors&gt;</code></pre>
<p><strong>==ç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼ˆ@Configurationï¼‰ï¼Œæ˜¯WebMvcConfigurerAdapterç±»å‹ï¼›ä¸èƒ½æ ‡æ³¨@EnableWebMvc==</strong>;</p>
<p>æ—¢ä¿ç•™äº†æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼›</p>
<pre><code class="java">//ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½
@Configuration
public class MyMvcConfig extends WebMvcConfigurerAdapter &#123;

    @Override
    public void addViewControllers(ViewControllerRegistry registry) &#123;
       // super.addViewControllers(registry);
        //æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success
        registry.addViewController(&quot;/atguigu&quot;).setViewName(&quot;success&quot;);
    &#125;
&#125;</code></pre>
<p>åŸç†ï¼š</p>
<p>â€‹    1ï¼‰ã€WebMvcAutoConfigurationæ˜¯SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»</p>
<p>â€‹    2ï¼‰ã€åœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼›@Import(<strong>EnableWebMvcConfiguration</strong>.class)</p>
<pre><code class="java">    @Configuration
    public static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration &#123;
      private final WebMvcConfigurerComposite configurers = new WebMvcConfigurerComposite();

     //ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„WebMvcConfigurer
      @Autowired(required = false)
      public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) &#123;
          if (!CollectionUtils.isEmpty(configurers)) &#123;
              this.configurers.addWebMvcConfigurers(configurers);
                //ä¸€ä¸ªå‚è€ƒå®ç°ï¼›å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®éƒ½æ¥ä¸€èµ·è°ƒç”¨ï¼›  
                @Override
             // public void addViewControllers(ViewControllerRegistry registry) &#123;
              //    for (WebMvcConfigurer delegate : this.delegates) &#123;
               //       delegate.addViewControllers(registry);
               //   &#125;
              &#125;
          &#125;
    &#125;</code></pre>
<p>â€‹    3ï¼‰ã€å®¹å™¨ä¸­æ‰€æœ‰çš„WebMvcConfigureréƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ï¼›</p>
<p>â€‹    4ï¼‰ã€æˆ‘ä»¬çš„é…ç½®ç±»ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</p>
<p>â€‹    æ•ˆæœï¼šSpringMVCçš„è‡ªåŠ¨é…ç½®å’Œæˆ‘ä»¬çš„æ‰©å±•é…ç½®éƒ½ä¼šèµ·ä½œç”¨ï¼›</p>
<h3 id="3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›"><a href="#3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›" class="headerlink" title="3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›"></a>3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›</h3><p>SpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±é…ç½®ï¼›æ‰€æœ‰çš„SpringMVCçš„è‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†</p>
<p><strong>æˆ‘ä»¬éœ€è¦åœ¨é…ç½®ç±»ä¸­æ·»åŠ @EnableWebMvcå³å¯ï¼›</strong></p>
<pre><code class="java">//ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½
@EnableWebMvc
@Configuration
public class MyMvcConfig extends WebMvcConfigurerAdapter &#123;

    @Override
    public void addViewControllers(ViewControllerRegistry registry) &#123;
       // super.addViewControllers(registry);
        //æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success
        registry.addViewController(&quot;/atguigu&quot;).setViewName(&quot;success&quot;);
    &#125;
&#125;</code></pre>
<p>åŸç†ï¼š</p>
<p>ä¸ºä»€ä¹ˆ@EnableWebMvcè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼›</p>
<p>1ï¼‰@EnableWebMvcçš„æ ¸å¿ƒ</p>
<pre><code class="java">@Import(DelegatingWebMvcConfiguration.class)
public @interface EnableWebMvc &#123;</code></pre>
<p>2ï¼‰ã€</p>
<pre><code class="java">@Configuration
public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport &#123;</code></pre>
<p>3ï¼‰ã€</p>
<pre><code class="java">@Configuration
@ConditionalOnWebApplication
@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class,
        WebMvcConfigurerAdapter.class &#125;)
//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ
@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)
@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)
@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class,
        ValidationAutoConfiguration.class &#125;)
public class WebMvcAutoConfiguration &#123;</code></pre>
<p>4ï¼‰ã€@EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥ï¼›</p>
<p>5ï¼‰ã€å¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼›</p>
<h2 id="5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"><a href="#5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®" class="headerlink" title="5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"></a>5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®</h2><p>æ¨¡å¼ï¼š</p>
<p>â€‹    1ï¼‰ã€SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆ@Beanã€@Componentï¼‰å¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰è‡ªåŠ¨é…ç½®ï¼›å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼ˆViewResolverï¼‰å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼›</p>
<p>â€‹    2ï¼‰ã€åœ¨SpringBootä¸­ä¼šæœ‰éå¸¸å¤šçš„xxxConfigurerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½®</p>
<p>â€‹    3ï¼‰ã€åœ¨SpringBootä¸­ä¼šæœ‰å¾ˆå¤šçš„xxxCustomizerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œå®šåˆ¶é…ç½®</p>
<h2 id="6ã€RestfulCRUD"><a href="#6ã€RestfulCRUD" class="headerlink" title="6ã€RestfulCRUD"></a>6ã€RestfulCRUD</h2><h3 id="1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ"><a href="#1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ" class="headerlink" title="1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ"></a>1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ</h3><pre><code class="java">
//ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½
//@EnableWebMvc   ä¸è¦æ¥ç®¡SpringMVC
@Configuration
public class MyMvcConfig extends WebMvcConfigurerAdapter &#123;

    @Override
    public void addViewControllers(ViewControllerRegistry registry) &#123;
       // super.addViewControllers(registry);
        //æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success
        registry.addViewController(&quot;/atguigu&quot;).setViewName(&quot;success&quot;);
    &#125;

    //æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨
    @Bean //å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨
    public WebMvcConfigurerAdapter webMvcConfigurerAdapter()&#123;
        WebMvcConfigurerAdapter adapter = new WebMvcConfigurerAdapter() &#123;
            @Override
            public void addViewControllers(ViewControllerRegistry registry) &#123;
                registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;);
                registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;login&quot;);
            &#125;
        &#125;;
        return adapter;
    &#125;
&#125;
</code></pre>
<h3 id="2ï¼‰ã€å›½é™…åŒ–"><a href="#2ï¼‰ã€å›½é™…åŒ–" class="headerlink" title="2ï¼‰ã€å›½é™…åŒ–"></a>2ï¼‰ã€å›½é™…åŒ–</h3><p><strong>1ï¼‰ã€ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼›</strong></p>
<p>2ï¼‰ã€ä½¿ç”¨ResourceBundleMessageSourceç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶</p>
<p>3ï¼‰ã€åœ¨é¡µé¢ä½¿ç”¨fmt:messageå–å‡ºå›½é™…åŒ–å†…å®¹</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–æ¶ˆæ¯</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180211130721.png"></p>
<p>2ï¼‰ã€SpringBootè‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ï¼›</p>
<pre><code class="java">@ConfigurationProperties(prefix = &quot;spring.messages&quot;)
public class MessageSourceAutoConfiguration &#123;

    /**
     * Comma-separated list of basenames (essentially a fully-qualified classpath
     * location), each following the ResourceBundle convention with relaxed support for
     * slash based locations. If it doesn&#39;t contain a package qualifier (such as
     * &quot;org.mypackage&quot;), it will be resolved from the classpath root.
     */
    private String basename = &quot;messages&quot;;  
    //æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥æ”¾åœ¨ç±»è·¯å¾„ä¸‹å«messages.propertiesï¼›

    @Bean
    public MessageSource messageSource() &#123;
        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
        if (StringUtils.hasText(this.basename)) &#123;
            //è®¾ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰
            messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray(
                    StringUtils.trimAllWhitespace(this.basename)));
        &#125;
        if (this.encoding != null) &#123;
            messageSource.setDefaultEncoding(this.encoding.name());
        &#125;
        messageSource.setFallbackToSystemLocale(this.fallbackToSystemLocale);
        messageSource.setCacheSeconds(this.cacheSeconds);
        messageSource.setAlwaysUseMessageFormat(this.alwaysUseMessageFormat);
        return messageSource;
    &#125;</code></pre>
<p>3ï¼‰ã€å»é¡µé¢è·å–å›½é™…åŒ–çš„å€¼ï¼›</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180211134506.png"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;  xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
    &lt;head&gt;
        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;
        &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;
        &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;
        &lt;title&gt;Signin Template for Bootstrap&lt;/title&gt;
        &lt;!-- Bootstrap core CSS --&gt;
        &lt;link href=&quot;asserts/css/bootstrap.min.css&quot; th:href=&quot;@&#123;/webjars/bootstrap/4.0.0/css/bootstrap.css&#125;&quot; rel=&quot;stylesheet&quot;&gt;
        &lt;!-- Custom styles for this template --&gt;
        &lt;link href=&quot;asserts/css/signin.css&quot; th:href=&quot;@&#123;/asserts/css/signin.css&#125;&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;/head&gt;

    &lt;body class=&quot;text-center&quot;&gt;
        &lt;form class=&quot;form-signin&quot; action=&quot;dashboard.html&quot;&gt;
            &lt;img class=&quot;mb-4&quot; th:src=&quot;@&#123;/asserts/img/bootstrap-solid.svg&#125;&quot; src=&quot;asserts/img/bootstrap-solid.svg&quot; alt=&quot;&quot; width=&quot;72&quot; height=&quot;72&quot;&gt;
            &lt;h1 class=&quot;h3 mb-3 font-weight-normal&quot; th:text=&quot;#&#123;login.tip&#125;&quot;&gt;Please sign in&lt;/h1&gt;
            &lt;label class=&quot;sr-only&quot; th:text=&quot;#&#123;login.username&#125;&quot;&gt;Username&lt;/label&gt;
            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; th:placeholder=&quot;#&#123;login.username&#125;&quot; required=&quot;&quot; autofocus=&quot;&quot;&gt;
            &lt;label class=&quot;sr-only&quot; th:text=&quot;#&#123;login.password&#125;&quot;&gt;Password&lt;/label&gt;
            &lt;input type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; th:placeholder=&quot;#&#123;login.password&#125;&quot; required=&quot;&quot;&gt;
            &lt;div class=&quot;checkbox mb-3&quot;&gt;
                &lt;label&gt;
                  &lt;input type=&quot;checkbox&quot; value=&quot;remember-me&quot;/&gt; [[#&#123;login.remember&#125;]]
        &lt;/label&gt;
            &lt;/div&gt;
            &lt;button class=&quot;btn btn-lg btn-primary btn-block&quot; type=&quot;submit&quot; th:text=&quot;#&#123;login.btn&#125;&quot;&gt;Sign in&lt;/button&gt;
            &lt;p class=&quot;mt-5 mb-3 text-muted&quot;&gt;Â© 2017-2018&lt;/p&gt;
            &lt;a class=&quot;btn btn-sm&quot;&gt;ä¸­æ–‡&lt;/a&gt;
            &lt;a class=&quot;btn btn-sm&quot;&gt;English&lt;/a&gt;
        &lt;/form&gt;

    &lt;/body&gt;

&lt;/html&gt;</code></pre>
<p>æ•ˆæœï¼šæ ¹æ®æµè§ˆå™¨è¯­è¨€è®¾ç½®çš„ä¿¡æ¯åˆ‡æ¢äº†å›½é™…åŒ–ï¼›</p>
<p>åŸç†ï¼š</p>
<p>â€‹    å›½é™…åŒ–Localeï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›LocaleResolverï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›</p>
<pre><code class="java">        @Bean
        @ConditionalOnMissingBean
        @ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)
        public LocaleResolver localeResolver() &#123;
            if (this.mvcProperties
                    .getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;
                return new FixedLocaleResolver(this.mvcProperties.getLocale());
            &#125;
            AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();
            localeResolver.setDefaultLocale(this.mvcProperties.getLocale());
            return localeResolver;
        &#125;
é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯è·å–Localeè¿›è¡Œå›½é™…åŒ–</code></pre>
<p>4ï¼‰ã€ç‚¹å‡»é“¾æ¥åˆ‡æ¢å›½é™…åŒ–</p>
<pre><code class="java">/**
 * å¯ä»¥åœ¨è¿æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯
 */
public class MyLocaleResolver implements LocaleResolver &#123;

    @Override
    public Locale resolveLocale(HttpServletRequest request) &#123;
        String l = request.getParameter(&quot;l&quot;);
        Locale locale = Locale.getDefault();
        if(!StringUtils.isEmpty(l))&#123;
            String[] split = l.split(&quot;_&quot;);
            locale = new Locale(split[0],split[1]);
        &#125;
        return locale;
    &#125;

    @Override
    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) &#123;

    &#125;
&#125;


 @Bean
    public LocaleResolver localeResolver()&#123;
        return new MyLocaleResolver();
    &#125;
&#125;

</code></pre>
<h3 id="3ï¼‰ã€ç™»é™†"><a href="#3ï¼‰ã€ç™»é™†" class="headerlink" title="3ï¼‰ã€ç™»é™†"></a>3ï¼‰ã€ç™»é™†</h3><p>å¼€å‘æœŸé—´æ¨¡æ¿å¼•æ“é¡µé¢ä¿®æ”¹ä»¥åï¼Œè¦å®æ—¶ç”Ÿæ•ˆ</p>
<p>1ï¼‰ã€ç¦ç”¨æ¨¡æ¿å¼•æ“çš„ç¼“å­˜</p>
<pre><code># ç¦ç”¨ç¼“å­˜
spring.thymeleaf.cache=false </code></pre>
<p>2ï¼‰ã€é¡µé¢ä¿®æ”¹å®Œæˆä»¥åctrl+f9ï¼šé‡æ–°ç¼–è¯‘ï¼›</p>
<p>ç™»é™†é”™è¯¯æ¶ˆæ¯çš„æ˜¾ç¤º</p>
<pre><code class="html">&lt;p style=&quot;color: red&quot; th:text=&quot;$&#123;msg&#125;&quot; th:if=&quot;$&#123;not #strings.isEmpty(msg)&#125;&quot;&gt;&lt;/p&gt;</code></pre>
<h3 id="4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥"><a href="#4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥" class="headerlink" title="4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥"></a>4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥</h3><p>æ‹¦æˆªå™¨</p>
<pre><code class="java">
/**
 * ç™»é™†æ£€æŸ¥ï¼Œ
 */
public class LoginHandlerInterceptor implements HandlerInterceptor &#123;
    //ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;
        Object user = request.getSession().getAttribute(&quot;loginUser&quot;);
        if(user == null)&#123;
            //æœªç™»é™†ï¼Œè¿”å›ç™»é™†é¡µé¢
            request.setAttribute(&quot;msg&quot;,&quot;æ²¡æœ‰æƒé™è¯·å…ˆç™»é™†&quot;);
            request.getRequestDispatcher(&quot;/index.html&quot;).forward(request,response);
            return false;
        &#125;else&#123;
            //å·²ç™»é™†ï¼Œæ”¾è¡Œè¯·æ±‚
            return true;
        &#125;

    &#125;

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;

    &#125;

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;

    &#125;
&#125;
</code></pre>
<p>æ³¨å†Œæ‹¦æˆªå™¨</p>
<pre><code class="java">  //æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨
    @Bean //å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨
    public WebMvcConfigurerAdapter webMvcConfigurerAdapter()&#123;
        WebMvcConfigurerAdapter adapter = new WebMvcConfigurerAdapter() &#123;
            @Override
            public void addViewControllers(ViewControllerRegistry registry) &#123;
                registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;);
                registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;login&quot;);
                registry.addViewController(&quot;/main.html&quot;).setViewName(&quot;dashboard&quot;);
            &#125;

            //æ³¨å†Œæ‹¦æˆªå™¨
            @Override
            public void addInterceptors(InterceptorRegistry registry) &#123;
                //super.addInterceptors(registry);
                //é™æ€èµ„æºï¼›  *.css , *.js
                //SpringBootå·²ç»åšå¥½äº†é™æ€èµ„æºæ˜ å°„
                registry.addInterceptor(new LoginHandlerInterceptor()).addPathPatterns(&quot;/**&quot;)
                        .excludePathPatterns(&quot;/index.html&quot;,&quot;/&quot;,&quot;/user/login&quot;);
            &#125;
        &#125;;
        return adapter;
    &#125;</code></pre>
<h3 id="5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨"><a href="#5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨" class="headerlink" title="5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨"></a>5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨</h3><p>å®éªŒè¦æ±‚ï¼š</p>
<p>1ï¼‰ã€RestfulCRUDï¼šCRUDæ»¡è¶³Resté£æ ¼ï¼›</p>
<p>URIï¼š  /èµ„æºåç§°/èµ„æºæ ‡è¯†       HTTPè¯·æ±‚æ–¹å¼åŒºåˆ†å¯¹èµ„æºCRUDæ“ä½œ</p>
<table>
<thead>
<tr>
<th></th>
<th>æ™®é€šCRUDï¼ˆuriæ¥åŒºåˆ†æ“ä½œï¼‰</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody><tr>
<td>æŸ¥è¯¢</td>
<td>getEmp</td>
<td>empâ€”GET</td>
</tr>
<tr>
<td>æ·»åŠ </td>
<td>addEmp?xxx</td>
<td>empâ€”POST</td>
</tr>
<tr>
<td>ä¿®æ”¹</td>
<td>updateEmp?id=xxx&amp;xxx=xx</td>
<td>emp/{id}â€”PUT</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>deleteEmp?id=1</td>
<td>emp/{id}â€”DELETE</td>
</tr>
</tbody></table>
<p>2ï¼‰ã€å®éªŒçš„è¯·æ±‚æ¶æ„;</p>
<table>
<thead>
<tr>
<th>å®éªŒåŠŸèƒ½</th>
<th>è¯·æ±‚URI</th>
<th>è¯·æ±‚æ–¹å¼</th>
</tr>
</thead>
<tbody><tr>
<td>æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>æŸ¥è¯¢æŸä¸ªå‘˜å·¥(æ¥åˆ°ä¿®æ”¹é¡µé¢)</td>
<td>emp/1</td>
<td>GET</td>
</tr>
<tr>
<td>æ¥åˆ°æ·»åŠ é¡µé¢</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>æ·»åŠ å‘˜å·¥</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>æ¥åˆ°ä¿®æ”¹é¡µé¢ï¼ˆæŸ¥å‡ºå‘˜å·¥è¿›è¡Œä¿¡æ¯å›æ˜¾ï¼‰</td>
<td>emp/1</td>
<td>GET</td>
</tr>
<tr>
<td>ä¿®æ”¹å‘˜å·¥</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>åˆ é™¤å‘˜å·¥</td>
<td>emp/1</td>
<td>DELETE</td>
</tr>
</tbody></table>
<p>3ï¼‰ã€å‘˜å·¥åˆ—è¡¨ï¼š</p>
<h4 id="thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–"><a href="#thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–" class="headerlink" title="thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–"></a>thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–</h4><pre><code class="html">1ã€æŠ½å–å…¬å…±ç‰‡æ®µ
&lt;div th:fragment=&quot;copy&quot;&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/div&gt;

2ã€å¼•å…¥å…¬å…±ç‰‡æ®µ
&lt;div th:insert=&quot;~&#123;footer :: copy&#125;&quot;&gt;&lt;/div&gt;
~&#123;templatename::selector&#125;ï¼šæ¨¡æ¿å::é€‰æ‹©å™¨
~&#123;templatename::fragmentname&#125;:æ¨¡æ¿å::ç‰‡æ®µå

3ã€é»˜è®¤æ•ˆæœï¼š
insertçš„å…¬å…±ç‰‡æ®µåœ¨divæ ‡ç­¾ä¸­
å¦‚æœä½¿ç”¨th:insertç­‰å±æ€§è¿›è¡Œå¼•å…¥ï¼Œå¯ä»¥ä¸ç”¨å†™~&#123;&#125;ï¼š
è¡Œå†…å†™æ³•å¯ä»¥åŠ ä¸Šï¼š[[~&#123;&#125;]];[(~&#123;&#125;)]ï¼›</code></pre>
<p>ä¸‰ç§å¼•å…¥å…¬å…±ç‰‡æ®µçš„thå±æ€§ï¼š</p>
<p><strong>th:insert</strong>ï¼šå°†å…¬å…±ç‰‡æ®µæ•´ä¸ªæ’å…¥åˆ°å£°æ˜å¼•å…¥çš„å…ƒç´ ä¸­</p>
<p><strong>th:replace</strong>ï¼šå°†å£°æ˜å¼•å…¥çš„å…ƒç´ æ›¿æ¢ä¸ºå…¬å…±ç‰‡æ®µ</p>
<p><strong>th:include</strong>ï¼šå°†è¢«å¼•å…¥çš„ç‰‡æ®µçš„å†…å®¹åŒ…å«è¿›è¿™ä¸ªæ ‡ç­¾ä¸­</p>
<pre><code class="html">&lt;footer th:fragment=&quot;copy&quot;&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/footer&gt;

å¼•å…¥æ–¹å¼
&lt;div th:insert=&quot;footer :: copy&quot;&gt;&lt;/div&gt;
&lt;div th:replace=&quot;footer :: copy&quot;&gt;&lt;/div&gt;
&lt;div th:include=&quot;footer :: copy&quot;&gt;&lt;/div&gt;

æ•ˆæœ
&lt;div&gt;
    &lt;footer&gt;
    &amp;copy; 2011 The Good Thymes Virtual Grocery
    &lt;/footer&gt;
&lt;/div&gt;

&lt;footer&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/footer&gt;

&lt;div&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/div&gt;</code></pre>
<p>å¼•å…¥ç‰‡æ®µçš„æ—¶å€™ä¼ å…¥å‚æ•°ï¼š </p>
<pre><code class="html">
&lt;nav class=&quot;col-md-2 d-none d-md-block bg-light sidebar&quot; id=&quot;sidebar&quot;&gt;
    &lt;div class=&quot;sidebar-sticky&quot;&gt;
        &lt;ul class=&quot;nav flex-column&quot;&gt;
            &lt;li class=&quot;nav-item&quot;&gt;
                &lt;a class=&quot;nav-link active&quot;
                   th:class=&quot;$&#123;activeUri==&#39;main.html&#39;?&#39;nav-link active&#39;:&#39;nav-link&#39;&#125;&quot;
                   href=&quot;#&quot; th:href=&quot;@&#123;/main.html&#125;&quot;&gt;
                    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;24&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; class=&quot;feather feather-home&quot;&gt;
                        &lt;path d=&quot;M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z&quot;&gt;&lt;/path&gt;
                        &lt;polyline points=&quot;9 22 9 12 15 12 15 22&quot;&gt;&lt;/polyline&gt;
                    &lt;/svg&gt;
                    Dashboard &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;

&lt;!--å¼•å…¥ä¾§è¾¹æ ;ä¼ å…¥å‚æ•°--&gt;
&lt;div th:replace=&quot;commons/bar::#sidebar(activeUri=&#39;emps&#39;)&quot;&gt;&lt;/div&gt;</code></pre>
<h3 id="6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ "><a href="#6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ " class="headerlink" title="6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ "></a>6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ </h3><p>æ·»åŠ é¡µé¢</p>
<pre><code class="html">&lt;form&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;LastName&lt;/label&gt;
        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;Email&lt;/label&gt;
        &lt;input type=&quot;email&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan@atguigu.com&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;Gender&lt;/label&gt;&lt;br/&gt;
        &lt;div class=&quot;form-check form-check-inline&quot;&gt;
            &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot;  value=&quot;1&quot;&gt;
            &lt;label class=&quot;form-check-label&quot;&gt;ç”·&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-check form-check-inline&quot;&gt;
            &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot;  value=&quot;0&quot;&gt;
            &lt;label class=&quot;form-check-label&quot;&gt;å¥³&lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;department&lt;/label&gt;
        &lt;select class=&quot;form-control&quot;&gt;
            &lt;option&gt;1&lt;/option&gt;
            &lt;option&gt;2&lt;/option&gt;
            &lt;option&gt;3&lt;/option&gt;
            &lt;option&gt;4&lt;/option&gt;
            &lt;option&gt;5&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;Birth&lt;/label&gt;
        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot;&gt;
    &lt;/div&gt;
    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;æ·»åŠ &lt;/button&gt;
&lt;/form&gt;</code></pre>
<p>æäº¤çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼šç”Ÿæ—¥ï¼šæ—¥æœŸï¼›</p>
<p>2017-12-12ï¼›2017/12/12ï¼›2017.12.12ï¼›</p>
<p>æ—¥æœŸçš„æ ¼å¼åŒ–ï¼›SpringMVCå°†é¡µé¢æäº¤çš„å€¼éœ€è¦è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹;</p>
<p>2017-12-12â€”Dateï¼› ç±»å‹è½¬æ¢ï¼Œæ ¼å¼åŒ–;</p>
<p>é»˜è®¤æ—¥æœŸæ˜¯æŒ‰ç…§/çš„æ–¹å¼ï¼›</p>
<h3 id="7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹"><a href="#7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹" class="headerlink" title="7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹"></a>7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹</h3><p>ä¿®æ”¹æ·»åŠ äºŒåˆä¸€è¡¨å•</p>
<pre><code class="html">&lt;!--éœ€è¦åŒºåˆ†æ˜¯å‘˜å·¥ä¿®æ”¹è¿˜æ˜¯æ·»åŠ ï¼›--&gt;
&lt;form th:action=&quot;@&#123;/emp&#125;&quot; method=&quot;post&quot;&gt;
    &lt;!--å‘é€putè¯·æ±‚ä¿®æ”¹å‘˜å·¥æ•°æ®--&gt;
    &lt;!--
1ã€SpringMVCä¸­é…ç½®HiddenHttpMethodFilter;ï¼ˆSpringBootè‡ªåŠ¨é…ç½®å¥½çš„ï¼‰
2ã€é¡µé¢åˆ›å»ºä¸€ä¸ªpostè¡¨å•
3ã€åˆ›å»ºä¸€ä¸ªinputé¡¹ï¼Œname=&quot;_method&quot;;å€¼å°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¯·æ±‚æ–¹å¼
--&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;put&quot; th:if=&quot;$&#123;emp!=null&#125;&quot;/&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:if=&quot;$&#123;emp!=null&#125;&quot; th:value=&quot;$&#123;emp.id&#125;&quot;&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;LastName&lt;/label&gt;
        &lt;input name=&quot;lastName&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot; th:value=&quot;$&#123;emp!=null&#125;?$&#123;emp.lastName&#125;&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;Email&lt;/label&gt;
        &lt;input name=&quot;email&quot; type=&quot;email&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan@atguigu.com&quot; th:value=&quot;$&#123;emp!=null&#125;?$&#123;emp.email&#125;&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;Gender&lt;/label&gt;&lt;br/&gt;
        &lt;div class=&quot;form-check form-check-inline&quot;&gt;
            &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; th:checked=&quot;$&#123;emp!=null&#125;?$&#123;emp.gender==1&#125;&quot;&gt;
            &lt;label class=&quot;form-check-label&quot;&gt;ç”·&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-check form-check-inline&quot;&gt;
            &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; th:checked=&quot;$&#123;emp!=null&#125;?$&#123;emp.gender==0&#125;&quot;&gt;
            &lt;label class=&quot;form-check-label&quot;&gt;å¥³&lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;department&lt;/label&gt;
        &lt;!--æäº¤çš„æ˜¯éƒ¨é—¨çš„id--&gt;
        &lt;select class=&quot;form-control&quot; name=&quot;department.id&quot;&gt;
            &lt;option th:selected=&quot;$&#123;emp!=null&#125;?$&#123;dept.id == emp.department.id&#125;&quot; th:value=&quot;$&#123;dept.id&#125;&quot; th:each=&quot;dept:$&#123;depts&#125;&quot; th:text=&quot;$&#123;dept.departmentName&#125;&quot;&gt;1&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label&gt;Birth&lt;/label&gt;
        &lt;input name=&quot;birth&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot; th:value=&quot;$&#123;emp!=null&#125;?$&#123;#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')&#125;">
    </div>
    <button type="submit" class="btn btn-primary" th:text="$&#123;emp!=null&#125;?'ä¿®æ”¹':'æ·»åŠ '">æ·»åŠ </button>
</form>
```

### 8ï¼‰ã€CRUD-å‘˜å·¥åˆ é™¤

```html
<tr th:each="emp:$&#123;emps&#125;">
    <td th:text="$&#123;emp.id&#125;"></td>
    <td>[[$&#123;emp.lastName&#125;]]</td>
    <td th:text="$&#123;emp.email&#125;"></td>
    <td th:text="$&#123;emp.gender&#125;==0?'å¥³':'ç”·'"></td>
    <td th:text="$&#123;emp.department.departmentName&#125;"></td>
    <td th:text="$&#123;#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')&#125;"></td>
    <td>
        <a class="btn btn-sm btn-primary" th:href="@&#123;/emp/&#125;+$&#123;emp.id&#125;">ç¼–è¾‘</a>
        <button th:attr="del_uri=@&#123;/emp/&#125;+$&#123;emp.id&#125;" class="btn btn-sm btn-danger deleteBtn">åˆ é™¤</button>
    </td>
</tr>


<script>
    $(".deleteBtn").click(function()&#123;
        //åˆ é™¤å½“å‰å‘˜å·¥çš„
        $("#deleteEmpForm").attr("action",$(this).attr("del_uri")).submit();
        return false;
    &#125;);
</script>
```



## 7ã€é”™è¯¯å¤„ç†æœºåˆ¶

### 1ï¼‰ã€SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶

é»˜è®¤æ•ˆæœï¼š

â€‹		1ï¼‰ã€æµè§ˆå™¨ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„é”™è¯¯é¡µé¢

![](images/æœç‹—æˆªå›¾20180226173408.png)

  æµè§ˆå™¨å‘é€è¯·æ±‚çš„è¯·æ±‚å¤´ï¼š

![](images/æœç‹—æˆªå›¾20180226180347.png)

â€‹		2ï¼‰ã€å¦‚æœæ˜¯å…¶ä»–å®¢æˆ·ç«¯ï¼Œé»˜è®¤å“åº”ä¸€ä¸ªjsonæ•°æ®

![](images/æœç‹—æˆªå›¾20180226173527.png)

â€‹		![](images/æœç‹—æˆªå›¾20180226180504.png)

åŸç†ï¼š

â€‹	å¯ä»¥å‚ç…§ErrorMvcAutoConfigurationï¼›é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®ï¼›

  	ç»™å®¹å™¨ä¸­æ·»åŠ äº†ä»¥ä¸‹ç»„ä»¶

â€‹	1ã€DefaultErrorAttributesï¼š

```java
å¸®æˆ‘ä»¬åœ¨é¡µé¢å…±äº«ä¿¡æ¯ï¼›
@Override
	public Map<String, Object> getErrorAttributes(RequestAttributes requestAttributes,
			boolean includeStackTrace) &#123;
		Map<String, Object> errorAttributes = new LinkedHashMap<String, Object>();
		errorAttributes.put("timestamp", new Date());
		addStatus(errorAttributes, requestAttributes);
		addErrorDetails(errorAttributes, requestAttributes, includeStackTrace);
		addPath(errorAttributes, requestAttributes);
		return errorAttributes;
	&#125;
```



â€‹	2ã€BasicErrorControllerï¼šå¤„ç†é»˜è®¤/errorè¯·æ±‚

```java
@Controller
@RequestMapping("$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;&quot;)
public class BasicErrorController extends AbstractErrorController &#123;

    @RequestMapping(produces = &quot;text/html&quot;)//äº§ç”Ÿhtmlç±»å‹çš„æ•°æ®ï¼›æµè§ˆå™¨å‘é€çš„è¯·æ±‚æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç†
    public ModelAndView errorHtml(HttpServletRequest request,
            HttpServletResponse response) &#123;
        HttpStatus status = getStatus(request);
        Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(
                request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));
        response.setStatus(status.value());

        //å»å“ªä¸ªé¡µé¢ä½œä¸ºé”™è¯¯é¡µé¢ï¼›åŒ…å«é¡µé¢åœ°å€å’Œé¡µé¢å†…å®¹
        ModelAndView modelAndView = resolveErrorView(request, response, status, model);
        return (modelAndView == null ? new ModelAndView(&quot;error&quot;, model) : modelAndView);
    &#125;

    @RequestMapping
    @ResponseBody    //äº§ç”Ÿjsonæ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç†ï¼›
    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) &#123;
        Map&lt;String, Object&gt; body = getErrorAttributes(request,
                isIncludeStackTrace(request, MediaType.ALL));
        HttpStatus status = getStatus(request);
        return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status);
    &#125;</code></pre>
<p>â€‹    3ã€ErrorPageCustomizerï¼š</p>
<pre><code class="java">    @Value(&quot;$&#123;error.path:/error&#125;&quot;)
    private String path = &quot;/error&quot;;  ç³»ç»Ÿå‡ºç°é”™è¯¯ä»¥åæ¥åˆ°errorè¯·æ±‚è¿›è¡Œå¤„ç†ï¼›ï¼ˆweb.xmlæ³¨å†Œçš„é”™è¯¯é¡µé¢è§„åˆ™ï¼‰</code></pre>
<p>â€‹    4ã€DefaultErrorViewResolverï¼š</p>
<pre><code class="java">@Override
    public ModelAndView resolveErrorView(HttpServletRequest request, HttpStatus status,
            Map&lt;String, Object&gt; model) &#123;
        ModelAndView modelAndView = resolve(String.valueOf(status), model);
        if (modelAndView == null &amp;&amp; SERIES_VIEWS.containsKey(status.series())) &#123;
            modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);
        &#125;
        return modelAndView;
    &#125;

    private ModelAndView resolve(String viewName, Map&lt;String, Object&gt; model) &#123;
        //é»˜è®¤SpringBootå¯ä»¥å»æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ï¼Ÿ  error/404
        String errorViewName = &quot;error/&quot; + viewName;

        //æ¨¡æ¿å¼•æ“å¯ä»¥è§£æè¿™ä¸ªé¡µé¢åœ°å€å°±ç”¨æ¨¡æ¿å¼•æ“è§£æ
        TemplateAvailabilityProvider provider = this.templateAvailabilityProviders
                .getProvider(errorViewName, this.applicationContext);
        if (provider != null) &#123;
            //æ¨¡æ¿å¼•æ“å¯ç”¨çš„æƒ…å†µä¸‹è¿”å›åˆ°errorViewNameæŒ‡å®šçš„è§†å›¾åœ°å€
            return new ModelAndView(errorViewName, model);
        &#125;
        //æ¨¡æ¿å¼•æ“ä¸å¯ç”¨ï¼Œå°±åœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾errorViewNameå¯¹åº”çš„é¡µé¢   error/404.html
        return resolveResource(errorViewName, model);
    &#125;</code></pre>
<p>â€‹    æ­¥éª¤ï¼š</p>
<p>â€‹        ä¸€ä½†ç³»ç»Ÿå‡ºç°4xxæˆ–è€…5xxä¹‹ç±»çš„é”™è¯¯ï¼›ErrorPageCustomizerå°±ä¼šç”Ÿæ•ˆï¼ˆå®šåˆ¶é”™è¯¯çš„å“åº”è§„åˆ™ï¼‰ï¼›å°±ä¼šæ¥åˆ°/errorè¯·æ±‚ï¼›å°±ä¼šè¢«<strong>BasicErrorController</strong>å¤„ç†ï¼›</p>
<p>â€‹        1ï¼‰å“åº”é¡µé¢ï¼›å»å“ªä¸ªé¡µé¢æ˜¯ç”±<strong>DefaultErrorViewResolver</strong>è§£æå¾—åˆ°çš„ï¼›</p>
<pre><code class="java">protected ModelAndView resolveErrorView(HttpServletRequest request,
      HttpServletResponse response, HttpStatus status, Map&lt;String, Object&gt; model) &#123;
    //æ‰€æœ‰çš„ErrorViewResolverå¾—åˆ°ModelAndView
   for (ErrorViewResolver resolver : this.errorViewResolvers) &#123;
      ModelAndView modelAndView = resolver.resolveErrorView(request, status, model);
      if (modelAndView != null) &#123;
         return modelAndView;
      &#125;
   &#125;
   return null;
&#125;</code></pre>
<h3 id="2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š"><a href="#2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š" class="headerlink" title="2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š"></a>2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š</h3><h4 id="1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›"><a href="#1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›" class="headerlink" title="1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›"></a><strong>1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›</strong></h4><p>â€‹            <strong>1ï¼‰ã€æœ‰æ¨¡æ¿å¼•æ“çš„æƒ…å†µä¸‹ï¼›error/çŠ¶æ€ç ;</strong> ã€å°†é”™è¯¯é¡µé¢å‘½åä¸º  é”™è¯¯çŠ¶æ€ç .html æ”¾åœ¨æ¨¡æ¿å¼•æ“æ–‡ä»¶å¤¹é‡Œé¢çš„ erroræ–‡ä»¶å¤¹ä¸‹ã€‘ï¼Œå‘ç”Ÿæ­¤çŠ¶æ€ç çš„é”™è¯¯å°±ä¼šæ¥åˆ°  å¯¹åº”çš„é¡µé¢ï¼›</p>
<p>â€‹            æˆ‘ä»¬å¯ä»¥ä½¿ç”¨4xxå’Œ5xxä½œä¸ºé”™è¯¯é¡µé¢çš„æ–‡ä»¶åæ¥åŒ¹é…è¿™ç§ç±»å‹çš„æ‰€æœ‰é”™è¯¯ï¼Œç²¾ç¡®ä¼˜å…ˆï¼ˆä¼˜å…ˆå¯»æ‰¾ç²¾ç¡®çš„çŠ¶æ€ç .htmlï¼‰ï¼›        </p>
<p>â€‹            é¡µé¢èƒ½è·å–çš„ä¿¡æ¯ï¼›</p>
<p>â€‹                timestampï¼šæ—¶é—´æˆ³</p>
<p>â€‹                statusï¼šçŠ¶æ€ç </p>
<p>â€‹                errorï¼šé”™è¯¯æç¤º</p>
<p>â€‹                exceptionï¼šå¼‚å¸¸å¯¹è±¡</p>
<p>â€‹                messageï¼šå¼‚å¸¸æ¶ˆæ¯</p>
<p>â€‹                errorsï¼šJSR303æ•°æ®æ ¡éªŒçš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ</p>
<p>â€‹            2ï¼‰ã€æ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼ˆæ¨¡æ¿å¼•æ“æ‰¾ä¸åˆ°è¿™ä¸ªé”™è¯¯é¡µé¢ï¼‰ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ï¼›</p>
<p>â€‹            3ï¼‰ã€ä»¥ä¸Šéƒ½æ²¡æœ‰é”™è¯¯é¡µé¢ï¼Œå°±æ˜¯é»˜è®¤æ¥åˆ°SpringBooté»˜è®¤çš„é”™è¯¯æç¤ºé¡µé¢ï¼›</p>
<h4 id="2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›"><a href="#2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›" class="headerlink" title="2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›"></a>2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›</h4><p>â€‹        1ï¼‰ã€è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†&amp;è¿”å›å®šåˆ¶jsonæ•°æ®ï¼›</p>
<pre><code class="java">@ControllerAdvice
public class MyExceptionHandler &#123;

    @ResponseBody
    @ExceptionHandler(UserNotExistException.class)
    public Map&lt;String,Object&gt; handleException(Exception e)&#123;
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;code&quot;,&quot;user.notexist&quot;);
        map.put(&quot;message&quot;,e.getMessage());
        return map;
    &#125;
&#125;
//æ²¡æœ‰è‡ªé€‚åº”æ•ˆæœ...</code></pre>
<p>â€‹        2ï¼‰ã€è½¬å‘åˆ°/errorè¿›è¡Œè‡ªé€‚åº”å“åº”æ•ˆæœå¤„ç†</p>
<pre><code class="java"> @ExceptionHandler(UserNotExistException.class)
    public String handleException(Exception e, HttpServletRequest request)&#123;
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        //ä¼ å…¥æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯çŠ¶æ€ç   4xx 5xxï¼Œå¦åˆ™å°±ä¸ä¼šè¿›å…¥å®šåˆ¶é”™è¯¯é¡µé¢çš„è§£ææµç¨‹
        /**
         * Integer statusCode = (Integer) request
         .getAttribute(&quot;javax.servlet.error.status_code&quot;);
         */
        request.setAttribute(&quot;javax.servlet.error.status_code&quot;,500);
        map.put(&quot;code&quot;,&quot;user.notexist&quot;);
        map.put(&quot;message&quot;,e.getMessage());
        //è½¬å‘åˆ°/error
        return &quot;forward:/error&quot;;
    &#125;</code></pre>
<h4 id="3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›"><a href="#3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›" class="headerlink" title="3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›"></a>3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›</h4><p>å‡ºç°é”™è¯¯ä»¥åï¼Œä¼šæ¥åˆ°/errorè¯·æ±‚ï¼Œä¼šè¢«BasicErrorControllerå¤„ç†ï¼Œå“åº”å‡ºå»å¯ä»¥è·å–çš„æ•°æ®æ˜¯ç”±getErrorAttributeså¾—åˆ°çš„ï¼ˆæ˜¯AbstractErrorControllerï¼ˆErrorControllerï¼‰è§„å®šçš„æ–¹æ³•ï¼‰ï¼›</p>
<p>â€‹    1ã€å®Œå…¨æ¥ç¼–å†™ä¸€ä¸ªErrorControllerçš„å®ç°ç±»ã€æˆ–è€…æ˜¯ç¼–å†™AbstractErrorControllerçš„å­ç±»ã€‘ï¼Œæ”¾åœ¨å®¹å™¨ä¸­ï¼›</p>
<p>â€‹    2ã€é¡µé¢ä¸Šèƒ½ç”¨çš„æ•°æ®ï¼Œæˆ–è€…æ˜¯jsonè¿”å›èƒ½ç”¨çš„æ•°æ®éƒ½æ˜¯é€šè¿‡errorAttributes.getErrorAttributeså¾—åˆ°ï¼›</p>
<p>â€‹            å®¹å™¨ä¸­DefaultErrorAttributes.getErrorAttributes()ï¼›é»˜è®¤è¿›è¡Œæ•°æ®å¤„ç†çš„ï¼›</p>
<p>è‡ªå®šä¹‰ErrorAttributes</p>
<pre><code class="java">//ç»™å®¹å™¨ä¸­åŠ å…¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ErrorAttributes
@Component
public class MyErrorAttributes extends DefaultErrorAttributes &#123;

    @Override
    public Map&lt;String, Object&gt; getErrorAttributes(RequestAttributes requestAttributes, boolean includeStackTrace) &#123;
        Map&lt;String, Object&gt; map = super.getErrorAttributes(requestAttributes, includeStackTrace);
        map.put(&quot;company&quot;,&quot;atguigu&quot;);
        return map;
    &#125;
&#125;</code></pre>
<p>æœ€ç»ˆçš„æ•ˆæœï¼šå“åº”æ˜¯è‡ªé€‚åº”çš„ï¼Œå¯ä»¥é€šè¿‡å®šåˆ¶ErrorAttributesæ”¹å˜éœ€è¦è¿”å›çš„å†…å®¹ï¼Œ</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180228135513.png"></p>
<h2 id="8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨"><a href="#8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨" class="headerlink" title="8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨"></a>8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨</h2><p>SpringBooté»˜è®¤ä½¿ç”¨Tomcatä½œä¸ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180301142915.png"></p>
<p>é—®é¢˜ï¼Ÿ</p>
<h3 id="1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›"><a href="#1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›" class="headerlink" title="1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›"></a>1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</h3><p>1ã€ä¿®æ”¹å’Œserveræœ‰å…³çš„é…ç½®ï¼ˆServerPropertiesã€ä¹Ÿæ˜¯EmbeddedServletContainerCustomizerã€‘ï¼‰ï¼›</p>
<pre><code class="properties">server.port=8081
server.context-path=/crud

server.tomcat.uri-encoding=UTF-8

//é€šç”¨çš„Servletå®¹å™¨è®¾ç½®
server.xxx
//Tomcatçš„è®¾ç½®
server.tomcat.xxx</code></pre>
<p>2ã€ç¼–å†™ä¸€ä¸ª<strong>EmbeddedServletContainerCustomizer</strong>ï¼šåµŒå…¥å¼çš„Servletå®¹å™¨çš„å®šåˆ¶å™¨ï¼›æ¥ä¿®æ”¹Servletå®¹å™¨çš„é…ç½®</p>
<pre><code class="java">@Bean  //ä¸€å®šè¦å°†è¿™ä¸ªå®šåˆ¶å™¨åŠ å…¥åˆ°å®¹å™¨ä¸­
public EmbeddedServletContainerCustomizer embeddedServletContainerCustomizer()&#123;
    return new EmbeddedServletContainerCustomizer() &#123;

        //å®šåˆ¶åµŒå…¥å¼çš„Servletå®¹å™¨ç›¸å…³çš„è§„åˆ™
        @Override
        public void customize(ConfigurableEmbeddedServletContainer container) &#123;
            container.setPort(8083);
        &#125;
    &#125;;
&#125;</code></pre>
<h3 id="2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘"><a href="#2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘" class="headerlink" title="2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘"></a>2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘</h3><p>ç”±äºSpringBooté»˜è®¤æ˜¯ä»¥jaråŒ…çš„æ–¹å¼å¯åŠ¨åµŒå…¥å¼çš„Servletå®¹å™¨æ¥å¯åŠ¨SpringBootçš„webåº”ç”¨ï¼Œæ²¡æœ‰web.xmlæ–‡ä»¶ã€‚</p>
<p>æ³¨å†Œä¸‰å¤§ç»„ä»¶ç”¨ä»¥ä¸‹æ–¹å¼</p>
<p>ServletRegistrationBean</p>
<pre><code class="java">//æ³¨å†Œä¸‰å¤§ç»„ä»¶
@Bean
public ServletRegistrationBean myServlet()&#123;
    ServletRegistrationBean registrationBean = new ServletRegistrationBean(new MyServlet(),&quot;/myServlet&quot;);
    return registrationBean;
&#125;
</code></pre>
<p>FilterRegistrationBean</p>
<pre><code class="java">@Bean
public FilterRegistrationBean myFilter()&#123;
    FilterRegistrationBean registrationBean = new FilterRegistrationBean();
    registrationBean.setFilter(new MyFilter());
    registrationBean.setUrlPatterns(Arrays.asList(&quot;/hello&quot;,&quot;/myServlet&quot;));
    return registrationBean;
&#125;</code></pre>
<p>ServletListenerRegistrationBean</p>
<pre><code class="java">@Bean
public ServletListenerRegistrationBean myListener()&#123;
    ServletListenerRegistrationBean&lt;MyListener&gt; registrationBean = new ServletListenerRegistrationBean&lt;&gt;(new MyListener());
    return registrationBean;
&#125;</code></pre>
<p>SpringBootå¸®æˆ‘ä»¬è‡ªåŠ¨SpringMVCçš„æ—¶å€™ï¼Œè‡ªåŠ¨çš„æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼›DIspatcherServletï¼›</p>
<p>DispatcherServletAutoConfigurationä¸­ï¼š</p>
<pre><code class="java">@Bean(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)
@ConditionalOnBean(value = DispatcherServlet.class, name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)
public ServletRegistrationBean dispatcherServletRegistration(
      DispatcherServlet dispatcherServlet) &#123;
   ServletRegistrationBean registration = new ServletRegistrationBean(
         dispatcherServlet, this.serverProperties.getServletMapping());
    //é»˜è®¤æ‹¦æˆªï¼š /  æ‰€æœ‰è¯·æ±‚ï¼›åŒ…é™æ€èµ„æºï¼Œä½†æ˜¯ä¸æ‹¦æˆªjspè¯·æ±‚ï¼›   /*ä¼šæ‹¦æˆªjsp
    //å¯ä»¥é€šè¿‡server.servletPathæ¥ä¿®æ”¹SpringMVCå‰ç«¯æ§åˆ¶å™¨é»˜è®¤æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„

   registration.setName(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME);
   registration.setLoadOnStartup(
         this.webMvcProperties.getServlet().getLoadOnStartup());
   if (this.multipartConfig != null) &#123;
      registration.setMultipartConfig(this.multipartConfig);
   &#125;
   return registration;
&#125;
</code></pre>
<p>2ï¼‰ã€SpringBootèƒ½ä¸èƒ½æ”¯æŒå…¶ä»–çš„Servletå®¹å™¨ï¼›</p>
<h3 id="3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨"><a href="#3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨" class="headerlink" title="3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨"></a>3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨</h3><p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302114401.png"></p>
<p>é»˜è®¤æ”¯æŒï¼š</p>
<p>Tomcatï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰</p>
<pre><code class="xml">&lt;dependency&gt;
   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
   å¼•å…¥webæ¨¡å—é»˜è®¤å°±æ˜¯ä½¿ç”¨åµŒå…¥å¼çš„Tomcatä½œä¸ºServletå®¹å™¨ï¼›
&lt;/dependency&gt;</code></pre>
<p>Jetty</p>
<pre><code class="xml">&lt;!-- å¼•å…¥webæ¨¡å— --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
   &lt;exclusions&gt;
      &lt;exclusion&gt;
         &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;/exclusion&gt;
   &lt;/exclusions&gt;
&lt;/dependency&gt;

&lt;!--å¼•å…¥å…¶ä»–çš„Servletå®¹å™¨--&gt;
&lt;dependency&gt;
   &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;
   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;/dependency&gt;</code></pre>
<p>Undertow</p>
<pre><code class="xml">&lt;!-- å¼•å…¥webæ¨¡å— --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
   &lt;exclusions&gt;
      &lt;exclusion&gt;
         &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;/exclusion&gt;
   &lt;/exclusions&gt;
&lt;/dependency&gt;

&lt;!--å¼•å…¥å…¶ä»–çš„Servletå®¹å™¨--&gt;
&lt;dependency&gt;
   &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;
   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;/dependency&gt;</code></pre>
<h3 id="4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›"><a href="#4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›" class="headerlink" title="4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›"></a>4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›</h3><p>EmbeddedServletContainerAutoConfigurationï¼šåµŒå…¥å¼çš„Servletå®¹å™¨è‡ªåŠ¨é…ç½®ï¼Ÿ</p>
<pre><code class="java">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)
@Configuration
@ConditionalOnWebApplication
@Import(BeanPostProcessorsRegistrar.class)
//å¯¼å…¥BeanPostProcessorsRegistrarï¼šSpringæ³¨è§£ç‰ˆï¼›ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶
//å¯¼å…¥äº†EmbeddedServletContainerCustomizerBeanPostProcessorï¼š
//åç½®å¤„ç†å™¨ï¼šbeanåˆå§‹åŒ–å‰åï¼ˆåˆ›å»ºå®Œå¯¹è±¡ï¼Œè¿˜æ²¡èµ‹å€¼èµ‹å€¼ï¼‰æ‰§è¡Œåˆå§‹åŒ–å·¥ä½œ
public class EmbeddedServletContainerAutoConfiguration &#123;

    @Configuration
    @ConditionalOnClass(&#123; Servlet.class, Tomcat.class &#125;)//åˆ¤æ–­å½“å‰æ˜¯å¦å¼•å…¥äº†Tomcatä¾èµ–ï¼›
    @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)//åˆ¤æ–­å½“å‰å®¹å™¨æ²¡æœ‰ç”¨æˆ·è‡ªå·±å®šä¹‰EmbeddedServletContainerFactoryï¼šåµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼›ä½œç”¨ï¼šåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨
    public static class EmbeddedTomcat &#123;

        @Bean
        public TomcatEmbeddedServletContainerFactory tomcatEmbeddedServletContainerFactory() &#123;
            return new TomcatEmbeddedServletContainerFactory();
        &#125;

    &#125;

    /**
     * Nested configuration if Jetty is being used.
     */
    @Configuration
    @ConditionalOnClass(&#123; Servlet.class, Server.class, Loader.class,
            WebAppContext.class &#125;)
    @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)
    public static class EmbeddedJetty &#123;

        @Bean
        public JettyEmbeddedServletContainerFactory jettyEmbeddedServletContainerFactory() &#123;
            return new JettyEmbeddedServletContainerFactory();
        &#125;

    &#125;

    /**
     * Nested configuration if Undertow is being used.
     */
    @Configuration
    @ConditionalOnClass(&#123; Servlet.class, Undertow.class, SslClientAuthMode.class &#125;)
    @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)
    public static class EmbeddedUndertow &#123;

        @Bean
        public UndertowEmbeddedServletContainerFactory undertowEmbeddedServletContainerFactory() &#123;
            return new UndertowEmbeddedServletContainerFactory();
        &#125;

    &#125;</code></pre>
<p>1ï¼‰ã€EmbeddedServletContainerFactoryï¼ˆåµŒå…¥å¼Servletå®¹å™¨å·¥å‚ï¼‰</p>
<pre><code class="java">public interface EmbeddedServletContainerFactory &#123;

   //è·å–åµŒå…¥å¼çš„Servletå®¹å™¨
   EmbeddedServletContainer getEmbeddedServletContainer(
         ServletContextInitializer... initializers);

&#125;</code></pre>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302144835.png"></p>
<p>2ï¼‰ã€EmbeddedServletContainerï¼šï¼ˆåµŒå…¥å¼çš„Servletå®¹å™¨ï¼‰</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302144910.png"></p>
<p>3ï¼‰ã€ä»¥<strong>TomcatEmbeddedServletContainerFactory</strong>ä¸ºä¾‹</p>
<pre><code class="java">@Override
public EmbeddedServletContainer getEmbeddedServletContainer(
      ServletContextInitializer... initializers) &#123;
    //åˆ›å»ºä¸€ä¸ªTomcat
   Tomcat tomcat = new Tomcat();

    //é…ç½®Tomcatçš„åŸºæœ¬ç¯èŠ‚
   File baseDir = (this.baseDirectory != null ? this.baseDirectory
         : createTempDir(&quot;tomcat&quot;));
   tomcat.setBaseDir(baseDir.getAbsolutePath());
   Connector connector = new Connector(this.protocol);
   tomcat.getService().addConnector(connector);
   customizeConnector(connector);
   tomcat.setConnector(connector);
   tomcat.getHost().setAutoDeploy(false);
   configureEngine(tomcat.getEngine());
   for (Connector additionalConnector : this.additionalTomcatConnectors) &#123;
      tomcat.getService().addConnector(additionalConnector);
   &#125;
   prepareContext(tomcat.getHost(), initializers);

    //å°†é…ç½®å¥½çš„Tomcatä¼ å…¥è¿›å»ï¼Œè¿”å›ä¸€ä¸ªEmbeddedServletContainerï¼›å¹¶ä¸”å¯åŠ¨TomcatæœåŠ¡å™¨
   return getTomcatEmbeddedServletContainer(tomcat);
&#125;</code></pre>
<p>4ï¼‰ã€æˆ‘ä»¬å¯¹åµŒå…¥å¼å®¹å™¨çš„é…ç½®ä¿®æ”¹æ˜¯æ€ä¹ˆç”Ÿæ•ˆï¼Ÿ</p>
<pre><code>ServerPropertiesã€EmbeddedServletContainerCustomizer</code></pre>
<p><strong>EmbeddedServletContainerCustomizer</strong>ï¼šå®šåˆ¶å™¨å¸®æˆ‘ä»¬ä¿®æ”¹äº†Servletå®¹å™¨çš„é…ç½®ï¼Ÿ</p>
<p>æ€ä¹ˆä¿®æ”¹çš„åŸç†ï¼Ÿ</p>
<p>5ï¼‰ã€å®¹å™¨ä¸­å¯¼å…¥äº†<strong>EmbeddedServletContainerCustomizerBeanPostProcessor</strong></p>
<pre><code class="java">//åˆå§‹åŒ–ä¹‹å‰
@Override
public Object postProcessBeforeInitialization(Object bean, String beanName)
      throws BeansException &#123;
    //å¦‚æœå½“å‰åˆå§‹åŒ–çš„æ˜¯ä¸€ä¸ªConfigurableEmbeddedServletContainerç±»å‹çš„ç»„ä»¶
   if (bean instanceof ConfigurableEmbeddedServletContainer) &#123;
       //
      postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer) bean);
   &#125;
   return bean;
&#125;

private void postProcessBeforeInitialization(
            ConfigurableEmbeddedServletContainer bean) &#123;
    //è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå®šåˆ¶å™¨çš„customizeæ–¹æ³•æ¥ç»™Servletå®¹å™¨è¿›è¡Œå±æ€§èµ‹å€¼ï¼›
    for (EmbeddedServletContainerCustomizer customizer : getCustomizers()) &#123;
        customizer.customize(bean);
    &#125;
&#125;

private Collection&lt;EmbeddedServletContainerCustomizer&gt; getCustomizers() &#123;
    if (this.customizers == null) &#123;
        // Look up does not include the parent context
        this.customizers = new ArrayList&lt;EmbeddedServletContainerCustomizer&gt;(
            this.beanFactory
            //ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰è¿™è‘›ç±»å‹çš„ç»„ä»¶ï¼šEmbeddedServletContainerCustomizer
            //å®šåˆ¶Servletå®¹å™¨ï¼Œç»™å®¹å™¨ä¸­å¯ä»¥æ·»åŠ ä¸€ä¸ªEmbeddedServletContainerCustomizerç±»å‹çš„ç»„ä»¶
            .getBeansOfType(EmbeddedServletContainerCustomizer.class,
                            false, false)
            .values());
        Collections.sort(this.customizers, AnnotationAwareOrderComparator.INSTANCE);
        this.customizers = Collections.unmodifiableList(this.customizers);
    &#125;
    return this.customizers;
&#125;

ServerPropertiesä¹Ÿæ˜¯å®šåˆ¶å™¨</code></pre>
<p>æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€SpringBootæ ¹æ®å¯¼å…¥çš„ä¾èµ–æƒ…å†µï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç›¸åº”çš„EmbeddedServletContainerFactoryã€TomcatEmbeddedServletContainerFactoryã€‘</p>
<p>2ï¼‰ã€å®¹å™¨ä¸­æŸä¸ªç»„ä»¶è¦åˆ›å»ºå¯¹è±¡å°±ä¼šæƒŠåŠ¨åç½®å¤„ç†å™¨ï¼›EmbeddedServletContainerCustomizerBeanPostProcessorï¼›</p>
<p>åªè¦æ˜¯åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼Œåç½®å¤„ç†å™¨å°±å·¥ä½œï¼›</p>
<p>3ï¼‰ã€åç½®å¤„ç†å™¨ï¼Œä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„<strong>EmbeddedServletContainerCustomizer</strong>ï¼Œè°ƒç”¨å®šåˆ¶å™¨çš„å®šåˆ¶æ–¹æ³•</p>
<p>###5ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨å¯åŠ¨åŸç†ï¼›</p>
<p>ä»€ä¹ˆæ—¶å€™åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼Ÿä»€ä¹ˆæ—¶å€™è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å¹¶å¯åŠ¨Tomcatï¼›</p>
<p>è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼š</p>
<p>1ï¼‰ã€SpringBootåº”ç”¨å¯åŠ¨è¿è¡Œrunæ–¹æ³•</p>
<p>2ï¼‰ã€refreshContext(context);SpringBootåˆ·æ–°IOCå®¹å™¨ã€åˆ›å»ºIOCå®¹å™¨å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å®¹å™¨ï¼Œåˆ›å»ºå®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶ã€‘ï¼›å¦‚æœæ˜¯webåº”ç”¨åˆ›å»º<strong>AnnotationConfigEmbeddedWebApplicationContext</strong>ï¼Œå¦åˆ™ï¼š<strong>AnnotationConfigApplicationContext</strong></p>
<p>3ï¼‰ã€refresh(context);<strong>åˆ·æ–°åˆšæ‰åˆ›å»ºå¥½çš„iocå®¹å™¨ï¼›</strong></p>
<pre><code class="java">public void refresh() throws BeansException, IllegalStateException &#123;
   synchronized (this.startupShutdownMonitor) &#123;
      // Prepare this context for refreshing.
      prepareRefresh();

      // Tell the subclass to refresh the internal bean factory.
      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();

      // Prepare the bean factory for use in this context.
      prepareBeanFactory(beanFactory);

      try &#123;
         // Allows post-processing of the bean factory in context subclasses.
         postProcessBeanFactory(beanFactory);

         // Invoke factory processors registered as beans in the context.
         invokeBeanFactoryPostProcessors(beanFactory);

         // Register bean processors that intercept bean creation.
         registerBeanPostProcessors(beanFactory);

         // Initialize message source for this context.
         initMessageSource();

         // Initialize event multicaster for this context.
         initApplicationEventMulticaster();

         // Initialize other special beans in specific context subclasses.
         onRefresh();

         // Check for listener beans and register them.
         registerListeners();

         // Instantiate all remaining (non-lazy-init) singletons.
         finishBeanFactoryInitialization(beanFactory);

         // Last step: publish corresponding event.
         finishRefresh();
      &#125;

      catch (BeansException ex) &#123;
         if (logger.isWarnEnabled()) &#123;
            logger.warn(&quot;Exception encountered during context initialization - &quot; +
                  &quot;cancelling refresh attempt: &quot; + ex);
         &#125;

         // Destroy already created singletons to avoid dangling resources.
         destroyBeans();

         // Reset &#39;active&#39; flag.
         cancelRefresh(ex);

         // Propagate exception to caller.
         throw ex;
      &#125;

      finally &#123;
         // Reset common introspection caches in Spring&#39;s core, since we
         // might not ever need metadata for singleton beans anymore...
         resetCommonCaches();
      &#125;
   &#125;
&#125;</code></pre>
<p>4ï¼‰ã€  onRefresh(); webçš„iocå®¹å™¨é‡å†™äº†onRefreshæ–¹æ³•</p>
<p>5ï¼‰ã€webiocå®¹å™¨ä¼šåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›<strong>createEmbeddedServletContainer</strong>();</p>
<p><strong>6ï¼‰ã€è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼š</strong></p>
<p>EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory();</p>
<p>â€‹    ä»iocå®¹å™¨ä¸­è·å–EmbeddedServletContainerFactory ç»„ä»¶ï¼›<strong>TomcatEmbeddedServletContainerFactory</strong>åˆ›å»ºå¯¹è±¡ï¼Œåç½®å¤„ç†å™¨ä¸€çœ‹æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå°±è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨æ¥å…ˆå®šåˆ¶Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</p>
<p>7ï¼‰ã€<strong>ä½¿ç”¨å®¹å™¨å·¥å‚è·å–åµŒå…¥å¼çš„Servletå®¹å™¨</strong>ï¼šthis.embeddedServletContainer = containerFactory      .getEmbeddedServletContainer(getSelfInitializer());</p>
<p>8ï¼‰ã€åµŒå…¥å¼çš„Servletå®¹å™¨åˆ›å»ºå¯¹è±¡å¹¶å¯åŠ¨Servletå®¹å™¨ï¼›</p>
<p><strong>å…ˆå¯åŠ¨åµŒå…¥å¼çš„Servletå®¹å™¨ï¼Œå†å°†iocå®¹å™¨ä¸­å‰©ä¸‹æ²¡æœ‰åˆ›å»ºå‡ºçš„å¯¹è±¡è·å–å‡ºæ¥ï¼›</strong></p>
<p><strong>==IOCå®¹å™¨å¯åŠ¨åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨==</strong></p>
<h2 id="9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨"><a href="#9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨" class="headerlink" title="9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨"></a>9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨</h2><p>åµŒå…¥å¼Servletå®¹å™¨ï¼šåº”ç”¨æ‰“æˆå¯æ‰§è¡Œçš„jar</p>
<p>â€‹        ä¼˜ç‚¹ï¼šç®€å•ã€ä¾¿æºï¼›</p>
<p>â€‹        ç¼ºç‚¹ï¼šé»˜è®¤ä¸æ”¯æŒJSPã€ä¼˜åŒ–å®šåˆ¶æ¯”è¾ƒå¤æ‚ï¼ˆä½¿ç”¨å®šåˆ¶å™¨ã€ServerPropertiesã€è‡ªå®šä¹‰EmbeddedServletContainerCustomizerã€‘ï¼Œè‡ªå·±ç¼–å†™åµŒå…¥å¼Servletå®¹å™¨çš„åˆ›å»ºå·¥å‚ã€EmbeddedServletContainerFactoryã€‘ï¼‰ï¼›</p>
<p>å¤–ç½®çš„Servletå®¹å™¨ï¼šå¤–é¢å®‰è£…Tomcatâ€”åº”ç”¨waråŒ…çš„æ–¹å¼æ‰“åŒ…ï¼›</p>
<h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><p>1ï¼‰ã€å¿…é¡»åˆ›å»ºä¸€ä¸ªwaré¡¹ç›®ï¼›ï¼ˆåˆ©ç”¨ideaåˆ›å»ºå¥½ç›®å½•ç»“æ„ï¼‰</p>
<p>2ï¼‰ã€å°†åµŒå…¥å¼çš„TomcatæŒ‡å®šä¸ºprovidedï¼›</p>
<pre><code class="xml">&lt;dependency&gt;
   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
   &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
   &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
<p>3ï¼‰ã€å¿…é¡»ç¼–å†™ä¸€ä¸ª<strong>SpringBootServletInitializer</strong>çš„å­ç±»ï¼Œå¹¶è°ƒç”¨configureæ–¹æ³•</p>
<pre><code class="java">public class ServletInitializer extends SpringBootServletInitializer &#123;

   @Override
   protected SpringApplicationBuilder configure(SpringApplicationBuilder application) &#123;
       //ä¼ å…¥SpringBootåº”ç”¨çš„ä¸»ç¨‹åº
      return application.sources(SpringBoot04WebJspApplication.class);
   &#125;

&#125;</code></pre>
<p>4ï¼‰ã€å¯åŠ¨æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨ï¼›</p>
<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>jaråŒ…ï¼šæ‰§è¡ŒSpringBootä¸»ç±»çš„mainæ–¹æ³•ï¼Œå¯åŠ¨iocå®¹å™¨ï¼Œåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›</p>
<p>waråŒ…ï¼šå¯åŠ¨æœåŠ¡å™¨ï¼Œ<strong>æœåŠ¡å™¨å¯åŠ¨SpringBootåº”ç”¨</strong>ã€SpringBootServletInitializerã€‘ï¼Œå¯åŠ¨iocå®¹å™¨ï¼›</p>
<p>servlet3.0ï¼ˆSpringæ³¨è§£ç‰ˆï¼‰ï¼š</p>
<p>8.2.4 Shared libraries / runtimes pluggabilityï¼š</p>
<p>è§„åˆ™ï¼š</p>
<p>â€‹    1ï¼‰ã€æœåŠ¡å™¨å¯åŠ¨ï¼ˆwebåº”ç”¨å¯åŠ¨ï¼‰ä¼šåˆ›å»ºå½“å‰webåº”ç”¨é‡Œé¢æ¯ä¸€ä¸ªjaråŒ…é‡Œé¢ServletContainerInitializerå®ä¾‹ï¼š</p>
<p>â€‹    2ï¼‰ã€ServletContainerInitializerçš„å®ç°æ”¾åœ¨jaråŒ…çš„META-INF/servicesæ–‡ä»¶å¤¹ä¸‹ï¼Œæœ‰ä¸€ä¸ªåä¸ºjavax.servlet.ServletContainerInitializerçš„æ–‡ä»¶ï¼Œå†…å®¹å°±æ˜¯ServletContainerInitializerçš„å®ç°ç±»çš„å…¨ç±»å</p>
<p>â€‹    3ï¼‰ã€è¿˜å¯ä»¥ä½¿ç”¨@HandlesTypesï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™åŠ è½½æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç±»ï¼›</p>
<p>æµç¨‹ï¼š</p>
<p>1ï¼‰ã€å¯åŠ¨Tomcat</p>
<p>2ï¼‰ã€org\springframework\spring-web\4.3.14.RELEASE\spring-web-4.3.14.RELEASE.jar!\META-INF\services\javax.servlet.ServletContainerInitializerï¼š</p>
<p>Springçš„webæ¨¡å—é‡Œé¢æœ‰è¿™ä¸ªæ–‡ä»¶ï¼š<strong>org.springframework.web.SpringServletContainerInitializer</strong></p>
<p>3ï¼‰ã€SpringServletContainerInitializerå°†@HandlesTypes(WebApplicationInitializer.class)æ ‡æ³¨çš„æ‰€æœ‰è¿™ä¸ªç±»å‹çš„ç±»éƒ½ä¼ å…¥åˆ°onStartupæ–¹æ³•çš„Set&lt;Class&lt;?&gt;&gt;ï¼›ä¸ºè¿™äº›WebApplicationInitializerç±»å‹çš„ç±»åˆ›å»ºå®ä¾‹ï¼›</p>
<p>4ï¼‰ã€æ¯ä¸€ä¸ªWebApplicationInitializeréƒ½è°ƒç”¨è‡ªå·±çš„onStartupï¼›</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302221835.png"></p>
<p>5ï¼‰ã€ç›¸å½“äºæˆ‘ä»¬çš„SpringBootServletInitializerçš„ç±»ä¼šè¢«åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ‰§è¡ŒonStartupæ–¹æ³•</p>
<p>6ï¼‰ã€SpringBootServletInitializerå®ä¾‹æ‰§è¡ŒonStartupçš„æ—¶å€™ä¼šcreateRootApplicationContextï¼›åˆ›å»ºå®¹å™¨</p>
<pre><code class="java">protected WebApplicationContext createRootApplicationContext(
      ServletContext servletContext) &#123;
    //1ã€åˆ›å»ºSpringApplicationBuilder
   SpringApplicationBuilder builder = createSpringApplicationBuilder();
   StandardServletEnvironment environment = new StandardServletEnvironment();
   environment.initPropertySources(servletContext, null);
   builder.environment(environment);
   builder.main(getClass());
   ApplicationContext parent = getExistingRootWebApplicationContext(servletContext);
   if (parent != null) &#123;
      this.logger.info(&quot;Root context already created (using as parent).&quot;);
      servletContext.setAttribute(
            WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, null);
      builder.initializers(new ParentContextApplicationContextInitializer(parent));
   &#125;
   builder.initializers(
         new ServletContextApplicationContextInitializer(servletContext));
   builder.contextClass(AnnotationConfigEmbeddedWebApplicationContext.class);

    //è°ƒç”¨configureæ–¹æ³•ï¼Œå­ç±»é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°†SpringBootçš„ä¸»ç¨‹åºç±»ä¼ å…¥äº†è¿›æ¥
   builder = configure(builder);

    //ä½¿ç”¨builderåˆ›å»ºä¸€ä¸ªSpringåº”ç”¨
   SpringApplication application = builder.build();
   if (application.getSources().isEmpty() &amp;&amp; AnnotationUtils
         .findAnnotation(getClass(), Configuration.class) != null) &#123;
      application.getSources().add(getClass());
   &#125;
   Assert.state(!application.getSources().isEmpty(),
         &quot;No SpringApplication sources have been defined. Either override the &quot;
               + &quot;configure method or add an @Configuration annotation&quot;);
   // Ensure error pages are registered
   if (this.registerErrorPageFilter) &#123;
      application.getSources().add(ErrorPageFilterConfiguration.class);
   &#125;
    //å¯åŠ¨Springåº”ç”¨
   return run(application);
&#125;</code></pre>
<p>7ï¼‰ã€Springçš„åº”ç”¨å°±å¯åŠ¨å¹¶ä¸”åˆ›å»ºIOCå®¹å™¨</p>
<pre><code class="java">public ConfigurableApplicationContext run(String... args) &#123;
   StopWatch stopWatch = new StopWatch();
   stopWatch.start();
   ConfigurableApplicationContext context = null;
   FailureAnalyzers analyzers = null;
   configureHeadlessProperty();
   SpringApplicationRunListeners listeners = getRunListeners(args);
   listeners.starting();
   try &#123;
      ApplicationArguments applicationArguments = new DefaultApplicationArguments(
            args);
      ConfigurableEnvironment environment = prepareEnvironment(listeners,
            applicationArguments);
      Banner printedBanner = printBanner(environment);
      context = createApplicationContext();
      analyzers = new FailureAnalyzers(context);
      prepareContext(context, environment, listeners, applicationArguments,
            printedBanner);

       //åˆ·æ–°IOCå®¹å™¨
      refreshContext(context);
      afterRefresh(context, applicationArguments);
      listeners.finished(context, null);
      stopWatch.stop();
      if (this.logStartupInfo) &#123;
         new StartupInfoLogger(this.mainApplicationClass)
               .logStarted(getApplicationLog(), stopWatch);
      &#125;
      return context;
   &#125;
   catch (Throwable ex) &#123;
      handleRunFailure(context, listeners, analyzers, ex);
      throw new IllegalStateException(ex);
   &#125;
&#125;</code></pre>
<p><strong>==å¯åŠ¨Servletå®¹å™¨ï¼Œå†å¯åŠ¨SpringBootåº”ç”¨==</strong></p>
<h1 id="äº”ã€Docker"><a href="#äº”ã€Docker" class="headerlink" title="äº”ã€Docker"></a>äº”ã€Docker</h1><h2 id="1ã€ç®€ä»‹-1"><a href="#1ã€ç®€ä»‹-1" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><p><strong>Docker</strong>æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼›æ˜¯ä¸€ä¸ªè½»é‡çº§å®¹å™¨æŠ€æœ¯ï¼›</p>
<p>Dockeræ”¯æŒå°†è½¯ä»¶ç¼–è¯‘æˆä¸€ä¸ªé•œåƒï¼›ç„¶ååœ¨é•œåƒä¸­å„ç§è½¯ä»¶åšå¥½é…ç½®ï¼Œå°†é•œåƒå‘å¸ƒå‡ºå»ï¼Œå…¶ä»–ä½¿ç”¨è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒï¼›</p>
<p>è¿è¡Œä¸­çš„è¿™ä¸ªé•œåƒç§°ä¸ºå®¹å™¨ï¼Œå®¹å™¨å¯åŠ¨æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180303145450.png"></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180303145531.png"></p>
<h2 id="2ã€æ ¸å¿ƒæ¦‚å¿µ"><a href="#2ã€æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2ã€æ ¸å¿ƒæ¦‚å¿µ"></a>2ã€æ ¸å¿ƒæ¦‚å¿µ</h2><p>dockerä¸»æœº(Host)ï¼šå®‰è£…äº†Dockerç¨‹åºçš„æœºå™¨ï¼ˆDockerç›´æ¥å®‰è£…åœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼‰ï¼›</p>
<p>dockerå®¢æˆ·ç«¯(Client)ï¼šè¿æ¥dockerä¸»æœºè¿›è¡Œæ“ä½œï¼›</p>
<p>dockerä»“åº“(Registry)ï¼šç”¨æ¥ä¿å­˜å„ç§æ‰“åŒ…å¥½çš„è½¯ä»¶é•œåƒï¼›</p>
<p>dockeré•œåƒ(Images)ï¼šè½¯ä»¶æ‰“åŒ…å¥½çš„é•œåƒï¼›æ”¾åœ¨dockerä»“åº“ä¸­ï¼›</p>
<p>dockerå®¹å™¨(Container)ï¼šé•œåƒå¯åŠ¨åçš„å®ä¾‹ç§°ä¸ºä¸€ä¸ªå®¹å™¨ï¼›å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180303165113.png"></p>
<p>ä½¿ç”¨Dockerçš„æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€å®‰è£…Docker</p>
<p>2ï¼‰ã€å»Dockerä»“åº“æ‰¾åˆ°è¿™ä¸ªè½¯ä»¶å¯¹åº”çš„é•œåƒï¼›</p>
<p>3ï¼‰ã€ä½¿ç”¨Dockerè¿è¡Œè¿™ä¸ªé•œåƒï¼Œè¿™ä¸ªé•œåƒå°±ä¼šç”Ÿæˆä¸€ä¸ªDockerå®¹å™¨ï¼›</p>
<p>4ï¼‰ã€å¯¹å®¹å™¨çš„å¯åŠ¨åœæ­¢å°±æ˜¯å¯¹è½¯ä»¶çš„å¯åŠ¨åœæ­¢ï¼›</p>
<h2 id="3ã€å®‰è£…Docker"><a href="#3ã€å®‰è£…Docker" class="headerlink" title="3ã€å®‰è£…Docker"></a>3ã€å®‰è£…Docker</h2><h4 id="1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº"><a href="#1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº" class="headerlink" title="1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº"></a>1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº</h4><p>â€‹    1ï¼‰ã€VMWareã€VirtualBoxï¼ˆå®‰è£…ï¼‰ï¼›</p>
<p>â€‹    2ï¼‰ã€å¯¼å…¥è™šæ‹Ÿæœºæ–‡ä»¶centos7-atguigu.ovaï¼›</p>
<p>â€‹    3ï¼‰ã€åŒå‡»å¯åŠ¨linuxè™šæ‹Ÿæœº;ä½¿ç”¨  root/ 123456ç™»é™†</p>
<p>â€‹    4ï¼‰ã€ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥linuxæœåŠ¡å™¨è¿›è¡Œå‘½ä»¤æ“ä½œï¼›</p>
<p>â€‹    5ï¼‰ã€è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œï¼›</p>
<p>â€‹        æ¡¥æ¥ç½‘ç»œ===é€‰å¥½ç½‘å¡====æ¥å…¥ç½‘çº¿ï¼›</p>
<p>â€‹    6ï¼‰ã€è®¾ç½®å¥½ç½‘ç»œä»¥åä½¿ç”¨å‘½ä»¤é‡å¯è™šæ‹Ÿæœºçš„ç½‘ç»œ</p>
<pre><code class="shell">service network restart</code></pre>
<p>â€‹    7ï¼‰ã€æŸ¥çœ‹linuxçš„ipåœ°å€</p>
<pre><code class="shell">ip addr</code></pre>
<p>â€‹    8ï¼‰ã€ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥linuxï¼›</p>
<h4 id="2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker"><a href="#2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker" class="headerlink" title="2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker"></a>2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker</h4><p>æ­¥éª¤ï¼š</p>
<pre><code class="shell">1ã€æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯3.10åŠä»¥ä¸Š
uname -r
2ã€å®‰è£…docker
yum install docker
3ã€è¾“å…¥yç¡®è®¤å®‰è£…
4ã€å¯åŠ¨docker
[root@localhost ~]# systemctl start docker
[root@localhost ~]# docker -v
Docker version 1.12.6, build 3e8e77d/1.12.6
5ã€å¼€æœºå¯åŠ¨docker
[root@localhost ~]# systemctl enable docker
Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.
6ã€åœæ­¢docker
systemctl stop docker</code></pre>
<h2 id="4ã€Dockerå¸¸ç”¨å‘½ä»¤-amp-æ“ä½œ"><a href="#4ã€Dockerå¸¸ç”¨å‘½ä»¤-amp-æ“ä½œ" class="headerlink" title="4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ"></a>4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ</h2><h3 id="1ï¼‰ã€é•œåƒæ“ä½œ"><a href="#1ï¼‰ã€é•œåƒæ“ä½œ" class="headerlink" title="1ï¼‰ã€é•œåƒæ“ä½œ"></a>1ï¼‰ã€é•œåƒæ“ä½œ</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>æ£€ç´¢</td>
<td>docker  search å…³é”®å­—  egï¼šdocker  search redis</td>
<td>æˆ‘ä»¬ç»å¸¸å»docker  hubä¸Šæ£€ç´¢é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚é•œåƒçš„TAGã€‚</td>
</tr>
<tr>
<td>æ‹‰å–</td>
<td>docker pull é•œåƒå:tag</td>
<td>:tagæ˜¯å¯é€‰çš„ï¼Œtagè¡¨ç¤ºæ ‡ç­¾ï¼Œå¤šä¸ºè½¯ä»¶çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯latest</td>
</tr>
<tr>
<td>åˆ—è¡¨</td>
<td>docker images</td>
<td>æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°é•œåƒ</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>docker rmi image-id</td>
<td>åˆ é™¤æŒ‡å®šçš„æœ¬åœ°é•œåƒ</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<h3 id="2ï¼‰ã€å®¹å™¨æ“ä½œ"><a href="#2ï¼‰ã€å®¹å™¨æ“ä½œ" class="headerlink" title="2ï¼‰ã€å®¹å™¨æ“ä½œ"></a>2ï¼‰ã€å®¹å™¨æ“ä½œ</h3><p>è½¯ä»¶é•œåƒï¼ˆQQå®‰è£…ç¨‹åºï¼‰â€”-è¿è¡Œé•œåƒâ€”-äº§ç”Ÿä¸€ä¸ªå®¹å™¨ï¼ˆæ­£åœ¨è¿è¡Œçš„è½¯ä»¶ï¼Œè¿è¡Œçš„QQï¼‰ï¼›</p>
<p>æ­¥éª¤ï¼š</p>
<pre><code class="shell">1ã€æœç´¢é•œåƒ
[root@localhost ~]# docker search tomcat
2ã€æ‹‰å–é•œåƒ
[root@localhost ~]# docker pull tomcat
3ã€æ ¹æ®é•œåƒå¯åŠ¨å®¹å™¨
docker run --name mytomcat -d tomcat:latest
4ã€docker ps  
æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
5ã€ åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨
docker stop  å®¹å™¨çš„id
6ã€æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨
docker ps -a
7ã€å¯åŠ¨å®¹å™¨
docker start å®¹å™¨id
8ã€åˆ é™¤ä¸€ä¸ªå®¹å™¨
 docker rm å®¹å™¨id
9ã€å¯åŠ¨ä¸€ä¸ªåšäº†ç«¯å£æ˜ å°„çš„tomcat
[root@localhost ~]# docker run -d -p 8888:8080 tomcat
-dï¼šåå°è¿è¡Œ
-p: å°†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ä¸€ä¸ªç«¯å£    ä¸»æœºç«¯å£:å®¹å™¨å†…éƒ¨çš„ç«¯å£

10ã€ä¸ºäº†æ¼”ç¤ºç®€å•å…³é—­äº†linuxçš„é˜²ç«å¢™
service firewalld status ï¼›æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
service firewalld stopï¼šå…³é—­é˜²ç«å¢™
11ã€æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—
docker logs container-name/container-id

æ›´å¤šå‘½ä»¤å‚çœ‹
https://docs.docker.com/engine/reference/commandline/docker/
å¯ä»¥å‚è€ƒæ¯ä¸€ä¸ªé•œåƒçš„æ–‡æ¡£
</code></pre>
<h3 id="3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹"><a href="#3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹" class="headerlink" title="3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹"></a>3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹</h3><pre><code class="shell">docker pull mysql</code></pre>
<p>é”™è¯¯çš„å¯åŠ¨</p>
<pre><code class="shell">[root@localhost ~]# docker run --name mysql01 -d mysql
42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846

mysqlé€€å‡ºäº†
[root@localhost ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES
42f09819908b        mysql               &quot;docker-entrypoint.sh&quot;   34 seconds ago      Exited (1) 33 seconds ago                            mysql01
538bde63e500        tomcat              &quot;catalina.sh run&quot;        About an hour ago   Exited (143) About an hour ago                       compassionate_
goldstine
c4f1ac60b3fc        tomcat              &quot;catalina.sh run&quot;        About an hour ago   Exited (143) About an hour ago                       lonely_fermi
81ec743a5271        tomcat              &quot;catalina.sh run&quot;        About an hour ago   Exited (143) About an hour ago                       sick_ramanujan


//é”™è¯¯æ—¥å¿—
[root@localhost ~]# docker logs 42f09819908b
error: database is uninitialized and password option is not specified 
  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORDï¼›è¿™ä¸ªä¸‰ä¸ªå‚æ•°å¿…é¡»æŒ‡å®šä¸€ä¸ª</code></pre>
<p>æ­£ç¡®çš„å¯åŠ¨</p>
<pre><code class="shell">[root@localhost ~]# docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql
b874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f
[root@localhost ~]# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
b874c56bec49        mysql               &quot;docker-entrypoint.sh&quot;   4 seconds ago       Up 3 seconds        3306/tcp            mysql01</code></pre>
<p>åšäº†ç«¯å£æ˜ å°„</p>
<pre><code class="shell">[root@localhost ~]# docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql
ad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434
[root@localhost ~]# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
ad10e4bc5c6a        mysql               &quot;docker-entrypoint.sh&quot;   4 seconds ago       Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp   mysql02</code></pre>
<p>å‡ ä¸ªå…¶ä»–çš„é«˜çº§æ“ä½œ</p>
<pre><code>docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag
æŠŠä¸»æœºçš„/conf/mysqlæ–‡ä»¶å¤¹æŒ‚è½½åˆ° mysqldockerå®¹å™¨çš„/etc/mysql/conf.dæ–‡ä»¶å¤¹é‡Œé¢
æ”¹mysqlçš„é…ç½®æ–‡ä»¶å°±åªéœ€è¦æŠŠmysqlé…ç½®æ–‡ä»¶æ”¾åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸‹ï¼ˆ/conf/mysqlï¼‰

docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
æŒ‡å®šmysqlçš„ä¸€äº›é…ç½®å‚æ•°</code></pre>
<h1 id="å…­ã€SpringBootä¸æ•°æ®è®¿é—®"><a href="#å…­ã€SpringBootä¸æ•°æ®è®¿é—®" class="headerlink" title="å…­ã€SpringBootä¸æ•°æ®è®¿é—®"></a>å…­ã€SpringBootä¸æ•°æ®è®¿é—®</h1><h2 id="1ã€JDBC"><a href="#1ã€JDBC" class="headerlink" title="1ã€JDBC"></a>1ã€JDBC</h2><pre><code class="xml">&lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;</code></pre>
<pre><code class="yaml">spring:
  datasource:
    username: root
    password: 123456
    url: jdbc:mysql://192.168.15.22:3306/jdbc
    driver-class-name: com.mysql.jdbc.Driver</code></pre>
<p>æ•ˆæœï¼š</p>
<p>â€‹    é»˜è®¤æ˜¯ç”¨org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºæ•°æ®æºï¼›</p>
<p>â€‹    æ•°æ®æºçš„ç›¸å…³é…ç½®éƒ½åœ¨DataSourcePropertiesé‡Œé¢ï¼›</p>
<p>è‡ªåŠ¨é…ç½®åŸç†ï¼š</p>
<p>org.springframework.boot.autoconfigure.jdbcï¼š</p>
<p>1ã€å‚è€ƒDataSourceConfigurationï¼Œæ ¹æ®é…ç½®åˆ›å»ºæ•°æ®æºï¼Œé»˜è®¤ä½¿ç”¨Tomcatè¿æ¥æ± ï¼›å¯ä»¥ä½¿ç”¨spring.datasource.typeæŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼›</p>
<p>2ã€SpringBooté»˜è®¤å¯ä»¥æ”¯æŒï¼›</p>
<pre><code>org.apache.tomcat.jdbc.pool.DataSourceã€HikariDataSourceã€BasicDataSourceã€</code></pre>
<p>3ã€è‡ªå®šä¹‰æ•°æ®æºç±»å‹</p>
<pre><code class="java">/**
 * Generic DataSource configuration.
 */
@ConditionalOnMissingBean(DataSource.class)
@ConditionalOnProperty(name = &quot;spring.datasource.type&quot;)
static class Generic &#123;

   @Bean
   public DataSource dataSource(DataSourceProperties properties) &#123;
       //ä½¿ç”¨DataSourceBuilderåˆ›å»ºæ•°æ®æºï¼Œåˆ©ç”¨åå°„åˆ›å»ºå“åº”typeçš„æ•°æ®æºï¼Œå¹¶ä¸”ç»‘å®šç›¸å…³å±æ€§
      return properties.initializeDataSourceBuilder().build();
   &#125;

&#125;</code></pre>
<p>4ã€<strong>DataSourceInitializerï¼šApplicationListener</strong>ï¼›</p>
<p>â€‹    ä½œç”¨ï¼š</p>
<p>â€‹        1ï¼‰ã€runSchemaScripts();è¿è¡Œå»ºè¡¨è¯­å¥ï¼›</p>
<p>â€‹        2ï¼‰ã€runDataScripts();è¿è¡Œæ’å…¥æ•°æ®çš„sqlè¯­å¥ï¼›</p>
<p>é»˜è®¤åªéœ€è¦å°†æ–‡ä»¶å‘½åä¸ºï¼š</p>
<pre><code class="properties">schema-*.sqlã€data-*.sql
é»˜è®¤è§„åˆ™ï¼šschema.sqlï¼Œschema-all.sqlï¼›
å¯ä»¥ä½¿ç”¨   
    schema:
      - classpath:department.sql
      æŒ‡å®šä½ç½®</code></pre>
<p>5ã€æ“ä½œæ•°æ®åº“ï¼šè‡ªåŠ¨é…ç½®äº†JdbcTemplateæ“ä½œæ•°æ®åº“</p>
<h2 id="2ã€æ•´åˆDruidæ•°æ®æº"><a href="#2ã€æ•´åˆDruidæ•°æ®æº" class="headerlink" title="2ã€æ•´åˆDruidæ•°æ®æº"></a>2ã€æ•´åˆDruidæ•°æ®æº</h2><pre><code class="java">å¯¼å…¥druidæ•°æ®æº
@Configuration
public class DruidConfig &#123;

    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)
    @Bean
    public DataSource druid()&#123;
       return  new DruidDataSource();
    &#125;

    //é…ç½®Druidçš„ç›‘æ§
    //1ã€é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet
    @Bean
    public ServletRegistrationBean statViewServlet()&#123;
        ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), &quot;/druid/*&quot;);
        Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;();

        initParams.put(&quot;loginUsername&quot;,&quot;admin&quot;);
        initParams.put(&quot;loginPassword&quot;,&quot;123456&quot;);
        initParams.put(&quot;allow&quot;,&quot;&quot;);//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—®
        initParams.put(&quot;deny&quot;,&quot;192.168.15.21&quot;);

        bean.setInitParameters(initParams);
        return bean;
    &#125;


    //2ã€é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter
    @Bean
    public FilterRegistrationBean webStatFilter()&#123;
        FilterRegistrationBean bean = new FilterRegistrationBean();
        bean.setFilter(new WebStatFilter());

        Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;();
        initParams.put(&quot;exclusions&quot;,&quot;*.js,*.css,/druid/*&quot;);

        bean.setInitParameters(initParams);

        bean.setUrlPatterns(Arrays.asList(&quot;/*&quot;));

        return  bean;
    &#125;
&#125;
</code></pre>
<h2 id="3ã€æ•´åˆMyBatis"><a href="#3ã€æ•´åˆMyBatis" class="headerlink" title="3ã€æ•´åˆMyBatis"></a>3ã€æ•´åˆMyBatis</h2><pre><code class="xml">        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.3.1&lt;/version&gt;
        &lt;/dependency&gt;</code></pre>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180305194443.png"></p>
<p>æ­¥éª¤ï¼š</p>
<p>â€‹    1ï¼‰ã€é…ç½®æ•°æ®æºç›¸å…³å±æ€§ï¼ˆè§ä¸Šä¸€èŠ‚Druidï¼‰</p>
<p>â€‹    2ï¼‰ã€ç»™æ•°æ®åº“å»ºè¡¨</p>
<p>â€‹    3ï¼‰ã€åˆ›å»ºJavaBean</p>
<h3 id="4ï¼‰ã€æ³¨è§£ç‰ˆ"><a href="#4ï¼‰ã€æ³¨è§£ç‰ˆ" class="headerlink" title="4ï¼‰ã€æ³¨è§£ç‰ˆ"></a>4ï¼‰ã€æ³¨è§£ç‰ˆ</h3><pre><code class="java">//æŒ‡å®šè¿™æ˜¯ä¸€ä¸ªæ“ä½œæ•°æ®åº“çš„mapper
@Mapper
public interface DepartmentMapper &#123;

    @Select(&quot;select * from department where id=#&#123;id&#125;&quot;)
    public Department getDeptById(Integer id);

    @Delete(&quot;delete from department where id=#&#123;id&#125;&quot;)
    public int deleteDeptById(Integer id);

    @Options(useGeneratedKeys = true,keyProperty = &quot;id&quot;)
    @Insert(&quot;insert into department(departmentName) values(#&#123;departmentName&#125;)&quot;)
    public int insertDept(Department department);

    @Update(&quot;update department set departmentName=#&#123;departmentName&#125; where id=#&#123;id&#125;&quot;)
    public int updateDept(Department department);
&#125;</code></pre>
<p>é—®é¢˜ï¼š</p>
<p>è‡ªå®šä¹‰MyBatisçš„é…ç½®è§„åˆ™ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªConfigurationCustomizerï¼›</p>
<pre><code class="java">@org.springframework.context.annotation.Configuration
public class MyBatisConfig &#123;

    @Bean
    public ConfigurationCustomizer configurationCustomizer()&#123;
        return new ConfigurationCustomizer()&#123;

            @Override
            public void customize(Configuration configuration) &#123;
                configuration.setMapUnderscoreToCamelCase(true);
            &#125;
        &#125;;
    &#125;
&#125;</code></pre>
<pre><code class="java">ä½¿ç”¨MapperScanæ‰¹é‡æ‰«ææ‰€æœ‰çš„Mapperæ¥å£ï¼›
@MapperScan(value = &quot;com.atguigu.springboot.mapper&quot;)
@SpringBootApplication
public class SpringBoot06DataMybatisApplication &#123;

    public static void main(String[] args) &#123;
        SpringApplication.run(SpringBoot06DataMybatisApplication.class, args);
    &#125;
&#125;</code></pre>
<h3 id="5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ"><a href="#5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ" class="headerlink" title="5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ"></a>5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ</h3><pre><code class="yaml">mybatis:
  config-location: classpath:mybatis/mybatis-config.xml æŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½®
  mapper-locations: classpath:mybatis/mapper/*.xml  æŒ‡å®šsqlæ˜ å°„æ–‡ä»¶çš„ä½ç½®</code></pre>
<p>æ›´å¤šä½¿ç”¨å‚ç…§</p>
<p><a target="_blank" rel="noopener" href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></p>
<h2 id="4ã€æ•´åˆSpringData-JPA"><a href="#4ã€æ•´åˆSpringData-JPA" class="headerlink" title="4ã€æ•´åˆSpringData JPA"></a>4ã€æ•´åˆSpringData JPA</h2><h3 id="1ï¼‰ã€SpringDataç®€ä»‹"><a href="#1ï¼‰ã€SpringDataç®€ä»‹" class="headerlink" title="1ï¼‰ã€SpringDataç®€ä»‹"></a>1ï¼‰ã€SpringDataç®€ä»‹</h3><p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180306105412.png"></p>
<h3 id="2ï¼‰ã€æ•´åˆSpringData-JPA"><a href="#2ï¼‰ã€æ•´åˆSpringData-JPA" class="headerlink" title="2ï¼‰ã€æ•´åˆSpringData JPA"></a>2ï¼‰ã€æ•´åˆSpringData JPA</h3><p>JPA:ORMï¼ˆObject Relational Mappingï¼‰ï¼›</p>
<p>1ï¼‰ã€ç¼–å†™ä¸€ä¸ªå®ä½“ç±»ï¼ˆbeanï¼‰å’Œæ•°æ®è¡¨è¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”é…ç½®å¥½æ˜ å°„å…³ç³»ï¼›</p>
<pre><code class="java">//ä½¿ç”¨JPAæ³¨è§£é…ç½®æ˜ å°„å…³ç³»
@Entity //å‘Šè¯‰JPAè¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼ˆå’Œæ•°æ®è¡¨æ˜ å°„çš„ç±»ï¼‰
@Table(name = &quot;tbl_user&quot;) //@Tableæ¥æŒ‡å®šå’Œå“ªä¸ªæ•°æ®è¡¨å¯¹åº”;å¦‚æœçœç•¥é»˜è®¤è¡¨åå°±æ˜¯userï¼›
public class User &#123;

    @Id //è¿™æ˜¯ä¸€ä¸ªä¸»é”®
    @GeneratedValue(strategy = GenerationType.IDENTITY)//è‡ªå¢ä¸»é”®
    private Integer id;

    @Column(name = &quot;last_name&quot;,length = 50) //è¿™æ˜¯å’Œæ•°æ®è¡¨å¯¹åº”çš„ä¸€ä¸ªåˆ—
    private String lastName;
    @Column //çœç•¥é»˜è®¤åˆ—åå°±æ˜¯å±æ€§å
    private String email;</code></pre>
<p>2ï¼‰ã€ç¼–å†™ä¸€ä¸ªDaoæ¥å£æ¥æ“ä½œå®ä½“ç±»å¯¹åº”çš„æ•°æ®è¡¨ï¼ˆRepositoryï¼‰</p>
<pre><code class="java">//ç»§æ‰¿JpaRepositoryæ¥å®Œæˆå¯¹æ•°æ®åº“çš„æ“ä½œ
public interface UserRepository extends JpaRepository&lt;User,Integer&gt; &#123;
&#125;
</code></pre>
<p>3ï¼‰ã€åŸºæœ¬çš„é…ç½®JpaProperties</p>
<pre><code class="yaml">spring:  
 jpa:
    hibernate:
#     æ›´æ–°æˆ–è€…åˆ›å»ºæ•°æ®è¡¨ç»“æ„
      ddl-auto: update
#    æ§åˆ¶å°æ˜¾ç¤ºSQL
    show-sql: true</code></pre>
<h1 id="ä¸ƒã€å¯åŠ¨é…ç½®åŸç†"><a href="#ä¸ƒã€å¯åŠ¨é…ç½®åŸç†" class="headerlink" title="ä¸ƒã€å¯åŠ¨é…ç½®åŸç†"></a>ä¸ƒã€å¯åŠ¨é…ç½®åŸç†</h1><p>å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶</p>
<p>é…ç½®åœ¨META-INF/spring.factories</p>
<p><strong>ApplicationContextInitializer</strong></p>
<p><strong>SpringApplicationRunListener</strong></p>
<p>åªéœ€è¦æ”¾åœ¨iocå®¹å™¨ä¸­</p>
<p><strong>ApplicationRunner</strong></p>
<p><strong>CommandLineRunner</strong></p>
<p>å¯åŠ¨æµç¨‹ï¼š</p>
<h2 id="1ã€åˆ›å»ºSpringApplicationå¯¹è±¡"><a href="#1ã€åˆ›å»ºSpringApplicationå¯¹è±¡" class="headerlink" title="1ã€åˆ›å»ºSpringApplicationå¯¹è±¡"></a><strong>1ã€åˆ›å»ºSpringApplicationå¯¹è±¡</strong></h2><pre><code class="java">initialize(sources);
private void initialize(Object[] sources) &#123;
    //ä¿å­˜ä¸»é…ç½®ç±»
    if (sources != null &amp;&amp; sources.length &gt; 0) &#123;
        this.sources.addAll(Arrays.asList(sources));
    &#125;
    //åˆ¤æ–­å½“å‰æ˜¯å¦ä¸€ä¸ªwebåº”ç”¨
    this.webEnvironment = deduceWebEnvironment();
    //ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°META-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationContextInitializerï¼›ç„¶åä¿å­˜èµ·æ¥
    setInitializers((Collection) getSpringFactoriesInstances(
        ApplicationContextInitializer.class));
    //ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°ETA-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationListener
    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
    //ä»å¤šä¸ªé…ç½®ç±»ä¸­æ‰¾åˆ°æœ‰mainæ–¹æ³•çš„ä¸»é…ç½®ç±»
    this.mainApplicationClass = deduceMainApplicationClass();
&#125;</code></pre>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180306145727.png"></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180306145855.png"></p>
<h2 id="2ã€è¿è¡Œrunæ–¹æ³•"><a href="#2ã€è¿è¡Œrunæ–¹æ³•" class="headerlink" title="2ã€è¿è¡Œrunæ–¹æ³•"></a>2ã€è¿è¡Œrunæ–¹æ³•</h2><pre><code class="java">public ConfigurableApplicationContext run(String... args) &#123;
   StopWatch stopWatch = new StopWatch();
   stopWatch.start();
   ConfigurableApplicationContext context = null;
   FailureAnalyzers analyzers = null;
   configureHeadlessProperty();

   //è·å–SpringApplicationRunListenersï¼›ä»ç±»è·¯å¾„ä¸‹META-INF/spring.factories
   SpringApplicationRunListeners listeners = getRunListeners(args);
    //å›è°ƒæ‰€æœ‰çš„è·å–SpringApplicationRunListener.starting()æ–¹æ³•
   listeners.starting();
   try &#123;
       //å°è£…å‘½ä»¤è¡Œå‚æ•°
      ApplicationArguments applicationArguments = new DefaultApplicationArguments(
            args);
      //å‡†å¤‡ç¯å¢ƒ
      ConfigurableEnvironment environment = prepareEnvironment(listeners,
            applicationArguments);
               //åˆ›å»ºç¯å¢ƒå®Œæˆåå›è°ƒSpringApplicationRunListener.environmentPrepared()ï¼›è¡¨ç¤ºç¯å¢ƒå‡†å¤‡å®Œæˆ

      Banner printedBanner = printBanner(environment);

       //åˆ›å»ºApplicationContextï¼›å†³å®šåˆ›å»ºwebçš„iocè¿˜æ˜¯æ™®é€šçš„ioc
      context = createApplicationContext();

      analyzers = new FailureAnalyzers(context);
       //å‡†å¤‡ä¸Šä¸‹æ–‡ç¯å¢ƒ;å°†environmentä¿å­˜åˆ°iocä¸­ï¼›è€Œä¸”applyInitializers()ï¼›
       //applyInitializers()ï¼šå›è°ƒä¹‹å‰ä¿å­˜çš„æ‰€æœ‰çš„ApplicationContextInitializerçš„initializeæ–¹æ³•
       //å›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextPrepared()ï¼›
       //
      prepareContext(context, environment, listeners, applicationArguments,
            printedBanner);
       //prepareContextè¿è¡Œå®Œæˆä»¥åå›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextLoadedï¼ˆï¼‰ï¼›

       //såˆ·æ–°å®¹å™¨ï¼›iocå®¹å™¨åˆå§‹åŒ–ï¼ˆå¦‚æœæ˜¯webåº”ç”¨è¿˜ä¼šåˆ›å»ºåµŒå…¥å¼çš„Tomcatï¼‰ï¼›Springæ³¨è§£ç‰ˆ
       //æ‰«æï¼Œåˆ›å»ºï¼ŒåŠ è½½æ‰€æœ‰ç»„ä»¶çš„åœ°æ–¹ï¼›ï¼ˆé…ç½®ç±»ï¼Œç»„ä»¶ï¼Œè‡ªåŠ¨é…ç½®ï¼‰
      refreshContext(context);
       //ä»iocå®¹å™¨ä¸­è·å–æ‰€æœ‰çš„ApplicationRunnerå’ŒCommandLineRunnerè¿›è¡Œå›è°ƒ
       //ApplicationRunnerå…ˆå›è°ƒï¼ŒCommandLineRunnerå†å›è°ƒ
      afterRefresh(context, applicationArguments);
       //æ‰€æœ‰çš„SpringApplicationRunListenerå›è°ƒfinishedæ–¹æ³•
      listeners.finished(context, null);
      stopWatch.stop();
      if (this.logStartupInfo) &#123;
         new StartupInfoLogger(this.mainApplicationClass)
               .logStarted(getApplicationLog(), stopWatch);
      &#125;
       //æ•´ä¸ªSpringBootåº”ç”¨å¯åŠ¨å®Œæˆä»¥åè¿”å›å¯åŠ¨çš„iocå®¹å™¨ï¼›
      return context;
   &#125;
   catch (Throwable ex) &#123;
      handleRunFailure(context, listeners, analyzers, ex);
      throw new IllegalStateException(ex);
   &#125;
&#125;</code></pre>
<h2 id="3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶"><a href="#3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶" class="headerlink" title="3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶"></a>3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶</h2><p>é…ç½®åœ¨META-INF/spring.factories</p>
<p><strong>ApplicationContextInitializer</strong></p>
<pre><code class="java">public class HelloApplicationContextInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; &#123;
    @Override
    public void initialize(ConfigurableApplicationContext applicationContext) &#123;
        System.out.println(&quot;ApplicationContextInitializer...initialize...&quot;+applicationContext);
    &#125;
&#125;
</code></pre>
<p><strong>SpringApplicationRunListener</strong></p>
<pre><code class="java">public class HelloSpringApplicationRunListener implements SpringApplicationRunListener &#123;

    //å¿…é¡»æœ‰çš„æ„é€ å™¨
    public HelloSpringApplicationRunListener(SpringApplication application, String[] args)&#123;

    &#125;

    @Override
    public void starting() &#123;
        System.out.println(&quot;SpringApplicationRunListener...starting...&quot;);
    &#125;

    @Override
    public void environmentPrepared(ConfigurableEnvironment environment) &#123;
        Object o = environment.getSystemProperties().get(&quot;os.name&quot;);
        System.out.println(&quot;SpringApplicationRunListener...environmentPrepared..&quot;+o);
    &#125;

    @Override
    public void contextPrepared(ConfigurableApplicationContext context) &#123;
        System.out.println(&quot;SpringApplicationRunListener...contextPrepared...&quot;);
    &#125;

    @Override
    public void contextLoaded(ConfigurableApplicationContext context) &#123;
        System.out.println(&quot;SpringApplicationRunListener...contextLoaded...&quot;);
    &#125;

    @Override
    public void finished(ConfigurableApplicationContext context, Throwable exception) &#123;
        System.out.println(&quot;SpringApplicationRunListener...finished...&quot;);
    &#125;
&#125;
</code></pre>
<p>é…ç½®ï¼ˆMETA-INF/spring.factoriesï¼‰</p>
<pre><code class="properties">org.springframework.context.ApplicationContextInitializer=\
com.atguigu.springboot.listener.HelloApplicationContextInitializer

org.springframework.boot.SpringApplicationRunListener=\
com.atguigu.springboot.listener.HelloSpringApplicationRunListener</code></pre>
<p>åªéœ€è¦æ”¾åœ¨iocå®¹å™¨ä¸­</p>
<p><strong>ApplicationRunner</strong></p>
<pre><code class="java">@Component
public class HelloApplicationRunner implements ApplicationRunner &#123;
    @Override
    public void run(ApplicationArguments args) throws Exception &#123;
        System.out.println(&quot;ApplicationRunner...run....&quot;);
    &#125;
&#125;</code></pre>
<p><strong>CommandLineRunner</strong></p>
<pre><code class="java">@Component
public class HelloCommandLineRunner implements CommandLineRunner &#123;
    @Override
    public void run(String... args) throws Exception &#123;
        System.out.println(&quot;CommandLineRunner...run...&quot;+ Arrays.asList(args));
    &#125;
&#125;</code></pre>
<h1 id="å…«ã€è‡ªå®šä¹‰starter"><a href="#å…«ã€è‡ªå®šä¹‰starter" class="headerlink" title="å…«ã€è‡ªå®šä¹‰starter"></a>å…«ã€è‡ªå®šä¹‰starter</h1><p>starterï¼š</p>
<p>â€‹    1ã€è¿™ä¸ªåœºæ™¯éœ€è¦ä½¿ç”¨åˆ°çš„ä¾èµ–æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>â€‹    2ã€å¦‚ä½•ç¼–å†™è‡ªåŠ¨é…ç½®</p>
<pre><code class="java">@Configuration  //æŒ‡å®šè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»
@ConditionalOnXXX  //åœ¨æŒ‡å®šæ¡ä»¶æˆç«‹çš„æƒ…å†µä¸‹è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ
@AutoConfigureAfter  //æŒ‡å®šè‡ªåŠ¨é…ç½®ç±»çš„é¡ºåº
@Bean  //ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶

@ConfigurationPropertieç»“åˆç›¸å…³xxxPropertiesç±»æ¥ç»‘å®šç›¸å…³çš„é…ç½®
@EnableConfigurationProperties //è®©xxxPropertiesç”Ÿæ•ˆåŠ å…¥åˆ°å®¹å™¨ä¸­

è‡ªåŠ¨é…ç½®ç±»è¦èƒ½åŠ è½½
å°†éœ€è¦å¯åŠ¨å°±åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé…ç½®åœ¨META-INF/spring.factories
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</code></pre>
<p>â€‹    3ã€æ¨¡å¼ï¼š</p>
<p>å¯åŠ¨å™¨åªç”¨æ¥åšä¾èµ–å¯¼å…¥ï¼›</p>
<p>ä¸“é—¨æ¥å†™ä¸€ä¸ªè‡ªåŠ¨é…ç½®æ¨¡å—ï¼›</p>
<p>å¯åŠ¨å™¨ä¾èµ–è‡ªåŠ¨é…ç½®ï¼›åˆ«äººåªéœ€è¦å¼•å…¥å¯åŠ¨å™¨ï¼ˆstarterï¼‰</p>
<p>mybatis-spring-boot-starterï¼›è‡ªå®šä¹‰å¯åŠ¨å™¨å-spring-boot-starter</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€å¯åŠ¨å™¨æ¨¡å—</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.atguigu.starter&lt;/groupId&gt;
    &lt;artifactId&gt;atguigu-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

    &lt;!--å¯åŠ¨å™¨--&gt;
    &lt;dependencies&gt;

        &lt;!--å¼•å…¥è‡ªåŠ¨é…ç½®æ¨¡å—--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.atguigu.starter&lt;/groupId&gt;
            &lt;artifactId&gt;atguigu-spring-boot-starter-autoconfigurer&lt;/artifactId&gt;
            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

&lt;/project&gt;</code></pre>
<p>2ï¼‰ã€è‡ªåŠ¨é…ç½®æ¨¡å—</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

   &lt;groupId&gt;com.atguigu.starter&lt;/groupId&gt;
   &lt;artifactId&gt;atguigu-spring-boot-starter-autoconfigurer&lt;/artifactId&gt;
   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;

   &lt;name&gt;atguigu-spring-boot-starter-autoconfigurer&lt;/name&gt;
   &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

   &lt;parent&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
      &lt;version&gt;1.5.10.RELEASE&lt;/version&gt;
      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
   &lt;/parent&gt;

   &lt;properties&gt;
      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
      &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
      &lt;java.version&gt;1.8&lt;/java.version&gt;
   &lt;/properties&gt;

   &lt;dependencies&gt;

      &lt;!--å¼•å…¥spring-boot-starterï¼›æ‰€æœ‰starterçš„åŸºæœ¬é…ç½®--&gt;
      &lt;dependency&gt;
         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
         &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
      &lt;/dependency&gt;

   &lt;/dependencies&gt;



&lt;/project&gt;
</code></pre>
<pre><code class="java">package com.atguigu.starter;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties(prefix = &quot;atguigu.hello&quot;)
public class HelloProperties &#123;

    private String prefix;
    private String suffix;

    public String getPrefix() &#123;
        return prefix;
    &#125;

    public void setPrefix(String prefix) &#123;
        this.prefix = prefix;
    &#125;

    public String getSuffix() &#123;
        return suffix;
    &#125;

    public void setSuffix(String suffix) &#123;
        this.suffix = suffix;
    &#125;
&#125;
</code></pre>
<pre><code class="java">package com.atguigu.starter;

public class HelloService &#123;

    HelloProperties helloProperties;

    public HelloProperties getHelloProperties() &#123;
        return helloProperties;
    &#125;

    public void setHelloProperties(HelloProperties helloProperties) &#123;
        this.helloProperties = helloProperties;
    &#125;

    public String sayHellAtguigu(String name)&#123;
        return helloProperties.getPrefix()+&quot;-&quot; +name + helloProperties.getSuffix();
    &#125;
&#125;
</code></pre>
<pre><code class="java">package com.atguigu.starter;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@ConditionalOnWebApplication //webåº”ç”¨æ‰ç”Ÿæ•ˆ
@EnableConfigurationProperties(HelloProperties.class)
public class HelloServiceAutoConfiguration &#123;

    @Autowired
    HelloProperties helloProperties;
    @Bean
    public HelloService helloService()&#123;
        HelloService service = new HelloService();
        service.setHelloProperties(helloProperties);
        return service;
    &#125;
&#125;
</code></pre>
<h1 id="æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹"><a href="#æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹" class="headerlink" title="æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹"></a>æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹</h1><p><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples">https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples</a></p>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ 3472693572@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">ğŸ’°</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '0ce672d0ff1a6155269c',
            clientSecret: 'f84f6ba1c25546cf8be595356d5f57d5dc041cf4',
            repo: 'wangfanprogrammer.github.io',
            owner: 'wangfanprogrammer',
            admin: ['wangfanprogrammer'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 xiaofan
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.jpg" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>






<div class="mobile-menus-out" >

</div>
<div class="mobile-menus">
    
    
    
    <a class="dynamic-menu " target="_self"   href="https://wangfanprogrammer.github.io/">çŒ¿å¸†åšå®¢</a>
    
    
</div>


</html>
